"use strict";(self.webpackChunk_jupyter_collaboration_extension=self.webpackChunk_jupyter_collaboration_extension||[]).push([[842],{4842:(e,r,a)=>{a.r(r),a.d(r,{default:()=>x});var o=a(2200),t=a(4993),n=a(1612),s=a(7460),i=a(1473),l=a(7354),c=a(9818),d=a(2678),u=a(5256),p=a(6292),m=a(2206),b=a(7784);const y={id:"@jupyter/collaboration-extension:userMenu",description:"Provide connected user menu.",requires:[],provides:p.IUserMenu,activate:e=>{const{commands:r}=e,{user:a}=e.serviceManager;return new p.UserMenu({commands:r,user:a})}},w={id:"@jupyter/collaboration-extension:user-menu-bar",description:"Add user menu to the interface.",autoStart:!0,requires:[p.IUserMenu,o.IToolbarWidgetRegistry],activate:async(e,r,a)=>{const{user:o}=e.serviceManager,t=new u.MenuBar({forceItemsPosition:{forceX:!1,forceY:!1},renderer:new p.RendererUserMenu(o)});t.id="jp-UserMenu",o.userChanged.connect((()=>t.update())),t.addMenu(r),a.addFactory("TopBar","user-menu",(()=>t))}},v={id:"@jupyter/collaboration-extension:rtcGlobalAwareness",description:"Add global awareness to share working document of users.",requires:[c.IStateDB],provides:n.IGlobalAwareness,activate:(e,r)=>{const{user:a}=e.serviceManager,o=new m.Doc,t=new b.ww(o),s=l.ServerConnection.makeSettings(),c=i.URLExt.join(s.wsUrl,"api/collaboration/room");return new n.WebSocketAwarenessProvider({url:c,roomID:"JupyterLab:globalAwareness",awareness:t,user:a}),r.changed.connect((async()=>{var e,a;const o=(null===(a=null===(e=(await r.toJSON())["layout-restorer:data"])||void 0===e?void 0:e.main)||void 0===a?void 0:a.current)||"";o.match(/^\w+:RTC:/)?t.setLocalStateField("current",o):t.setLocalStateField("current",null)})),t}},g={id:"@jupyter/collaboration-extension:rtcPanel",description:"Add side panel to display all currently connected users.",autoStart:!0,requires:[n.IGlobalAwareness],optional:[d.ITranslator],activate:(e,r,a)=>{const{user:o}=e.serviceManager,t=(null!=a?a:d.nullTranslator).load("jupyter_collaboration"),n=new s.SidePanel({alignment:"justify"});n.id="jp-collaboration-panel",n.title.icon=s.usersIcon,n.title.caption=t.__("Collaboration"),n.addClass("jp-RTCPanel"),e.shell.add(n,"left",{rank:300});const i=new p.UserInfoPanel(o);i.title.label=t.__("User info"),i.title.caption=t.__("User information"),n.addWidget(i);const l=new p.CollaboratorsPanel(o,r,(r=>{e.commands.execute("docmanager:open",{path:r})}),e.docRegistry);l.title.label=t.__("Online Collaborators"),n.addWidget(l)}},h={id:"@jupyter/collaboration-extension:userEditorCursors",description:"Add CodeMirror extension to display remote user cursors and selections.",autoStart:!0,requires:[t.IEditorExtensionRegistry],activate:(e,r)=>{r.addExtension({name:"remote-user-cursors",factory(e){const{awareness:r,ysource:a}=e.model.sharedModel;return t.EditorExtensionRegistry.createImmutableExtension((0,p.remoteUserCursors)({awareness:r,ytext:a}))}})}};var _;!function(e){e.share="collaboration:shared-link"}(_||(_={}));const x=[y,w,v,g,{id:"@jupyter/collaboration-extension:shared-link",autoStart:!0,optional:[o.ICommandPalette,d.ITranslator],activate:async(e,r,a)=>{const{commands:t}=e,n=(null!=a?a:d.nullTranslator).load("collaboration");t.addCommand(_.share,{label:n.__("Generate a Shared Link"),icon:s.shareIcon,execute:async()=>{const e=await(0,p.showSharedLinkDialog)({translator:a});e.button.accept&&e.value&&o.Clipboard.copyToSystem(e.value)}}),r&&r.addItem({command:_.share,category:n.__("Server")})}},h]}}]);