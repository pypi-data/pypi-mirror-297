{"version":3,"file":"main.LinoWebCam_LinoDialog.2111856afe61e3a49d9a.js","mappings":"kXAAO,MAAMA,EAAO,qBASpB,IAAIC,EAA6BA,EAAK,CAClCC,WAAY,oCACZC,YAAa,wDACbC,WAAY,0GACZC,YAAa,uFAIV,SAASC,EAAmBC,EAAMC,GACrC,IAAIC,EACoBA,OAAXC,IAATH,EAA0BA,EACnBI,KACX,IAAIC,EAAOC,OAAOD,KAAKH,EAAIK,aACIJ,IAAVF,EAAsBI,EAAKG,SAAWP,EAAQI,EAAKG,OAAS,IAE7EH,EAAKI,SAAQC,IACT,IAAIC,EAAMC,SAASC,eAAeH,GAC7BI,uBAAuB,eAC5B,GAAmB,IAAfH,EAAIH,OAAc,EAClBG,EAAMA,EAAI,IACMI,wBAAwBC,MAAQJ,SAC3CE,uBAAuB,iBAAiB,GACxCC,wBAAwBC,MACjBd,EAAIK,MAAMG,IAClBO,MAAMC,KAAKP,EAAIQ,iBACX,uBAAuBV,SAAQW,IACvBH,MAAMC,KAAKE,EAAGC,WAAWC,KAAK,KAC7BC,SAAS,gBAAgBH,EAAGI,MACxBC,YAAY,eAAgB,OAAO,GAG5D,IAGZ,EA7BEC,EAAAA,EAAAA,oBAAmBhC,GA+Bd,MAAMiC,EAAWC,IACpB,MAAMC,GAAUC,EAAAA,EAAAA,YAAWpC,EAAI,CAAC,eAChC,IAAIqC,EAAQH,EAAMG,OAASH,EAAM5B,KAAK+B,MACtC,OAAQF,EAAQG,OAAeC,EAAAA,EAAAA,MAACC,EAAAA,SAAc,CAAAC,SAAA,EACxCP,EAAMQ,YAAcL,IAASE,EAAAA,EAAAA,MAACC,EAAAA,SAAc,CAAAC,SAAA,EAC1CF,EAAAA,EAAAA,MAAA,SACII,UAAWR,EAAQlC,WAAW2C,QAC1B,UAAW,mBACX,CAAC,qBAAsBV,EAAMW,WAEjCC,MACIlC,OAAOmC,OAAO,CAAC,EAAGb,EAAM5B,KAAK0C,OAAS,CAAC,GAAGC,UACvCf,EAAM5B,KAAK4C,UAAUT,SAAA,CAAEJ,EAAM,QACxCc,EAAAA,EAAAA,KAAA,YAEHjB,EAAMO,YAZa,IAaP,EAIrBR,EAAQmB,UAAY,CAChBf,MAAOgB,IAAAA,OACP/C,KAAM+C,IAAAA,OAAiBC,WACvBZ,WAAYW,IAAAA,KACZR,SAAUQ,IAAAA,KACVZ,SAAUY,IAAAA,QAAkBC,YAEhCrB,EAAQsB,aAAe,CACnBb,YAAY,EACZG,UAAU,GAIP,MAAMW,EACT,qBAAOC,EAAe,KAAC1D,EAAI,MAAEmC,EAAK,QAAEwB,IAChC,OAAIxB,EAAMyB,EAAAA,yBAAqCA,EAAAA,mBACpCD,EAAQE,aAAa7D,GACzBmC,EAAMyB,EAAAA,yBAAqCA,EAAAA,kBAC5CD,EAAQG,KAAK3B,EAAM4B,OAAOC,UAAUhE,GACpCmC,EAAMyB,EAAAA,yBAAqCA,EAAAA,kBACvCD,EAAQ3D,GAAQ2D,EAAQM,KAAKjE,EAC3C,EAIG,MAAMkE,UAA0BC,EAAAA,UAgCnCC,WAAAA,CAAYjC,GACRkC,MAAMlC,GAAO,KAcjBmC,OAAS,KAAQ,CAAC,GAAI,UAAM5D,GAAWoB,SAASnB,KAAK4D,YAbjD5D,KAAK6D,eAAiB,GACtB7D,KAAK8D,QAAUtC,EAAMyB,EAAAA,yBAAqCA,EAAAA,kBACpDzB,EAAM5B,KAAKmE,aAAevC,EAAM5B,KAAKP,KAC3CW,KAAKgE,aAAexC,EAAMyC,UAAUC,WACpClE,KAAKmE,EAAI3C,EAAMyC,UAAUC,WAEzBlE,KAAK2D,OAAS3D,KAAK2D,OAAOS,KAAKpE,MAC/BA,KAAK4D,SAAW5D,KAAK4D,SAASQ,KAAKpE,MACnCA,KAAK+C,eAAiB/C,KAAK+C,eAAeqB,KAAKpE,MAC/CA,KAAKqE,UAAYrE,KAAKqE,UAAUD,KAAKpE,MACrCA,KAAKsE,WAAatE,KAAKsE,WAAWF,KAAKpE,KAC3C,CAIA+C,cAAAA,CAAe1D,GACX,OAAOyD,EAAaC,eAAe,CAC/B1D,KAAMA,EAAMmC,MAAOxB,KAAKwB,MAAOwB,QAAShD,KAAKgD,SACrD,CAEAY,QAAAA,GACI,OAAO5D,KAAK+C,eAAe/C,KAAK8D,QACpC,CAEAO,SAAAA,CAAUE,EAAWnD,EAAM,CAAC,GACxB,IAAIoD,EAAIxE,KAAK4D,YAAc,IAE3B,OADIY,aAAatE,SAAQsE,EAAIC,KAAKC,UAAUF,IACxCD,GACO9B,EAAAA,EAAAA,KAAA,OAAKrB,MAAOA,EAAOuD,wBAAyB,CAACC,OAAQJ,MAErD/B,EAAAA,EAAAA,KAAA,OAAKrB,MAAOA,EAAMW,SAAEyC,GAEnC,CAEAF,UAAAA,EAAW,MAACO,GAAM,EAAK,KAAEC,EAAK,IAAM,CAAC,GAC7B9E,KAAKwB,MAAMyB,EAAAA,yBAAqCA,EAAAA,oBAChDjD,KAAKgE,aAAae,YAAYT,WAAW,CACrCjF,KAAe,UAATyF,EAAmB9E,KAAKgF,QACxBhF,KAAKwB,MAAM5B,KAAKP,KAAM4F,IAAKjF,KAAM6E,MAAOA,EAAOC,KAAMA,GACvE,EAzESvB,EACF2B,gBAAkB,CAAC,cADjB3B,EAEF4B,MAAQ7F,EAFNiE,EAGF6B,YAAcC,EAAAA,gBAHZ9B,EAIF+B,wBAA0B,CAC7BlC,OAAQT,IAAAA,OACR4C,aAAc5C,IAAAA,KACdX,WAAYW,IAAAA,KACZ,CAACM,EAAAA,uBAAkCN,IAAAA,MAAgB,CAC/CM,EAAAA,kBACAA,EAAAA,mBACAA,EAAAA,kBACAA,EAAAA,qBACAA,EAAAA,mBACAA,EAAAA,mBACAA,EAAAA,sBAEJuC,SAAU7C,IAAAA,OAAiBC,YAjBtBW,EAoBFb,UAAY,IACZa,EAAkB+B,wBACrB1F,KAAM+C,IAAAA,OAAiBC,WACvBqB,UAAWtB,IAAAA,OAAiBC,YAvBvBW,EA0BFV,aAAe,CAClB0C,cAAc,EACdvD,YAAY,EACZ,CAACiB,EAAAA,uBAAkCA,EAAAA,qBAgDpC,MAAMwC,UAAkClC,EAU3CE,WAAAA,CAAYjC,GACRkC,MAAMlC,GAAO,KAgEjBkE,WAAcC,KACQ,OAAdA,EAAOC,IACND,EAAOC,KAAO5F,KAAK6F,MAAMD,IAAMD,EAAOG,KAAO9F,KAAK6F,MAAMC,KAC3D9F,KAAK+F,QAAQ,EAlEf,MAAMC,EAAe,CAAC,EACjBxE,EAAMyE,eAAe/F,OAAOmC,OAAO2D,EACpChG,KAAKgE,aAAakC,cAAcC,wBACpCnG,KAAK6F,MAAQ,IACN7F,KAAK6F,MAAOvD,MAAO,KAAM8D,SAAU,QAASJ,GACnDhG,KAAKgF,QAAUxD,EAAM5B,KAAKyG,WAAa7E,EAAM5B,KAAKP,KAAK8B,SAAS,KAC1DK,EAAM5B,KAAKP,KAAO,GAAGmC,EAAMyC,UAAUqC,UAAU9E,EAAM5B,KAAKP,QAEhEW,KAAKuG,sBAAwBvG,KAAKuG,sBAAsBnC,KAAKpE,MAC7DA,KAAKwG,QAAUxG,KAAKwG,QAAQpC,KAAKpE,MACjCA,KAAK4D,SAAW5D,KAAK4D,SAASQ,KAAKpE,MACnCA,KAAK+F,OAAS/F,KAAK+F,OAAO3B,KAAKpE,KACnC,CAEA,aAAMyG,SACI/C,MAAM+C,UACZ,IAAIC,EAAMhD,MAAME,WACX5D,KAAKgE,aAAaL,OAAO+C,KAC9B1G,KAAK2G,QAAUD,EAAIE,eAAe,qBACtC,CAEAC,OAAAA,GACI,IAAIH,EAAMhD,MAAME,WACZ5D,KAAK2G,SACA3G,KAAKwB,MAAMyE,eAAejG,KAAKsE,WAAW,CAACQ,KAAM,UACtD9E,KAAKwG,QAAQE,EAAII,mBACjB9G,KAAKgE,aAAa+C,QAAQC,OAAOhH,KAAKgF,SAAWhF,MAEjDA,KAAKiH,SAAS,CAAC3E,MAAOoE,GAE9B,CAEAH,qBAAAA,CAAsBW,EAAWC,EAAWnE,GACxC,OAAKhD,KAAK2G,QACH3G,KAAK6F,MAAMvD,QAAU6E,EAAU7E,OAA+B,OAArBtC,KAAK6F,MAAMvD,OACvDoB,MAAME,WAAWkD,oBAAsB9G,KAAK6F,MAAMO,SAF5BpG,KAAK6F,MAAMvD,QAAU6E,EAAU7E,KAG7D,CAEA8E,kBAAAA,CAAmBC,EAAWC,GACtBtH,KAAK2G,QACD3G,KAAK6F,MAAMO,WAAa1C,MAAME,WAAWkD,oBACzC9G,KAAKiH,SAAS,CAAC3E,MAAO,OACtBtC,KAAK+F,UAEN/F,KAAKiH,SAAS,CAAC3E,MAAOoB,MAAME,YACvC,CAEA2D,oBAAAA,UACWvH,KAAKgE,aAAa+C,QAAQC,OAAOhH,KAAKgF,QACjD,CAEApB,QAAAA,GACI,OAAO5D,KAAK6F,MAAMvD,KACtB,CAEAkE,OAAAA,CAAQJ,GACJpG,KAAKgE,aAAakC,cAAcsB,YAAY,CACxCC,KAAM,GAAGrB,KAAYpG,KAAKV,GAAGE,YAAY0C,QAAQwC,UAAU1E,KAAKgE,aAAakC,cAAcwB,2BAC5FC,MAAMrE,IACLtD,KAAKiH,SAAS,CAAC3E,MAAOgB,EAAKA,KAAM8C,SAAUA,GAAU,GAE7D,CAQAL,MAAAA,GACI/F,KAAKwG,QAAQ9C,MAAME,WAAWkD,kBAClC,EAnFSrB,EACFP,gBAAkB,CAAC,eAAe0C,OAAOrE,EAAkB2B,iBADzDO,EAEF/C,UAAY,IACZa,EAAkBb,UACrBuD,cAAetD,IAAAA,KAAeC,YAJzB6C,EAMF5C,aAAe,IACfU,EAAkBV,aACrBoD,eAAe,GA+EhB,MAAM4B,UAA2BtE,EAEpCE,WAAAA,CAAYjC,GACRkC,MAAMlC,GAAO,KAwGjBsG,UAAaC,GAAU,KAvGnB/H,KAAKgI,aAAe,CAChB,iBACA,SACA,wBAGJhI,KAAKiI,SAAWjI,KAAKiI,SAAS7D,KAAKpE,MACnCA,KAAK2D,OAAS3D,KAAK2D,OAAOS,KAAKpE,MAC/BA,KAAKkI,MAAQlI,KAAKkI,MAAM9D,KAAKpE,MAC7BA,KAAKmI,oBAAsBnI,KAAKmI,oBAAoB/D,KAAKpE,MACzDA,KAAKoI,SAAWpI,KAAKoI,SAAShE,KAAKpE,MACnCA,KAAKqI,eAAiBrI,KAAKqI,eAAejE,KAAKpE,MAC/CA,KAAKsI,WAAatI,KAAKsI,WAAWlE,KAAKpE,MACvCA,KAAKuI,MAAQvI,KAAKuI,MAAMnE,KAAKpE,MAC7BA,KAAKwI,aAAexI,KAAKwI,aAAapE,KAAKpE,MAC3CA,KAAKyI,OAASzI,KAAKyI,OAAOrE,KAAKpE,MAC/BA,KAAK0I,cAAgB1I,KAAK0I,cAActE,KAAKpE,MAC7CA,KAAK+F,OAAS/F,KAAK+F,OAAO3B,KAAKpE,KACnC,CAEA,aAAMyG,GACFzG,KAAK2I,WAAa,CACdC,eAAgB5I,KAAKV,GAAGI,YAAYmJ,UACpCC,WAAW,EACXC,WAAY,CAAC,EACbC,qBAAuBjB,IAAW,EAClCkB,aAAelB,GAAW,KAElC,CAEAE,QAAAA,GACI,GAAIjI,KAAKwB,MAAMyB,EAAAA,yBAAqCA,EAAAA,kBAChD,OAAO,EACX,GAAIjD,KAAKwB,MAAMyB,EAAAA,yBAAqCA,EAAAA,mBAChD,OAAO,EACX,IAAKjD,KAAKwB,MAAM5B,KAAKsJ,SAAU,OAAO,EACtC,GAAIlJ,KAAKwB,MAAMyB,EAAAA,yBAAqCA,EAAAA,kBAA6B,CAC7E,IAAIkG,EAAMnJ,KAAKgD,QAAQG,KAAKnD,KAAKwB,MAAM4B,OAAOC,UAC1C+F,EAAYD,EAAIA,EAAI/I,OAAS,GAGjC,SAAKgJ,IAAcA,EAAUC,UAEzBF,EAAIA,EAAI/I,OAAS,KAEd+I,EAAIA,EAAI/I,OAAS,GAAGJ,KAAKwB,MAAM5B,KAAKP,QAAS,GACxD,CACI,QAAIW,KAAKgD,QAAQM,KAAKgG,kBACftJ,KAAKgD,QAAQM,KAAKiG,gBAAgBvJ,KAAKwB,MAAM5B,KAAKP,QAAS,EAE1E,CAEA6I,KAAAA,GACI,IAAIjD,EAAMjF,KAAKwJ,QACXvE,EAAIiD,MAAOjD,EAAIiD,QACVjD,EAAIwE,WAAYxE,EAAIwE,WAAWvB,QAC/BjD,EAAIyE,UAAUzE,EAAIyE,SAASC,QAAQzB,OAChD,CAEAC,mBAAAA,GACI,IAAIH,EAAe,GAenB,OAdIhI,KAAKwB,MAAMyB,EAAAA,yBAAqCA,EAAAA,kBAC5CjD,KAAKgD,QAAQ4G,aAAa5J,KAAKwB,MAAM4B,OAAOC,UAAUlC,SACtDnB,KAAKwB,MAAM5B,KAAKmE,eAEhBiE,EAAa6B,KAAK,yBAGtB7B,EAAa6B,KAAK,UACd7J,KAAKwB,MAAMyB,EAAAA,yBAAqCA,EAAAA,oBAC5CjD,KAAKiI,WAAYD,EAAa6B,KAAK,kBAC9B7J,KAAKgD,QAAQ8G,SAAS3I,SAASnB,KAAKwB,MAAM5B,KAAKP,OACpD2I,EAAa6B,KAAK,0BAGvB7B,CACX,CAEAI,QAAAA,GACI,OAAO3F,EAAAA,EAAAA,KAAA,KAAMkG,WAAWC,eAAc,CAElCmB,SAAWC,IACFhK,KAAK2I,WAAWK,qBAAqBgB,KAC1ChK,KAAKqI,eAAe2B,GACpBhK,KAAK2I,WAAWM,aAAae,GAAE,EAEnC/E,IAAKjF,KAAKsI,WACVlH,MAAO,CAACR,MAAO,QACf4E,SAAUxF,KAAKwB,MAAMgE,SACrBlD,MAAOtC,KAAK4D,YAAc,MACtB5D,KAAK2I,WAAWI,YAC5B,CAEAV,cAAAA,CAAe2B,GACXhK,KAAK+F,OAAO,CAAC,CAAC/F,KAAK8D,SAAUkG,EAAEC,OAAO3H,QACtCtC,KAAKiH,SAAS,CAAC,EACnB,CAEAqB,UAAAA,CAAWrD,GACPjF,KAAKwJ,QAAUvE,EACXA,GAAOjF,KAAK0I,iBAAiB1I,KAAKkI,OAC1C,CAIAK,KAAAA,CAAMtD,GACF,MAAMiF,EAAUA,KACZlK,KAAKmK,UAAUC,QAAWrC,IACjB/H,KAAKiI,aACN/H,OAAOmC,OAAOrC,KAAKgE,aAAa+C,QAAS,CACrCsD,qBAAsBnK,OAAOmC,OAAO,CAACgB,SAAU,GAAIrD,KAAKwB,MAAM4B,QAAQC,SACtEiH,qBAAsBtK,KAAKwB,MAAMgE,SACjC+E,uBAAwBvK,KAAKwB,MAAMyB,EAAAA,uBACnCuH,sBAAuBxK,KAAKgE,aAAakC,cAAcuE,UAEvDzK,KAAKwB,MAAMyB,EAAAA,yBAAqCA,EAAAA,oBAC5CjD,KAAKwB,MAAM+D,cACjBvF,KAAKgE,aAAa0G,QAAQC,aAAa,CAACpF,cAAc,IAC5D,CACH,EAEDN,IACAjF,KAAKmK,UAAYlF,EACbjF,KAAKwB,MAAMyB,EAAAA,yBAAqCA,EAAAA,mBAChDjD,KAAKmK,UAAYlF,EAAI2F,QAAQ,MAC7BV,KAGAlK,KAAKwB,MAAMyB,EAAAA,yBAAqCA,EAAAA,oBAClDiH,KAENlK,KAAKwI,aAAaxI,KAAKmK,UAC3B,CAEA3B,YAAAA,CAAavD,GACT,GAAIA,EAAK,CACL,IAAI4F,EAAU7K,KAAKmI,sBACnBnI,KAAKgI,aAAa3H,SAAQyK,IAAS7F,EAAIhE,UAAU8J,OAAOD,EAAK,IAC7DD,EAAQxK,SAAQyK,IAAS7F,EAAIhE,UAAU+J,IAAIF,EAAK,GACpD,CACJ,CAEArC,MAAAA,GACIzI,KAAKgE,aAAakC,cAAcuC,OAAO,CACnCwC,SAAU,CAAC5H,SAAUrD,KAAKwB,MAAM4B,OAAOC,WAC/C,CAEAqF,aAAAA,GACI,OACI1I,KAAKwB,MAAMyB,EAAAA,yBAAqCA,EAAAA,mBAChDjD,KAAKwB,MAAM4B,OAAOC,WAAarD,KAAKgE,aAAa+C,QAAQsD,wBAGzDrK,KAAKwB,MAAMyB,EAAAA,yBAAqCjD,KAAKgE,aAAa+C,QAAQwD,wBAC1EvK,KAAKgE,aAAakC,cAAcuE,UAAYzK,KAAKgE,aAAa+C,QAAQyD,uBACtExK,KAAKwB,MAAMgE,WAAaxF,KAAKgE,aAAa+C,QAAQuD,qBAG1D,CAEAvE,MAAAA,CAAOmF,GACHlL,KAAKgE,aAAakC,cAAcH,OAAO,CACnCmF,OAAQA,EAAQtL,KAAMI,KAAKwB,MAAM5B,KAAMuL,IAAKnL,KAAKwB,MAAM4B,OACvDgI,WAAYpL,KAAKwB,MAAMyB,EAAAA,wBAC/B,CAEAoI,MAAAA,CAAOrJ,EAAWhC,KAAKwB,MAAMQ,YACzB,OAAKhC,KAAK6F,MAAMjE,OACZ5B,KAAKmK,WAAWnK,KAAKwI,aAAaxI,KAAKmK,YACpC1H,EAAAA,EAAAA,KAAClB,EAAO,IAAKvB,KAAKwB,MACrBQ,WAAYA,GAAchC,KAAKwB,MAAMQ,WACrCpC,KAAMI,KAAKwB,MAAM5B,KAAMuC,SAAUnC,KAAK2D,SAAS5B,UAC/CU,EAAAA,EAAAA,KAAA,OACIR,UAAWjC,KAAKV,GAAGC,WAAW2C,QAAQlC,KAAK6D,gBAC3CiE,UAAW9H,KAAK8H,UAChB7C,IAAKjF,KAAKuI,MAAMxG,SACX/B,KAAK2I,WAAWG,WACb9I,KAAKwB,MAAM+D,eAAiBvF,KAAKiI,WADRjI,KAAKoI,WAERpI,KAAKqE,iBAXb,IAclC,EAzLSwD,EACF3C,gBAAkB,CAAC,eAAe0C,OAAOrE,EAAkB2B,iBA4L/D,MAAMoG,UAAkCzD,EAE3CpE,WAAAA,CAAYjC,GACRkC,MAAMlC,GAAO,KAgBjBsG,UAAakC,IACK,UAAVA,EAAE1J,KAAmBN,KAAKwJ,QAAQ+B,cAAcvB,EAAEwB,iBAAiB,EAhBvExL,KAAK6D,eAAegG,KAAK,4BACzB7J,KAAK6F,MAAQ,IACN7F,KAAK6F,MACR4F,aAAc,MAGlBzL,KAAK0L,cAAgBlK,EAAMyB,EAAAA,yBAAqCA,EAAAA,kBAC1DzB,EAAM5B,KAAK+L,oBACXnK,EAAM5B,KAAKP,KAAO,SAExBW,KAAKoI,SAAWpI,KAAKoI,SAAShE,KAAKpE,MACnCA,KAAK4D,SAAW5D,KAAK4D,SAASQ,KAAKpE,MACnCA,KAAKqE,UAAYrE,KAAKqE,UAAUD,KAAKpE,KACzC,CAMA4D,QAAAA,GACI,MAAO,CACHgI,KAAMlI,MAAME,WACZtB,MAAOtC,KAAK+C,eAAe/C,KAAK0L,eACxC,CAEAtD,QAAAA,GACI,OAAO3F,EAAAA,EAAAA,KAAA,KAAMnD,GAAGG,WAAWoM,SAAQ,CAC/B9B,SAAWC,IACHA,EAAE8B,cAAcC,SAAW/B,EAAE8B,cAAcE,SAC/ChM,KAAK+F,OAAO,CAAC,CAAC/F,KAAK8D,SAAUkG,EAAE1H,MAC3B,CAACtC,KAAK0L,eAAgB1B,EAAE1H,QACxBtC,KAAKiH,SAAS,CAAC,GAAE,EAEzBgF,YAAY,OACZC,QAASlM,KAAKkM,QACdjH,IAAKjF,KAAKsI,WACV6D,UAAWnM,KAAKwB,MAAM5B,KAAKwM,cAAcC,WACzCjL,MAAO,CAACR,MAAO,QACf4E,SAAUxF,KAAKwB,MAAMgE,SACrBlD,MAAOtC,KAAK4D,WAAWtB,OAC/B,CAEA+B,SAAAA,GACI,IAAIG,EAAId,MAAME,YAAc,IAC5B,OAAOnB,EAAAA,EAAAA,KAAA,OAAKrB,MAAO,CAACkL,WAAY,UAAUvK,SAAEyC,GAChD,EAjDS8G,EACFpG,gBAAkB,CAAC,cAAc0C,OAAOC,EAAmB3C,gB,qHCrb/D,MAAMqH,EAAYA,CAACvJ,EAASwJ,KAC/B,MAAMC,EAAW,IAAIC,EAAAA,EACrBD,EAASE,YAAY,CACjBtN,KAAM,uBACNuN,OAASV,GAAYlJ,EAAQV,MAAMuK,EAAAA,yBACnCC,iBAAAA,CAAkBC,EAAKb,GACnBlJ,EAAQgK,gBAAgBC,EAAAA,kBAAmBJ,EAAAA,wBAAyBE,GACpE/J,EAAQ0H,QAAQwC,cAAc,CAAC,CAACL,EAAAA,yBAA0BE,GACtDE,EAAAA,mBAAmB,GAAO,EAClC,IAGJE,EAAAA,GAAAA,IACKC,EAAAA,GACJC,IAAIZ,GACJY,IAAIC,EAAAA,kBACJC,KAAK,CACFC,OAAO,EACPC,KAAM,eACNC,YAAa,KACbC,cAAc,EACdC,cAAe,CACbC,aAAa,GAEfC,MAAO,CACHC,MAAM,GAEVC,QAAS,CACLC,SAAU,6CAGdC,UAAW,CACPC,MAAO,CAAC,cAAe,SAAU,uBAAwB,gBACzDC,kBAAmBvB,EAAAA,wBACnBwB,aAAcxB,EAAAA,wBACdyB,mBAAoBzB,EAAAA,wBAEpB0B,OAAQ,CAAC,uBAAwB,eAAgB,aAIzD/B,EAAKW,EAAAA,GAAK,EAId,EAAeA,EAAI,E,2zBCjDN,EAAA9N,KAAe,aAG5B,mBAEA,aAEA,UAGA,aAEA,IAAIC,EAA6BA,EAAK,CAElCkP,SAAU,QAAF,wBAAsD,SAE9DC,eAAgB,QAAF,wBAA4D,SAE1EC,cAAe,QAAF,wBAA2D,SAExEC,cAAe,QAAF,wBAA2D,SAExEC,IAAK,QAAF,wBAAgE,SAEnEzB,KAAM,QAAF,wBAAkD,WACxD,IAAA7L,oBAAmBhC,GA0BrB,MAAMuP,EAyBF,WAAApL,CAAYqL,GACR9O,KAAK8O,MAAQA,EACb9O,KAAK+O,uBACT,CAEA,qBAAAA,GACI,MAAMC,EAAqC,CAAC,EAe5C,OAdAhP,KAAKiP,SAAWC,OAAOC,IAAIC,cAAcC,YACnBtP,IAAlBC,KAAKiP,UACLD,EAAYM,OAAStP,KAAKiP,SAASK,OACnCN,EAAYpO,MAAQZ,KAAKiP,SAASrO,QAElCoO,EAAYM,OAAStP,KAAK8O,MAAMtN,MAAM8N,OAASC,iBAC/CP,EAAYpO,MAAQZ,KAAK8O,MAAMtN,MAAMZ,MAAQ2O,iBAC7CvP,KAAKiP,SAAW/O,OAAOmC,OAAO,CAAC,EAAG2M,EAAiC,CAACQ,WAAYD,iBAAkBE,UAAU,IAC5GP,OAAOC,IAAIO,YAAY,CAACL,OAAQrP,KAAKiP,YAEzCjP,KAAK2P,YAAc,IAAI3P,KAAKiP,UACxBjP,KAAK8O,MAAMjJ,MAAM+J,SAAUZ,EAAYY,SAAW5P,KAAK8O,MAAMjJ,MAAM+J,SAClEZ,EAAYa,WAAa,cAC9B7P,KAAK8P,sBAAwBd,EACtBA,CACX,EA9CO,EAAAe,gBAAmBjB,IACtBA,EAAMkB,UAAYlO,EAAMmO,OAAO,MAC/BnB,EAAMoB,QAAUpO,EAAMqO,aACjBpI,IACG+G,EAAMtN,MAAM4O,YAAYtB,EAAMkB,UAAUrG,QAAQ0G,gBAAgB,GAExE,CAACvB,EAAMkB,YAEP,MAAOnK,EAAOoB,GAAYnF,EAAMwO,SAAsB,CAClDC,QAAS,KAAMX,SAAU,KAAMY,QAAS,KAY5C,OAVA1B,EAAMjJ,MAAQA,EACdiJ,EAAM7H,SAAWnF,EAAMqO,aAAaM,GAChCxJ,GAAUyJ,GAAqBxQ,OAAOmC,OAAO,CAAC,EAAGqO,EAAKD,MAAM,IAEhE3B,EAAM6B,aAAe7O,EAAMqO,aACvBpI,IACI,IAAI6I,GAAK/K,EAAM2K,QAAQK,QAAQhL,EAAM+J,UAAY,GAAK/J,EAAM2K,QAAQpQ,OACpE0O,EAAM7H,SAAS,CAAC2I,SAAU/J,EAAM2K,QAAQI,IAAI,GAEpD,IACO9B,CAAK,EAoCpB,MAAMgC,EAA2CtP,IAC7C,MAAM,SAACyN,EAAQ,YAAEU,GAAenO,EAAMuP,IAC/BtB,EAAUuB,GAAelP,EAAMwO,SAAkBrB,EAASQ,UAC3DhO,GAAU,IAAAC,YAAWpC,EAAI,CAAC,gBAAiB,gBAAiB,MAAO,SACnE8I,EAAWtG,EAAMqO,aACnB,EAAExO,QAAOsP,MAAM,KAAMC,MAAKC,gBAAeC,SAAQ9O,WAAY,2BACzD,gBAACb,EAAQmN,IAAIrN,QAAO,CAAC3B,KAAM,CAAC+B,MAAOA,IAC/B,gBAACF,EAAQiN,cAAc2C,YAAW,CAACC,aAAa,aAC5CL,IAAKA,EAAKC,IAAKA,EAAKC,cAAeA,EACnCI,aAAa,EAAMH,OAAQA,EAAQ9O,MAAOA,OACnB,CAACb,IACxC,OAAQA,EAAQG,MAAe,gCAEvBwG,EAAS,CAACzG,MAAO,mBAAoBsP,IAAKzP,EAAMuP,GAAGjC,MAAMtN,MAAM8N,OAC/D4B,IAAK,IAAKC,cAAgBnH,GAAM9J,OAAOmC,OAAOsN,EAC1C,CAACL,OAAQtF,EAAE1H,MAAQqN,EAAYH,aACnC4B,OAAQ,KAAM9O,MAAO2M,EAASK,OAASL,EAASO,aACpD,2BACCpH,EAAS,CAACzG,MAAO,kBAAmBsP,IAAKzP,EAAMuP,GAAGjC,MAAMtN,MAAMZ,MAC3DsQ,IAAK,IAAKC,cAAgBnH,GAAM9J,OAAOmC,OAAOsN,EAC1C,CAAC/O,MAAOoJ,EAAE1H,MAAQqN,EAAYH,aAClC4B,OAAQ,KAAM9O,MAAO2M,EAASrO,MAAQqO,EAASO,aACnD,2BACCpH,EAAS,CAACzG,MAAO,sBAAuBuP,IAAK,EAAGC,cAAgBnH,IACzD9J,OAAOmC,OAAOsN,EAAa,CACvBL,OAASK,EAAYL,OAASK,EAAYH,WAAcxF,EAAE1H,MAC1D1B,MAAQ+O,EAAY/O,MAAQ+O,EAAYH,WAAcxF,EAAE1H,MACxDkN,WAAYxF,EAAE1H,OAAO,EAC1B8O,OAAQ,MAAO9O,MAAO2M,EAASO,aACtC,2BACA,2BACI,gBAAC/N,EAAQmN,IAAIrN,QAAO,CAAC3B,KAAM,CAAC+B,MAAOF,EAAQ0L,KAAKqE,EAAE,cAC9C,gBAAC/P,EAAQkN,cAAc8C,YAAW,CAC9BC,QAASjC,EACT1F,SAAUC,IACNgH,EAAYhH,EAAE1H,OACdpC,OAAOmC,OAAOsN,EAAa,CAACF,SAAUzF,EAAE1H,OAAO,OAzB3C,IA6BrB,EACLwO,EAAYpO,UAAY,CAACqO,GAAI,UAAUY,WAAW9C,GAAejM,YAInE,MAAMgP,EAAyCpQ,IAC3C,MAAMqQ,EAAQ/P,EAAMmO,OAAO,MACrB6B,EAAc,CAACC,WAAY,QAASC,MAAO,QAC7CC,aAAc,MAAOrR,MAAO,MAAO0O,OAAQ,MAAO4C,OAAQ,OACxDzQ,GAAU,IAAAC,YAAWpC,EAAI,CAAC,WAAY,mBAC5C,OAAQmC,EAAQG,MAAe,gCAAE,gBAACH,EAAQ+M,SAAS2D,OAAM,CACrDC,KAAK,eACLlI,QAAS1I,EAAMuP,GAAGjC,MAAMoB,QACxB9O,MAAO0Q,IACVtQ,EAAMuP,GAAGjC,MAAMjJ,MAAM2K,QAAQpQ,OAAS,GACnC,gBAACqB,EAAQ+M,SAAS2D,OAAM,CACpBC,KAAK,aACLlI,QAAS1I,EAAMuP,GAAGjC,MAAM6B,aACxBvP,MAAO0Q,IACf,gBAACrQ,EAAQ+M,SAAS2D,OAAM,CACpBC,KAAK,YACLlI,QAASF,GAAK6H,EAAMlI,QAAQ0I,OAAOrI,GACnC5I,MAAO0Q,IACX,uBAAKhK,UAAWkC,GAAKA,EAAEwB,mBACnB,gBAAC/J,EAAQgN,eAAe6D,aAAY,CAChCC,OAAQvI,IAEJxJ,SAASgS,cAAcC,OACvBvD,OAAOC,IAAIO,YAAY,CAACL,OAAQ7N,EAAMuP,GAAGpB,cACzCnO,EAAMuP,GAAGhC,wBACTvN,EAAMuP,GAAGjC,MAAM7H,SAAS,CAAC,EAAE,EAE/ByL,OAAQ1I,GAAK6H,EAAMlI,QAAQgJ,QAC3B1N,IAAK4M,EACLe,eAAe,GACf,gBAAC9B,EAAW,CAACC,GAAIvP,EAAMuP,QAzBP,IA2Bf,EACXa,EAAWlP,UAAY,CAACqO,GAAI,UAAUY,WAAW9C,GAAejM,YAErD,EAAAiQ,WAAwBrR,IACjC,MAAMsN,EAAuChN,EAAMmO,OAAO,CAACzO,MAAOA,IAClEqN,EAAckB,gBAAgBjB,EAAMnF,SAEpC,MAAM,MAAE9D,EAAK,SAAEoB,GAAa6H,EAAMnF,QAElC7H,EAAMgR,WAAU,KAEZtS,SAASgS,cAAcC,OACvB3D,EAAMnF,QAAQoJ,KAAO,IAAIlE,EAAcC,EAAMnF,SAC7CqJ,UAAUC,aAAaC,mBAAmBvL,MAAKwL,GAAQlM,EACnD,CAACuJ,QAAS2C,EAAKC,QACX,EAAEC,UAAmB,eAATA,IAAuBC,KAAIC,GAAKA,EAAE3D,cAAY,GACnE,IAEH,MAAM,KAAEmD,GAASjE,EAAMnF,QAEvB,OAAQ9D,EAAM2K,QAAQpQ,OAAgB,gCAClC,uBAAKgB,MAAO,CAACoS,SAAU,aAAc3N,EAAM0K,SAC3C,gBAAC,UAAM,CACHkD,OAAO,EACPC,2BAA2B,EAC3BpE,OAAQyD,EAAK9D,SAASK,OAASyD,EAAK9D,SAASO,WAC7CC,SAAUsD,EAAK9D,SAASQ,SACxBkE,YAAaC,IACc,OAAnB/N,EAAM+J,UACN3I,EAAS,CAAC2I,SAAUgE,EAAGC,iBAAiB,GAAGzE,cAAcQ,UAAU,EAC3EkE,iBAAkBC,IACQ,OAAlBlO,EAAM0K,SAAkBtJ,EAAS,CAACsJ,QAClC,+CAA+C,EACvDtL,IAAK6J,EAAMnF,QAAQqG,UACnBgE,iBAAiB,aACjBC,iBAAkBlB,EAAKjD,sBACvBlP,MAAOmS,EAAK9D,SAASrO,MAAQmS,EAAK9D,SAASO,aAE/C,uBACIpO,MAAO,CAACoS,SAAU,WAAYU,OAAQ,OAAQC,KAAM,MAChDC,UAAW,uBACf,gBAACxC,EAAU,CAACb,GAAIgC,MArBO,IAuB5B,EAIP,EAAAF,WAAA,UAAuB,CACnBvD,OAAQ,UAAU+E,OAAOzR,WACzBhC,MAAO,UAAUyT,OAAOzR,WACxBwN,YAAa,UAAUkE,KAAK1R,W","sources":["webpack://lino_react/./lino_react/react/components/LinoComponentUtils.jsx","webpack://lino_react/./lino_react/react/components/i18n.js","webpack://lino_react/./lino_react/react/components/LinoWebCam.tsx"],"sourcesContent":["export const name = \"LinoComponentUtils\";\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { RegisterImportPool, getExReady, Component, DataContextType } from \"./Base\";\n\nimport * as constants from \"./constants\";\n\n\nlet ex; const exModulePromises = ex = {\n    classNames: import(/* webpackChunkName: \"classNames_LinoComponentUtils\" */\"classnames\"),\n    queryString: import(/* webpackChunkName: \"queryString_LinoComponentUtils\" */\"query-string\"),\n    prDropdown: import(/* webpackChunkName: \"prDropdown_LinoComponentUtils\" */\"primereact/dropdown\"),\n    prInputText: import(/* webpackChunkName: \"prInputText_LinoComponentUtils\" */\"primereact/inputtext\"),\n};RegisterImportPool(ex);\n\n\nexport function maintainTableWidth(elem, count) {\n    let ctx;\n    if (elem !== undefined) ctx = elem\n    else ctx = this;\n    let keys = Object.keys(ctx.flexs),\n        fo_conditional = count !== undefined ? keys.length === count : keys.length > 1;\n    if (fo_conditional) {\n        keys.forEach(key => {\n            var tbl = document.getElementById(key)\n                .getElementsByClassName('p-datatable');\n            if (tbl.length === 1) {\n                tbl = tbl[0]\n                let width = tbl.getBoundingClientRect().width / document\n                    .getElementsByClassName('layout-topbar')[0]\n                    .getBoundingClientRect().width;\n                if (width > ctx.flexs[key]) {\n                    Array.from(tbl.querySelectorAll(\n                        '.p-datatable table')).forEach(el => {\n                            if (Array.from(el.classList).join(' ')\n                                .includes('p-datatable')) el.style\n                                    .setProperty('table-layout', 'auto');\n                        });\n                }\n            }\n        });\n    }\n}\n\nexport const Labeled = (props) => {\n    const localEx = getExReady(ex, ['classNames']);\n    let label = props.label || props.elem.label;\n    return !localEx.ready ? null : <React.Fragment>\n        {!props.hide_label && label && <React.Fragment>\n            <label\n                className={localEx.classNames.default(\n                    \"l-label\", \"l-span-clickable\",\n                    {\"l-label--unfilled\": !props.isFilled},\n                )}\n                title={\n                    Object.assign({}, props.elem.value || {}).quicktip\n                    || props.elem.help_text}>{label}:</label>\n            <br/>\n        </React.Fragment>}\n        {props.children}\n    </React.Fragment>\n}\n\n\nLabeled.propTypes = {\n    label: PropTypes.string,\n    elem: PropTypes.object.isRequired,\n    hide_label: PropTypes.bool,\n    isFilled: PropTypes.bool,\n    children: PropTypes.element.isRequired,\n}\nLabeled.defaultProps = {\n    hide_label: false,\n    isFilled: false,\n}\n\n\nexport class ABCComponent {\n    static getValueByName({name, props, context}) {\n        if (props[constants.URL_PARAM_WINDOW_TYPE] === constants.WINDOW_TYPE_PARAMS)\n            return context.param_values[name];\n        return props[constants.URL_PARAM_WINDOW_TYPE] === constants.WINDOW_TYPE_TABLE\n            ? context.rows[props.column.rowIndex][name]\n            : props[constants.URL_PARAM_WINDOW_TYPE] === constants.WINDOW_TYPE_CARDS\n                ? context[name] : context.data[name];\n    }\n}\n\n\nexport class LeafComponentBase extends Component {\n    static requiredModules = [\"classNames\"];\n    static iPool = ex;\n    static contextType = DataContextType;\n    static propTypesFromLinoLayout = {\n        column: PropTypes.object,\n        editing_mode: PropTypes.bool,\n        hide_label: PropTypes.bool,\n        [constants.URL_PARAM_WINDOW_TYPE]: PropTypes.oneOf([\n            constants.WINDOW_TYPE_TABLE,\n            constants.WINDOW_TYPE_DETAIL,\n            constants.WINDOW_TYPE_CARDS,\n            constants.WINDOW_TYPE_GALLERIA,\n            constants.WINDOW_TYPE_INSERT,\n            constants.WINDOW_TYPE_PARAMS,\n            constants.WINDOW_TYPE_UNKNOWN,\n        ]),\n        tabIndex: PropTypes.number.isRequired,\n    }\n\n    static propTypes = {\n        ...LeafComponentBase.propTypesFromLinoLayout,\n        elem: PropTypes.object.isRequired,\n        urlParams: PropTypes.object.isRequired,\n    }\n\n    static defaultProps = {\n        editing_mode: false,\n        hide_label: false,\n        [constants.URL_PARAM_WINDOW_TYPE]: constants.WINDOW_TYPE_UNKNOWN,\n    }\n\n    constructor(props) {\n        super(props);\n        this.wrapperClasses = []\n        this.dataKey = props[constants.URL_PARAM_WINDOW_TYPE] === constants.WINDOW_TYPE_TABLE\n            ? props.elem.fields_index : props.elem.name;\n        this.upController = props.urlParams.controller;\n        this.c = props.urlParams.controller;\n\n        this.filled = this.filled.bind(this);\n        this.getValue = this.getValue.bind(this);\n        this.getValueByName = this.getValueByName.bind(this);\n        this.innerHTML = this.innerHTML.bind(this);\n        this.setLeafRef = this.setLeafRef.bind(this);\n    }\n\n    filled = () => (![\"\", null, undefined].includes(this.getValue()));\n\n    getValueByName(name) {\n        return ABCComponent.getValueByName({\n            name: name, props: this.props, context: this.context});\n    }\n\n    getValue() {\n        return this.getValueByName(this.dataKey);\n    }\n\n    innerHTML(dangerous, style={}) {\n        let v = this.getValue() || \"\\u00a0\";\n        if (v instanceof Object) v = JSON.stringify(v);\n        if (dangerous) {\n            return <div style={style} dangerouslySetInnerHTML={{__html: v}}/>\n        } else {\n            return <div style={style}>{v}</div>\n        }\n    }\n\n    setLeafRef({input=false, type=\"\"} = {}) {\n        if (this.props[constants.URL_PARAM_WINDOW_TYPE] === constants.WINDOW_TYPE_DETAIL)\n            this.upController.dataContext.setLeafRef({\n                name: type === 'slave' ? this.actorID\n                    : this.props.elem.name, ref: this, input: input, type: type});\n    }\n}\n\n\nexport class LeafComponentDelayedValue extends LeafComponentBase {\n    static requiredModules = [\"queryString\"].concat(LeafComponentBase.requiredModules);\n    static propTypes = {\n        ...LeafComponentBase.propTypes,\n        hasOwnContext: PropTypes.bool.isRequired\n    }\n    static defaultProps = {\n        ...LeafComponentBase.defaultProps,\n        hasOwnContext: false\n    }\n    constructor(props) {\n        super(props);\n        const masterRelate = {}\n        if (!props.hasOwnContext) Object.assign(masterRelate,\n            this.upController.actionHandler.masterRelateForSlave());\n        this.state = {\n            ...this.state, value: null, data_url: null, ...masterRelate}\n        this.actorID = props.elem.actor_id || (props.elem.name.includes('.')\n            ? props.elem.name : `${props.urlParams.packId}.${props.elem.name}`);\n\n        this.shouldComponentUpdate = this.shouldComponentUpdate.bind(this);\n        this.getData = this.getData.bind(this);\n        this.getValue = this.getValue.bind(this);\n        this.update = this.update.bind(this);\n    }\n\n    async prepare() {\n        await super.prepare();\n        let val = super.getValue();\n        if (!this.upController.filled(val)) return;\n        this.delayed = val.hasOwnProperty('delayed_value_url');\n    }\n\n    onReady() {\n        let val = super.getValue();\n        if (this.delayed) {\n            if (!this.props.hasOwnContext) this.setLeafRef({type: \"slave\"});\n            this.getData(val.delayed_value_url);\n            this.upController.globals.panels[this.actorID] = this;\n        } else {\n            this.setState({value: val});\n        }\n    }\n\n    shouldComponentUpdate(nextProps, nextState, context) {\n        if (!this.delayed) return this.state.value !== nextState.value;\n        return this.state.value !== nextState.value || (this.state.value !== null &&\n            super.getValue().delayed_value_url !== this.state.data_url);\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if (this.delayed) {\n            if (this.state.data_url !== super.getValue().delayed_value_url) {\n                this.setState({value: null});\n                this.update();\n            }\n        } else this.setState({value: super.getValue()});\n    }\n\n    componentWillUnmount() {\n        delete this.upController.globals.panels[this.actorID];\n    }\n\n    getValue() {\n        return this.state.value;\n    }\n\n    getData(data_url) {\n        this.upController.actionHandler.silentFetch({\n            path: `${data_url}?${this.ex.queryString.default.stringify(this.upController.actionHandler.defaultStaticParams())}`\n        }).then((data) => {\n            this.setState({value: data.data, data_url: data_url});\n        });\n    }\n\n    liveUpdate = (params) => {\n        if (params.mk === null ||\n            (params.mk === this.state.mk && params.mt === this.state.mt)\n        ) this.update();\n    }\n\n    update() {\n        this.getData(super.getValue().delayed_value_url);\n    }\n}\n\n\nexport class LeafComponentInput extends LeafComponentBase {\n    static requiredModules = [\"prInputText\"].concat(LeafComponentBase.requiredModules);\n    constructor(props) {\n        super(props);\n        this.styleClasses = [\n            \"disabled-input\",\n            \"l-card\",\n            \"unsaved-modification\",\n        ]\n\n        this.disabled = this.disabled.bind(this);\n        this.filled = this.filled.bind(this);\n        this.focus = this.focus.bind(this);\n        this.getCellStyleClasses = this.getCellStyleClasses.bind(this);\n        this.getInput = this.getInput.bind(this);\n        this.onChangeUpdate = this.onChangeUpdate.bind(this);\n        this.onInputRef = this.onInputRef.bind(this);\n        this.onRef = this.onRef.bind(this);\n        this.setCellStyle = this.setCellStyle.bind(this);\n        this.submit = this.submit.bind(this);\n        this.tabIndexMatch = this.tabIndexMatch.bind(this);\n        this.update = this.update.bind(this);\n    }\n\n    async prepare() {\n        this.inputState = {\n            inputComponent: this.ex.prInputText.InputText,\n            inputOnly: false,\n            inputProps: {},\n            onChangeUpdateAssert: (event) => (true),\n            postOnChange: (event) => (null),\n        }\n    }\n\n    disabled() {\n        if (this.props[constants.URL_PARAM_WINDOW_TYPE] === constants.WINDOW_TYPE_CARDS)\n            return true;\n        if (this.props[constants.URL_PARAM_WINDOW_TYPE] === constants.WINDOW_TYPE_PARAMS)\n            return false;\n        if (!this.props.elem.editable) return true;\n        if (this.props[constants.URL_PARAM_WINDOW_TYPE] === constants.WINDOW_TYPE_TABLE) {\n            let row = this.context.rows[this.props.column.rowIndex],\n                last_item = row[row.length - 1];\n\n            // No meta, assume not disabled;\n            if (!last_item || !last_item.meta) return false;\n            // disable_editing set to true;\n            if (row[row.length - 2]) return true;\n            // check name in the disabled_fields meta;\n            return row[row.length - 3][this.props.elem.name] || false;\n        } else {\n            if (this.context.data.disable_editing) return true;\n            return this.context.data.disabled_fields[this.props.elem.name] || false;\n        }\n    }\n\n    focus() {\n        let ref = this.inputEl;\n        if (ref.focus) ref.focus()\n        else if (ref.focusInput) ref.focusInput.focus()\n        else if (ref.inputRef) ref.inputRef.current.focus()\n    }\n\n    getCellStyleClasses() {\n        let styleClasses = [];\n        if (this.props[constants.URL_PARAM_WINDOW_TYPE] === constants.WINDOW_TYPE_TABLE) {\n            if (this.context.modifiedRows[this.props.column.rowIndex].includes(\n                this.props.elem.fields_index\n            )) {\n                styleClasses.push(\"unsaved-modification\");\n            }\n        } else {\n            styleClasses.push('l-card');\n            if (this.props[constants.URL_PARAM_WINDOW_TYPE] !== constants.WINDOW_TYPE_CARDS) {\n                if (this.disabled()) styleClasses.push(\"disabled-input\")\n                else if (this.context.modified.includes(this.props.elem.name))\n                    styleClasses.push(\"unsaved-modification\");\n            }\n        }\n        return styleClasses;\n    }\n\n    getInput() {\n        return <this.inputState.inputComponent\n            // autoFocus={this.props[constants.URL_PARAM_WINDOW_TYPE] === constants.WINDOW_TYPE_TABLE ? true : undefined}\n            onChange={(e) => {\n                if (!this.inputState.onChangeUpdateAssert(e)) return;\n                this.onChangeUpdate(e);\n                this.inputState.postOnChange(e);\n            }}\n            ref={this.onInputRef}\n            style={{width: \"100%\"}}\n            tabIndex={this.props.tabIndex}\n            value={this.getValue() || \"\"}\n            {...this.inputState.inputProps}/>;\n    }\n\n    onChangeUpdate(e) {\n        this.update({[this.dataKey]: e.target.value});\n        this.setState({});\n    }\n\n    onInputRef(ref) {\n        this.inputEl = ref;\n        if (ref && this.tabIndexMatch()) this.focus();\n    }\n\n    onKeyDown = (event) => null;\n\n    onRef(ref) {\n        const onClick = () => {\n            this.container.onclick = (event) => {\n                if (!this.disabled()) {\n                    Object.assign(this.upController.globals, {\n                        currentInputRowIndex: Object.assign({rowIndex: 0}, this.props.column).rowIndex,\n                        currentInputTabIndex: this.props.tabIndex,\n                        currentInputWindowType: this.props[constants.URL_PARAM_WINDOW_TYPE],\n                        currentInputAHRefName: this.upController.actionHandler.refName,\n                    });\n                    if (this.props[constants.URL_PARAM_WINDOW_TYPE] === constants.WINDOW_TYPE_DETAIL\n                        && !this.props.editing_mode\n                    ) this.upController.history.replaceState({editing_mode: true});\n                }\n            }\n        }\n        if (ref) {\n            this.container = ref;\n            if (this.props[constants.URL_PARAM_WINDOW_TYPE] === constants.WINDOW_TYPE_TABLE) {\n                this.container = ref.closest(\"td\");\n                onClick();\n            }\n            else if (\n                this.props[constants.URL_PARAM_WINDOW_TYPE] === constants.WINDOW_TYPE_DETAIL\n            ) onClick();\n        }\n        this.setCellStyle(this.container);\n    }\n\n    setCellStyle(ref) {\n        if (ref) {\n            let classes = this.getCellStyleClasses();\n            this.styleClasses.forEach(item => {ref.classList.remove(item)});\n            classes.forEach(item => {ref.classList.add(item)});\n        }\n    }\n\n    submit() {\n        this.upController.actionHandler.submit({\n            cellInfo: {rowIndex: this.props.column.rowIndex}});\n    }\n\n    tabIndexMatch() {\n        if (\n            this.props[constants.URL_PARAM_WINDOW_TYPE] === constants.WINDOW_TYPE_TABLE &&\n            this.props.column.rowIndex !== this.upController.globals.currentInputRowIndex\n        ) return false;\n        if (\n            this.props[constants.URL_PARAM_WINDOW_TYPE] === this.upController.globals.currentInputWindowType &&\n            this.upController.actionHandler.refName === this.upController.globals.currentInputAHRefName &&\n            this.props.tabIndex === this.upController.globals.currentInputTabIndex\n        ) return true;\n        return false;\n    }\n\n    update(values) {\n        this.upController.actionHandler.update({\n            values: values, elem: this.props.elem, col: this.props.column,\n            windowType: this.props[constants.URL_PARAM_WINDOW_TYPE]});\n    }\n\n    render(hide_label=this.props.hide_label) {\n        if (!this.state.ready) return null;\n        if (this.container) this.setCellStyle(this.container);\n        return <Labeled {...this.props}\n            hide_label={hide_label || this.props.hide_label}\n            elem={this.props.elem} isFilled={this.filled()}>\n            <div\n                className={this.ex.classNames.default(this.wrapperClasses)}\n                onKeyDown={this.onKeyDown}\n                ref={this.onRef}>\n                    {this.inputState.inputOnly ? this.getInput() :\n                        this.props.editing_mode && !this.disabled() ?\n                            this.getInput() : this.innerHTML()}\n            </div>\n        </Labeled>\n    }\n}\n\n\nexport class LeafComponentInputChoices extends LeafComponentInput {\n    static requiredModules = [\"prDropdown\"].concat(LeafComponentInput.requiredModules);\n    constructor(props) {\n        super(props);\n        this.wrapperClasses.push(\"l-ChoiceListFieldElement\");\n        this.state = {\n            ...this.state,\n            hidden_value: null\n        }\n\n        this.dataKeyHidden = props[constants.URL_PARAM_WINDOW_TYPE] === constants.WINDOW_TYPE_TABLE\n            ? props.elem.fields_index_hidden\n            : props.elem.name + \"Hidden\";\n\n        this.getInput = this.getInput.bind(this);\n        this.getValue = this.getValue.bind(this);\n        this.innerHTML = this.innerHTML.bind(this);\n    }\n\n    onKeyDown = (e) => {\n        if (e.key === \"Enter\" && this.inputEl.getOverlay()) e.stopPropagation();\n    }\n\n    getValue() {\n        return {\n            text: super.getValue(),\n            value: this.getValueByName(this.dataKeyHidden)};\n    }\n\n    getInput() {\n        return <this.ex.prDropdown.Dropdown\n            onChange={(e) => {\n                if (e.originalEvent.ctrlKey || e.originalEvent.altKey) return;\n                this.update({[this.dataKey]: e.value,\n                    [this.dataKeyHidden]: e.value});\n                    this.setState({});\n            }}\n            optionLabel=\"text\"\n            options={this.options}\n            ref={this.onInputRef}\n            showClear={this.props.elem.field_options.allowBlank}\n            style={{width: \"100%\"}}\n            tabIndex={this.props.tabIndex}\n            value={this.getValue().value}/>\n    }\n\n    innerHTML() {\n        let v = super.getValue() || \"\\u00a0\";\n        return <div style={{whiteSpace: \"nowrap\"}}>{v}</div>\n    }\n}\n","import { URL_PARAM_USER_LANGUAGE, PARAM_TYPE_WINDOW } from './constants';\nimport i18n from \"i18next\";\nimport LanguageDetector from \"i18next-browser-languagedetector\";\nimport HttpApi from \"i18next-http-backend\";\nimport { initReactI18next } from \"react-i18next\";\n\n\nexport const TransInit = (context, next) => {\n    const detector = new LanguageDetector();\n    detector.addDetector({\n        name: \"LinoLanguageDetector\",\n        lookup: (options) => context.value[URL_PARAM_USER_LANGUAGE],\n        cacheUserLanguage(lng, options) {\n            context.fillPlaceHolder(PARAM_TYPE_WINDOW, URL_PARAM_USER_LANGUAGE, lng);\n            context.history.replaceByType({[URL_PARAM_USER_LANGUAGE]: lng},\n                PARAM_TYPE_WINDOW, false, true);\n        }\n    });\n\n    i18n\n    .use(HttpApi)\n    .use(detector)\n    .use(initReactI18next)\n    .init({\n        debug: false,\n        load: \"languageOnly\",\n        fallbackLng: \"en\",\n        keySeparator: false,\n        interpolation: {\n          escapeValue: false // react already safes from xss\n        },\n        react: {\n            wait: true\n        },\n        backend: {\n            loadPath: \"/static/react/locales/{{lng}}/{{ns}}.json\",\n            // addPath: \"/static/react/locales/{{lng}}/{{ns}}.json\"\n        },\n        detection: {\n            order: [\"queryString\", \"cookie\", \"LinoLanguageDetector\", \"localStorage\"],\n            lookupQuerystring: URL_PARAM_USER_LANGUAGE,\n            lookupCookie: URL_PARAM_USER_LANGUAGE,\n            lookupLocalStorage: URL_PARAM_USER_LANGUAGE,\n            // lookupSessionStorage: URL_PARAM_USER_LANGUAGE\n            caches: [\"LinoLanguageDetector\", \"localStorage\", \"cookie\"],\n        }\n    });\n\n    next(i18n);\n}\n\n\nexport default i18n;\n","// LinoWebCam.tsx\n/** @module LinoWebCam */\n\nexport const name: string = \"LinoWebCam\";\n\n// @ts-ignore\nimport * as React from 'react';\n// @ts-ignore\nimport PropTypes from 'prop-types';\nimport * as t from './types';\nimport { RegisterImportPool, getExReady, URLContextType } from \"./Base\";\n\n// @ts-ignore\nimport Webcam from \"react-webcam\";\n\nlet ex; const exModulePromises = ex = {\n    // @ts-ignore\n    prButton: import(/* webpackChunkName: \"prButton_LinoWebCam\" */\"primereact/button\"),\n    // @ts-ignore\n    prOverlayPanel: import(/* webpackChunkName: \"prOverlayPanel_LinoWebCam\" */\"primereact/overlaypanel\"),\n    // @ts-ignore\n    prInputNumber: import(/* webpackChunkName: \"prInputNumber_LinoWebCam\" */\"primereact/inputnumber\"),\n    // @ts-ignore\n    prInputSwitch: import(/* webpackChunkName: \"prInputSwitch_LinoWebCam\" */\"primereact/inputswitch\"),\n    // @ts-ignore\n    lcu: import(/* webpackChunkName: \"LinoComponentUtils_LinoWebCam\" */\"./LinoComponentUtils\"),\n    // @ts-ignore\n    i18n: import(/* webpackChunkName: \"i18n_LinoWebCam\" */\"./i18n\"),\n};RegisterImportPool(ex);\n\ntype WebcamState = {\n    err_msg?: null | string;\n    deviceId?: null | string;\n    devices?: string[];\n}\n\ntype WCReferences = {\n    capture?: React.MouseEventHandler<HTMLElement>;\n    props?: LinoWebCamProps;\n    self?: CamController;\n    setState?: Function;\n    state?: WebcamState;\n    switchCamera?: React.MouseEventHandler<HTMLElement>;\n    webcamRef?: React.RefObject<Webcam>;\n}\n\ninterface CamController {\n    buildMediaConstraints(): MediaTrackConstraints;\n    mediaTrackConstraints: MediaTrackConstraints;\n    store: WCReferences;\n    settings: t.WebcamSettings;\n    settingsMod: t.WebcamSettings;\n}\n\nclass CamController implements CamController {\n    static buildReferences = (store: WCReferences): WCReferences => {\n        store.webcamRef = React.useRef(null);\n        store.capture = React.useCallback(\n            (event) => {\n                store.props.captureDone(store.webcamRef.current.getScreenshot());\n            },\n        [store.webcamRef]);\n\n        const [state, setState] = React.useState<WebcamState>({\n            err_msg: null, deviceId: null, devices: []});\n\n        store.state = state;\n        store.setState = React.useCallback((st: WebcamState) =>\n            setState((old: WebcamState) => Object.assign({}, old, st)), []);\n\n        store.switchCamera = React.useCallback(\n            event => {\n                let i = (state.devices.indexOf(state.deviceId) + 1) % state.devices.length;\n                store.setState({deviceId: state.devices[i]});\n            },\n        []);\n        return store;\n    }\n\n    constructor(store: WCReferences) {\n        this.store = store;\n        this.buildMediaConstraints();\n    }\n\n    buildMediaConstraints(): MediaTrackConstraints {\n        const constraints: MediaTrackConstraints = {};\n        this.settings = window.App.getSettings().webcam;\n        if (this.settings !== undefined) {\n            constraints.height = this.settings.height;\n            constraints.width = this.settings.width;\n        } else {\n            constraints.height = this.store.props.height * devicePixelRatio;\n            constraints.width = this.store.props.width * devicePixelRatio;\n            this.settings = Object.assign({}, constraints as t.WebcamSettings, {pixelRatio: devicePixelRatio, mirrored: true});\n            window.App.setSettings({webcam: this.settings});\n        }\n        this.settingsMod = {...this.settings};\n        if (this.store.state.deviceId) constraints.deviceId = this.store.state.deviceId\n        else constraints.facingMode = \"environment\";\n        this.mediaTrackConstraints = constraints;\n        return constraints;\n    }\n}\n\ntype LinoWebCamProps = {\n    captureDone: (data: string) => void;\n    height: number;\n    width: number;\n}\n\ntype CamSettingsProps = {CC: CamController};\n\nconst CamSettings: React.FC<CamSettingsProps> = (props) => {\n    const {settings, settingsMod} = props.CC;\n    const [mirrored, setMirrored] = React.useState<boolean>(settings.mirrored);\n    const localEx = getExReady(ex, [\"prInputNumber\", \"prInputSwitch\", \"lcu\", \"i18n\"]);\n    const getInput = React.useCallback(\n        ({label, max = null, min, onValueChange, suffix, value}) => (<div>\n            <localEx.lcu.Labeled elem={{label: label}}>\n                <localEx.prInputNumber.InputNumber buttonLayout=\"horizontal\"\n                    max={max} min={min} onValueChange={onValueChange}\n                    showButtons={true} suffix={suffix} value={value}/>\n            </localEx.lcu.Labeled></div>), [localEx]);\n    return !localEx.ready ? null : <>\n        {// TODO: interpolation translate\n            getInput({label: 'Height (# > 512)', max: props.CC.store.props.height,\n            min: 512, onValueChange: (e) => Object.assign(settingsMod,\n                {height: e.value * settingsMod.pixelRatio}),\n            suffix: 'px', value: settings.height / settings.pixelRatio})}\n        <br/>\n        {getInput({label: 'Width (# > 512)', max: props.CC.store.props.width,\n            min: 512, onValueChange: (e) => Object.assign(settingsMod,\n                {width: e.value * settingsMod.pixelRatio}),\n            suffix: 'px', value: settings.width / settings.pixelRatio})}\n        <br/>\n        {getInput({label: 'Pixel ratio (# > 1)', min: 1, onValueChange: (e) => {\n                Object.assign(settingsMod, {\n                    height: (settingsMod.height / settingsMod.pixelRatio) * e.value,\n                    width: (settingsMod.width / settingsMod.pixelRatio) * e.value,\n                    pixelRatio: e.value});\n            }, suffix: 'dpr', value: settings.pixelRatio})}\n        <br/>\n        <div>\n            <localEx.lcu.Labeled elem={{label: localEx.i18n.t(\"Mirrored\")}}>\n                <localEx.prInputSwitch.InputSwitch\n                    checked={mirrored}\n                    onChange={e => {\n                        setMirrored(e.value);\n                        Object.assign(settingsMod, {mirrored: e.value});\n                    }}/>\n            </localEx.lcu.Labeled>\n        </div>\n    </>\n};CamSettings.propTypes = {CC: PropTypes.instanceOf(CamController).isRequired};\n\ntype CamActionsProps = {CC: CamController};\n\nconst CamActions: React.FC<CamActionsProps> = (props) => {\n    const opRef = React.useRef(null);\n    const buttonStyle = {background: \"white\", color: \"black\",\n        borderRadius: \"50%\", width: \"5ch\", height: \"5ch\", margin: \"5px\"};\n    const localEx = getExReady(ex, [\"prButton\", \"prOverlayPanel\"]);\n    return !localEx.ready ? null : <><localEx.prButton.Button\n        icon=\"pi pi-camera\"\n        onClick={props.CC.store.capture}\n        style={buttonStyle}/>\n    {props.CC.store.state.devices.length > 1 &&\n        <localEx.prButton.Button\n            icon=\"pi pi-undo\"\n            onClick={props.CC.store.switchCamera}\n            style={buttonStyle}/>}\n    <localEx.prButton.Button\n        icon=\"pi pi-cog\"\n        onClick={e => opRef.current.toggle(e)}\n        style={buttonStyle}/>\n    <div onKeyDown={e => e.stopPropagation()}>\n        <localEx.prOverlayPanel.OverlayPanel\n            onHide={e => {\n                // @ts-ignore\n                document.activeElement.blur();\n                window.App.setSettings({webcam: props.CC.settingsMod});\n                props.CC.buildMediaConstraints();\n                props.CC.store.setState({});\n            }}\n            onShow={e => opRef.current.align()}\n            ref={opRef}\n            showCloseIcon={true}>\n            <CamSettings CC={props.CC}/>\n        </localEx.prOverlayPanel.OverlayPanel>\n    </div></>\n};CamActions.propTypes = {CC: PropTypes.instanceOf(CamController).isRequired};\n\nexport const LinoWebCam: React.FC = (props: LinoWebCamProps) => {\n    const store: React.RefObject<WCReferences> = React.useRef({props: props});\n    CamController.buildReferences(store.current);\n\n    const { state, setState } = store.current;\n\n    React.useEffect(() => {\n        // @ts-ignore\n        document.activeElement.blur();\n        store.current.self = new CamController(store.current);\n        navigator.mediaDevices.enumerateDevices().then(devs => setState(\n            {devices: devs.filter(\n                ({kind}) => kind === \"videoinput\").map(d => d.deviceId)}));\n    }, []);\n\n    const { self } = store.current;\n\n    return !state.devices.length ? null : <>\n        <div style={{position: 'absolute'}}>{state.err_msg}</div>\n        <Webcam\n            audio={false}\n            forceScreenshotSourceSize={true}\n            height={self.settings.height / self.settings.pixelRatio}\n            mirrored={self.settings.mirrored}\n            onUserMedia={uM => {\n                if (state.deviceId === null)\n                    setState({deviceId: uM.getVideoTracks()[0].getSettings().deviceId})}}\n            onUserMediaError={exempt => {\n                if (state.err_msg === null) setState({err_msg:\n                    \"Please allow camera access to take a photo.\"})}}\n            ref={store.current.webcamRef}\n            screenshotFormat=\"image/jpeg\"\n            videoConstraints={self.mediaTrackConstraints}\n            width={self.settings.width / self.settings.pixelRatio}\n            />\n        <div\n            style={{position: \"absolute\", bottom: \"40px\", left: \"50%\",\n                transform: \"translate(-50%, 0)\"}}>\n            <CamActions CC={self}/>\n        </div>\n    </>\n}\n\n\nLinoWebCam.propTypes = {\n    height: PropTypes.number.isRequired,\n    width: PropTypes.number.isRequired,\n    captureDone: PropTypes.func.isRequired,\n}\n"],"names":["name","ex","classNames","queryString","prDropdown","prInputText","maintainTableWidth","elem","count","ctx","undefined","this","keys","Object","flexs","length","forEach","key","tbl","document","getElementById","getElementsByClassName","getBoundingClientRect","width","Array","from","querySelectorAll","el","classList","join","includes","style","setProperty","RegisterImportPool","Labeled","props","localEx","getExReady","label","ready","_jsxs","React","children","hide_label","className","default","isFilled","title","assign","value","quicktip","help_text","_jsx","propTypes","PropTypes","isRequired","defaultProps","ABCComponent","getValueByName","context","constants","param_values","rows","column","rowIndex","data","LeafComponentBase","Component","constructor","super","filled","getValue","wrapperClasses","dataKey","fields_index","upController","urlParams","controller","c","bind","innerHTML","setLeafRef","dangerous","v","JSON","stringify","dangerouslySetInnerHTML","__html","input","type","dataContext","actorID","ref","requiredModules","iPool","contextType","DataContextType","propTypesFromLinoLayout","editing_mode","tabIndex","LeafComponentDelayedValue","liveUpdate","params","mk","state","mt","update","masterRelate","hasOwnContext","actionHandler","masterRelateForSlave","data_url","actor_id","packId","shouldComponentUpdate","getData","prepare","val","delayed","hasOwnProperty","onReady","delayed_value_url","globals","panels","setState","nextProps","nextState","componentDidUpdate","prevProps","prevState","componentWillUnmount","silentFetch","path","defaultStaticParams","then","concat","LeafComponentInput","onKeyDown","event","styleClasses","disabled","focus","getCellStyleClasses","getInput","onChangeUpdate","onInputRef","onRef","setCellStyle","submit","tabIndexMatch","inputState","inputComponent","InputText","inputOnly","inputProps","onChangeUpdateAssert","postOnChange","editable","row","last_item","meta","disable_editing","disabled_fields","inputEl","focusInput","inputRef","current","modifiedRows","push","modified","onChange","e","target","onClick","container","onclick","currentInputRowIndex","currentInputTabIndex","currentInputWindowType","currentInputAHRefName","refName","history","replaceState","closest","classes","item","remove","add","cellInfo","values","col","windowType","render","LeafComponentInputChoices","getOverlay","stopPropagation","hidden_value","dataKeyHidden","fields_index_hidden","text","Dropdown","originalEvent","ctrlKey","altKey","optionLabel","options","showClear","field_options","allowBlank","whiteSpace","TransInit","next","detector","LanguageDetector","addDetector","lookup","URL_PARAM_USER_LANGUAGE","cacheUserLanguage","lng","fillPlaceHolder","PARAM_TYPE_WINDOW","replaceByType","i18n","HttpApi","use","initReactI18next","init","debug","load","fallbackLng","keySeparator","interpolation","escapeValue","react","wait","backend","loadPath","detection","order","lookupQuerystring","lookupCookie","lookupLocalStorage","caches","prButton","prOverlayPanel","prInputNumber","prInputSwitch","lcu","CamController","store","buildMediaConstraints","constraints","settings","window","App","getSettings","webcam","height","devicePixelRatio","pixelRatio","mirrored","setSettings","settingsMod","deviceId","facingMode","mediaTrackConstraints","buildReferences","webcamRef","useRef","capture","useCallback","captureDone","getScreenshot","useState","err_msg","devices","st","old","switchCamera","i","indexOf","CamSettings","CC","setMirrored","max","min","onValueChange","suffix","InputNumber","buttonLayout","showButtons","t","InputSwitch","checked","instanceOf","CamActions","opRef","buttonStyle","background","color","borderRadius","margin","Button","icon","toggle","OverlayPanel","onHide","activeElement","blur","onShow","align","showCloseIcon","LinoWebCam","useEffect","self","navigator","mediaDevices","enumerateDevices","devs","filter","kind","map","d","position","audio","forceScreenshotSourceSize","onUserMedia","uM","getVideoTracks","onUserMediaError","exempt","screenshotFormat","videoConstraints","bottom","left","transform","number","func"],"sourceRoot":""}