"use strict";(self["webpackChunksortinghat_ui"]=self["webpackChunksortinghat_ui"]||[]).push([[193],{52790:(e,n,t)=>{t.d(n,{A:()=>h});var i=t(20641),r=t(90033),a=t(13892),o=t(4189),l=t(30697),u=t(93745),d=t(41720),c=t(79669),s=t(88249),f=t(43948),m={key:0},p={key:1,class:"font-italic"};function k(e,n,t,k,v,g){var b=(0,i.g2)("v-confirm-edit");return(0,i.uX)(),(0,i.Wv)(s.q,{modelValue:e.menu,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.menu=n}),"close-on-content-click":!1},{activator:(0,i.k6)((function(n){var o=n.props;return["text"===t.activator?((0,i.uX)(),(0,i.CE)("button",(0,i.v6)({key:0,class:"hide-icon"},o),[t.modelValue?((0,i.uX)(),(0,i.CE)("span",m,[(0,i.RG)(e.$slots,"value",(0,r._B)((0,i.Ng)(o)),(function(){return[(0,i.eW)((0,r.v_)(t.modelValue),1)]}),!0)])):((0,i.uX)(),(0,i.CE)("span",p,(0,r.v_)(t.emptyValue),1)),(0,i.bF)(c.w,{class:"icon--hidden ml-2","aria-label":t.label,size:"x-small"},{default:(0,i.k6)((function(){return[(0,i.eW)(" mdi-lead-pencil ")]})),_:1},8,["aria-label"])],16)):((0,i.uX)(),(0,i.Wv)(a.D,(0,r._B)((0,i.v6)({key:1},o)),{default:(0,i.k6)((function(){return[(0,i.bF)(c.w,{start:""},{default:(0,i.k6)((function(){return[(0,i.eW)("mdi-plus")]})),_:1}),(0,i.eW)(" Add ")]})),_:2},1040))]})),default:(0,i.k6)((function(){return[(0,i.bF)(o.J,{"min-width":"250"},{default:(0,i.k6)((function(){return[(0,i.bF)(b,{"model-value":t.modelValue,"ok-text":"Save",onCancel:n[0]||(n[0]=function(n){return e.menu=!1}),onSave:n[1]||(n[1]=function(e){return g.save(e)})},{default:(0,i.k6)((function(n){var r=n.model,a=n.actions;return[(0,i.bF)(l.O,null,{default:(0,i.k6)((function(){return[(0,i.RG)(e.$slots,"input",{model:r},(function(){return[(0,i.bF)(f.W,{modelValue:r.value,"onUpdate:modelValue":function(e){return r.value=e},label:t.label,color:"primary",density:"compact","hide-details":"","single-line":""},null,8,["modelValue","onUpdate:modelValue","label"])]}),!0)]})),_:2},1024),(0,i.bF)(u.S,null,{default:(0,i.k6)((function(){return[(0,i.bF)(d.h),((0,i.uX)(),(0,i.Wv)((0,i.$y)(a),{color:"primary"}))]})),_:2},1024)]})),_:3},8,["model-value"])]})),_:3})]})),_:3},8,["modelValue"])}const v={name:"EditDialog",props:{modelValue:{type:[String,Object],required:!1},label:{type:String,required:!0},activator:{type:String,required:!1,default:"text"},emptyValue:{type:String,required:!1}},data:function(){return{menu:!1}},methods:{save:function(e){this.$emit("save",e),this.menu=!1}}};var g=t(64621);const b=(0,g.A)(v,[["render",k],["__scopeId","data-v-3daedc2c"]]),h=b},83102:(e,n,t)=>{t.d(n,{A:()=>f});var i=t(20641),r=t(90033),a=t(26106),o={class:"d-flex flex-column justify-center align-center pa-4 h-100"},l={key:0,class:"subtitle-1 text-medium-emphasis mt-4"};function u(e,n,t,u,d,c){return(0,i.uX)(),(0,i.CE)("div",o,[(0,i.bF)(a.x,{size:t.size,color:"primary",indeterminate:""},null,8,["size"]),t.label?((0,i.uX)(),(0,i.CE)("p",l,(0,r.v_)(t.label),1)):(0,i.Q3)("",!0)])}t(2892);const d={name:"LoadingSpinner",props:{label:{type:String,required:!1,default:null},size:{type:[String,Number],required:!1,default:48}}};var c=t(64621);const s=(0,c.A)(d,[["render",u]]),f=s},64193:(e,n,t)=>{t.r(n),t.d(n,{default:()=>ae});t(62010),t(50778);var i=t(20641),r=t(90033),a=t(53751),o=t(31969),l=t(13892),u=t(93745),d=t(4189),c=t(91606),s=t(30697),f=t(20396),m=t(91772),p=t(7511),k=t(43813),v=t(56756),g=t(35526),b=t(41720),h=t(79669),_=t(57254),y=t(4913),F=t(97505),x=t(69915),w=t(86449),A=t(98477),M=t(88249),E=t(43948),C=t(51161),W=function(e){return(0,i.Qi)("data-v-d27b290e"),e=e(),(0,i.jt)(),e},L={key:0},$=["href","data-profile-link"],I=W((function(){return(0,i.Lk)("span",null,"Unlock",-1)})),U=W((function(){return(0,i.Lk)("span",null,"Lock",-1)})),V={key:0},X={key:0},D={key:0},O=W((function(){return(0,i.Lk)("span",null,"UUID:",-1)})),P={key:0,class:"pt-2 pb-2 text-body-2"};function S(e,n,t,W,S,z){var B=(0,i.g2)("loading-spinner"),R=(0,i.g2)("avatar"),q=(0,i.g2)("edit-dialog"),Q=(0,i.g2)("identities-list"),j=(0,i.g2)("enrollment-list"),G=(0,i.g2)("individual-card"),K=(0,i.g2)("enroll-modal"),T=(0,i.g2)("team-enroll-modal"),J=(0,i.g2)("matches-modal");return(0,i.uX)(),(0,i.Wv)(A.Y,null,{default:(0,i.k6)((function(){return[e.$apollo.loading?((0,i.uX)(),(0,i.Wv)(B,{key:0,label:"Loading"})):S.individual?((0,i.uX)(),(0,i.Wv)(k.I,{key:1,class:"mx-auto mb-8"},{default:(0,i.k6)((function(){return[(0,i.bF)(v.L,null,{default:(0,i.k6)((function(){return[(0,i.bF)(g.B,{cols:z.showRecommendations?8:12,xl:z.showRecommendations?9:12},{default:(0,i.k6)((function(){return[(0,i.bF)(v.L,{class:"section pa-3 mb-4 mt-0"},{default:(0,i.k6)((function(){return[(0,i.bF)(g.B,null,{default:(0,i.k6)((function(){return[(0,i.bF)(_.g,{class:"pl-1 my-n4 v-list-item--three-line"},{prepend:(0,i.k6)((function(){return[(0,i.bF)(R,{name:S.individual.name,email:S.individual.email},null,8,["name","email"])]})),default:(0,i.k6)((function(){return[(0,i.bF)(y.U,{class:"font-weight-medium text-h6"},{default:(0,i.k6)((function(){return[S.individual.isLocked?((0,i.uX)(),(0,i.CE)("span",L,(0,r.v_)(S.individual.name||"no name"),1)):((0,i.uX)(),(0,i.Wv)(q,{key:1,modelValue:S.individual.name,"onUpdate:modelValue":n[0]||(n[0]=function(e){return S.individual.name=e}),"empty-value":"no name",label:"Edit name",onSave:n[1]||(n[1]=function(e){return z.updateProfile({name:e})})},null,8,["modelValue"]))]})),_:1}),(0,i.bF)(F.w,{class:"mb-1"},{default:(0,i.k6)((function(){return[(0,i.eW)((0,r.v_)(S.individual.organization),1)]})),_:1}),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(S.socialProfiles,(function(e,n){return(0,i.uX)(),(0,i.CE)("p",{key:n,class:"d-flex align-center"},[(0,i.bF)(h.w,{size:"small",start:""},{default:(0,i.k6)((function(){return[(0,i.eW)((0,r.v_)(e.icon),1)]})),_:2},1024),(0,i.Lk)("a",{href:e.link,"data-profile-link":e.source,class:"link--underline font-weight-regular",target:"_blank"},(0,r.v_)(e.username),9,$)])})),128))]})),_:1})]})),_:1}),(0,i.bF)(g.B,{cols:"2",class:"d-flex justify-end align-start mr-1"},{default:(0,i.k6)((function(){return[(0,i.bF)(C.y,{location:"bottom"},{activator:(0,i.k6)((function(e){var t=e.props;return[(0,i.bF)(l.D,(0,i.v6)({disabled:S.individual.isLocked,"aria-label":S.individual.isBot?"Unmark as bot":"Mark as bot",icon:S.individual.isBot?"mdi-robot":"mdi-robot-outline"},t,{class:"mr-1",variant:"text",onClick:n[2]||(n[2]=function(e){return z.updateProfile({isBot:!S.individual.isBot})})}),null,16,["disabled","aria-label","icon"])]})),default:(0,i.k6)((function(){return[(0,i.Lk)("span",null,(0,r.v_)(S.individual.isBot?"Unmark as bot":"Mark as bot"),1)]})),_:1}),(0,i.bF)(C.y,{location:"bottom"},{activator:(0,i.k6)((function(t){var r=t.props;return[(0,i.bF)(l.D,(0,i.v6)({"aria-label":z.isInWorkspace?"In workspace":"Add to workspace",class:"mr-1",variant:"text"},r,{icon:z.isInWorkspace?"mdi-pin":"mdi-pin-outline",onClick:n[3]||(n[3]=function(n){return e.$store.dispatch("togglePin",S.mk)})}),null,16,["aria-label","icon"])]})),default:(0,i.k6)((function(){return[(0,i.Lk)("span",null,(0,r.v_)(z.isInWorkspace?"In workspace":"Add to workspace"),1)]})),_:1}),S.individual.isLocked?((0,i.uX)(),(0,i.Wv)(C.y,{key:0,location:"bottom"},{activator:(0,i.k6)((function(e){var n=e.props;return[(0,i.bF)(l.D,(0,i.v6)({"aria-label":"Unlock",class:"mr-1"},n,{icon:"mdi-lock",variant:"text",onClick:z.unlock}),null,16,["onClick"])]})),default:(0,i.k6)((function(){return[I]})),_:1})):((0,i.uX)(),(0,i.Wv)(C.y,{key:1,location:"bottom"},{activator:(0,i.k6)((function(e){var n=e.props;return[(0,i.bF)(l.D,(0,i.v6)({"aria-label":"Lock",class:"mr-1"},n,{icon:"mdi-lock-outline",variant:"text",onClick:z.lock}),null,16,["onClick"])]})),default:(0,i.k6)((function(){return[U]})),_:1})),(0,i.bF)(M.q,{location:"bottom",left:"","nudge-bottom":"38"},{activator:(0,i.k6)((function(e){var n=e.props;return[(0,i.bF)(l.D,(0,i.v6)({"aria-label":"See more actions"},n,{icon:"mdi-dots-vertical",variant:"text"}),null,16)]})),default:(0,i.k6)((function(){return[(0,i.bF)(x.x,{density:"compact"},{default:(0,i.k6)((function(){return[(0,i.bF)(_.g,{disabled:S.individual.isLocked,onClick:n[4]||(n[4]=function(e){return S.matchesModal.open=!0})},{default:(0,i.k6)((function(){return[(0,i.bF)(y.U,null,{default:(0,i.k6)((function(){return[(0,i.eW)("Find matches")]})),_:1})]})),_:1},8,["disabled"]),z.hasLinkedinProfile?((0,i.uX)(),(0,i.Wv)(_.g,{key:0,disabled:S.individual.isLocked,onClick:z.confirmRemoveIdentity},{default:(0,i.k6)((function(){return[(0,i.bF)(y.U,null,{default:(0,i.k6)((function(){return[(0,i.eW)(" Remove LinkedIn profile ")]})),_:1})]})),_:1},8,["disabled","onClick"])):((0,i.uX)(),(0,i.Wv)(_.g,{key:1,disabled:S.individual.isLocked,onClick:n[5]||(n[5]=function(e){return S.linkedinModal.open=!0})},{default:(0,i.k6)((function(){return[(0,i.bF)(y.U,null,{default:(0,i.k6)((function(){return[(0,i.eW)("Add LinkedIn profile")]})),_:1})]})),_:1},8,["disabled"])),(0,i.bF)(p.G,{inline:""}),(0,i.bF)(_.g,{disabled:S.individual.isLocked,onClick:z.confirmDelete},{default:(0,i.k6)((function(){return[(0,i.bF)(y.U,null,{default:(0,i.k6)((function(){return[(0,i.eW)("Delete individual")]})),_:1})]})),_:1},8,["disabled","onClick"])]})),_:1})]})),_:1})]})),_:1})]})),_:1}),(0,i.bF)(v.L,{class:"section mb-4"},{default:(0,i.k6)((function(){return[(0,i.bF)(k.I,{class:"pb-6",fluid:""},{default:(0,i.k6)((function(){return[(0,i.bF)(w.w,{class:"text-subtitle-2 mb-4"},{default:(0,i.k6)((function(){return[(0,i.eW)("Profile")]})),_:1}),(0,i.bF)(v.L,null,{default:(0,i.k6)((function(){return[(0,i.bF)(g.B,{cols:"1",class:"ml-4"},{default:(0,i.k6)((function(){return[(0,i.eW)(" Email: ")]})),_:1}),(0,i.bF)(g.B,null,{default:(0,i.k6)((function(){return[S.individual.isLocked?((0,i.uX)(),(0,i.CE)("span",V,(0,r.v_)(S.individual.email||"none"),1)):((0,i.uX)(),(0,i.Wv)(q,{key:1,modelValue:S.individual.email,"onUpdate:modelValue":n[6]||(n[6]=function(e){return S.individual.email=e}),"empty-value":"none",label:"Edit email",onSave:n[7]||(n[7]=function(e){return z.updateProfile({email:e})})},null,8,["modelValue"]))]})),_:1})]})),_:1}),(0,i.bF)(v.L,null,{default:(0,i.k6)((function(){return[(0,i.bF)(g.B,{cols:"1",class:"ml-4"},{default:(0,i.k6)((function(){return[(0,i.eW)(" Country: ")]})),_:1}),(0,i.bF)(g.B,null,{default:(0,i.k6)((function(){return[S.individual.isLocked?((0,i.uX)(),(0,i.CE)("span",X,(0,r.v_)(S.individual.country?S.individual.country.name:"none"),1)):((0,i.uX)(),(0,i.Wv)(q,{key:1,modelValue:S.individual.country,"onUpdate:modelValue":n[8]||(n[8]=function(e){return S.individual.country=e}),"empty-value":"none",label:"Edit country",onSave:n[9]||(n[9]=function(e){return z.updateProfile({countryCode:e.code})})},{value:(0,i.k6)((function(e){var n=e.props;return[(0,i.Lk)("span",(0,r._B)((0,i.Ng)(n)),(0,r.v_)(S.individual.country.name),17)]})),input:(0,i.k6)((function(e){var n=e.model;return[(0,i.bF)(f.A,{modelValue:n.value,"onUpdate:modelValue":function(e){return n.value=e},items:S.countries,label:"Country","item-title":"name","hide-details":"","single-line":"",onClickOnce:z.getCountryList,onKeypressOnce:z.getCountryList},null,8,["modelValue","onUpdate:modelValue","items","onClickOnce","onKeypressOnce"])]})),_:1},8,["modelValue"]))]})),_:1})]})),_:1}),(0,i.bF)(v.L,null,{default:(0,i.k6)((function(){return[(0,i.bF)(g.B,{cols:"1",class:"ml-4"},{default:(0,i.k6)((function(){return[(0,i.eW)(" Gender: ")]})),_:1}),(0,i.bF)(g.B,null,{default:(0,i.k6)((function(){return[S.individual.isLocked?((0,i.uX)(),(0,i.CE)("span",D,(0,r.v_)(S.individual.gender||"none"),1)):((0,i.uX)(),(0,i.Wv)(q,{key:1,modelValue:S.individual.gender,"onUpdate:modelValue":n[10]||(n[10]=function(e){return S.individual.gender=e}),"empty-value":"none",label:"Edit gender",onSave:n[11]||(n[11]=function(e){return z.updateProfile({gender:e})})},null,8,["modelValue"]))]})),_:1})]})),_:1}),(0,i.bF)(v.L,null,{default:(0,i.k6)((function(){return[(0,i.bF)(g.B,{cols:"1",class:"ml-4"},{default:(0,i.k6)((function(){return[O]})),_:1}),(0,i.bF)(g.B,null,{default:(0,i.k6)((function(){return[(0,i.Lk)("span",null,(0,r.v_)(S.individual.uuid),1)]})),_:1})]})),_:1})]})),_:1})]})),_:1}),(0,i.bF)(v.L,{class:"section mb-4"},{default:(0,i.k6)((function(){return[(0,i.bF)(k.I,{fluid:""},{default:(0,i.k6)((function(){return[S.individual.identities?((0,i.uX)(),(0,i.Wv)(Q,{key:0,class:"mb-8",identities:S.individual.identities,uuid:S.individual.uuid,"is-locked":S.individual.isLocked,onUnmerge:z.unmergeIdentities},null,8,["identities","uuid","is-locked","onUnmerge"])):(0,i.Q3)("",!0)]})),_:1})]})),_:1}),(0,i.bF)(v.L,{class:"section"},{default:(0,i.k6)((function(){return[(0,i.bF)(k.I,{fluid:""},{default:(0,i.k6)((function(){return[S.individual.enrollments?((0,i.uX)(),(0,i.Wv)(j,{key:0,enrollments:S.individual.enrollments,"is-locked":S.individual.isLocked,onOpenEnrollmentModal:n[12]||(n[12]=function(n){return e.confirmEnroll(S.individual)}),onOpenTeamModal:z.openTeamModal,onUpdateEnrollment:z.updateEnrollment,onWithdraw:z.withdraw},null,8,["enrollments","is-locked","onOpenTeamModal","onUpdateEnrollment","onWithdraw"])):(0,i.Q3)("",!0)]})),_:1})]})),_:1})]})),_:1},8,["cols","xl"]),z.showRecommendations?((0,i.uX)(),(0,i.Wv)(g.B,{key:0,cols:"4",xl:"3"},{default:(0,i.k6)((function(){return[(0,i.bF)(k.I,{class:"section"},{default:(0,i.k6)((function(){return[(0,i.bF)(w.w,{class:"text-subtitle-2"},{default:(0,i.k6)((function(){return[(0,i.eW)(" Possible matches ")]})),_:1}),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(S.individual.matchRecommendations,(function(e,n){var t=e.id,o=e.individual;return(0,i.uX)(),(0,i.CE)("div",{key:t,class:"ml-2 mr-2"},[(0,i.bF)(G,{name:o.name,email:o.email,enrollments:o.enrollments,identities:o.identities,"is-locked":o.isLocked,sources:o.sources,uuid:o.uuid,class:(0,r.C4)({"mt-4":n>0,"mt-2":0===n})},null,8,["name","email","enrollments","identities","is-locked","sources","uuid","class"]),(0,i.bF)(u.S,null,{default:(0,i.k6)((function(){return[(0,i.bF)(b.h),(0,i.bF)(l.D,{variant:"text",size:"small",onClick:(0,a.D$)((function(e){return z.applyRecommendation(t,!1)}),["prevent"])},{default:(0,i.k6)((function(){return[(0,i.eW)(" Dismiss ")]})),_:2},1032,["onClick"]),(0,i.bF)(l.D,{size:"small",variant:"outlined",onClick:(0,a.D$)((function(e){return z.applyRecommendation(t,!0)}),["prevent"])},{default:(0,i.k6)((function(){return[(0,i.eW)(" Merge ")]})),_:2},1032,["onClick"])]})),_:2},1024)])})),128))]})),_:1})]})),_:1})):(0,i.Q3)("",!0)]})),_:1})]})),_:1})):(0,i.Q3)("",!0),S.error?((0,i.uX)(),(0,i.Wv)(k.I,{key:2},{default:(0,i.k6)((function(){return[(0,i.bF)(o.l,{dense:"",text:"",type:"error"},{default:(0,i.k6)((function(){return[(0,i.eW)(" Individual "+(0,r.v_)(S.error),1)]})),_:1}),(0,i.bF)(l.D,{to:"/",color:"primary",depressed:""},{default:(0,i.k6)((function(){return[(0,i.bF)(h.w,{left:"",dark:""},{default:(0,i.k6)((function(){return[(0,i.eW)("mdi-arrow-left")]})),_:1}),(0,i.eW)(" Go to dashboard ")]})),_:1})]})),_:1})):(0,i.Q3)("",!0),(0,i.bF)(K,{"is-open":e.enrollmentModal.open,"onUpdate:isOpen":n[13]||(n[13]=function(n){return e.enrollmentModal.open=n}),title:e.enrollmentModal.title,text:e.enrollmentModal.text,uuid:S.mk,enroll:e.enrollIndividual,"fetch-organizations":z.fetchOrganizations,"add-organization":e.addOrganization},null,8,["is-open","title","text","uuid","enroll","fetch-organizations","add-organization"]),S.teamModal.open?((0,i.uX)(),(0,i.Wv)(T,{key:3,"is-open":S.teamModal.open,"onUpdate:isOpen":n[14]||(n[14]=function(e){return S.teamModal.open=e}),organization:S.teamModal.organization,uuid:S.mk,enroll:z.enroll,enrollments:S.individual.enrollments,onUpdateIndividual:n[15]||(n[15]=function(e){return z.updateIndividual(e)})},null,8,["is-open","organization","uuid","enroll","enrollments"])):(0,i.Q3)("",!0),(0,i.bF)(J,{"is-open":S.matchesModal.open,"onUpdate:isOpen":n[16]||(n[16]=function(e){return S.matchesModal.open=e}),"recommend-matches":z.recommendMatches,uuid:S.mk},null,8,["is-open","recommend-matches","uuid"]),(0,i.bF)(m.p,{modelValue:S.linkedinModal.open,"onUpdate:modelValue":n[19]||(n[19]=function(e){return S.linkedinModal.open=e}),"max-width":"500px"},{default:(0,i.k6)((function(){return[(0,i.bF)(d.J,{class:"pa-3"},{default:(0,i.k6)((function(){return[(0,i.bF)(c.r,{class:"headline"},{default:(0,i.k6)((function(){return[(0,i.eW)("Add LinkedIn profile")]})),_:1}),(0,i.bF)(s.O,null,{default:(0,i.k6)((function(){return[(0,i.bF)(E.W,{modelValue:S.linkedinModal.username,"onUpdate:modelValue":n[17]||(n[17]=function(e){return S.linkedinModal.username=e}),label:"LinkedIn username",prefix:"https://www.linkedin.com/in/",placeholder:"username",autofocus:""},null,8,["modelValue"])]})),_:1}),(0,i.bF)(u.S,null,{default:(0,i.k6)((function(){return[(0,i.bF)(b.h),(0,i.bF)(l.D,{text:"",onClick:n[18]||(n[18]=function(e){return S.linkedinModal.open=!1})},{default:(0,i.k6)((function(){return[(0,i.eW)(" Cancel ")]})),_:1}),(0,i.bF)(l.D,{disabled:!S.linkedinModal.username,color:"primary",onClick:(0,a.D$)(z.addLinkedInProfile,["stop"])},{default:(0,i.k6)((function(){return[(0,i.eW)(" Confirm ")]})),_:1},8,["disabled","onClick"])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"]),(0,i.bF)(m.p,{modelValue:S.dialog.open,"onUpdate:modelValue":n[20]||(n[20]=function(e){return S.dialog.open=e}),"max-width":"500px"},{default:(0,i.k6)((function(){return[(0,i.bF)(d.J,{class:"pa-3"},{default:(0,i.k6)((function(){return[(0,i.bF)(c.r,{class:"headline"},{default:(0,i.k6)((function(){return[(0,i.eW)((0,r.v_)(S.dialog.title),1)]})),_:1}),(0,i.bF)(s.O,null,{default:(0,i.k6)((function(){return[S.dialog.text?((0,i.uX)(),(0,i.CE)("p",P,(0,r.v_)(S.dialog.text),1)):(0,i.Q3)("",!0),S.dialog.errorMessage?((0,i.uX)(),(0,i.Wv)(o.l,{key:1,dense:"",text:"",type:"error"},{default:(0,i.k6)((function(){return[(0,i.eW)((0,r.v_)(S.dialog.errorMessage),1)]})),_:1})):(0,i.Q3)("",!0)]})),_:1}),S.dialog.action?((0,i.uX)(),(0,i.Wv)(u.S,{key:0},{default:(0,i.k6)((function(){return[(0,i.bF)(b.h),(0,i.bF)(l.D,{text:"",onClick:z.closeDialog},{default:(0,i.k6)((function(){return[(0,i.eW)(" Cancel ")]})),_:1},8,["onClick"]),(0,i.bF)(l.D,{color:"primary",id:"confirm",depressed:"",onClick:(0,a.D$)(S.dialog.action,["stop"])},{default:(0,i.k6)((function(){return[(0,i.eW)(" Confirm ")]})),_:1},8,["onClick"])]})),_:1})):((0,i.uX)(),(0,i.Wv)(u.S,{key:1},{default:(0,i.k6)((function(){return[(0,i.bF)(b.h),(0,i.bF)(l.D,{text:"",color:"primary",onClick:z.closeDialog},{default:(0,i.k6)((function(){return[(0,i.eW)(" OK ")]})),_:1},8,["onClick"])]})),_:1}))]})),_:1})]})),_:1},8,["modelValue"])]})),_:1})}var z=t(41034),B=t(14048),R=t(30388),q=(t(28706),t(50113),t(25276),t(64346),t(44114),t(72712),t(15086),t(26099),t(58663)),Q=t(20595),j=t(87131),G=t(80220),K=t(40018),T=t(57712),J=t(49659),N=t(88075),H=t(56105),Y=t(54640),Z=t(10978),ee=t(52790),ne=t(83102);const te={name:"Individual",components:{Avatar:K.A,IdentitiesList:T.A,IndividualCard:J.A,EnrollmentList:N.A,EnrollModal:H.A,TeamEnrollModal:Y.A,MatchesModal:Z.A,EditDialog:ee.A,LoadingSpinner:ne.A},mixins:[G.M],apollo:{individuals:function(){return{query:q.UE,variables:{uuid:this.mk},result:function(e){1===e.data.individuals.entities.length?this.updateIndividual(e.data.individuals.entities):e.errors?this.error=this.$getErrorMessage(e.errors[0]):this.error="Individual ".concat(this.mk," not found")}}}},data:function(){return{individual:null,dialog:{open:!1,title:"",text:"",errorMessage:"",action:null},form:{},teamModal:{open:!1,organization:""},matchesModal:{open:!1},linkedinModal:{open:!1,username:""},countries:[],socialProfiles:[],mk:this.$route.params.mk,error:null}},computed:{showRecommendations:function(){return this.individual.matchRecommendations&&this.individual.matchRecommendations.length>0},isInWorkspace:function(){var e=this.$store.getters.workspace;return e&&-1!==e.indexOf(this.mk)},hasLinkedinProfile:function(){return this.socialProfiles.some((function(e){return"linkedin"===e.source}))}},methods:{updateProfile:function(e){var n=this;return(0,R.A)((0,B.A)().mark((function t(){var i;return(0,B.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,Q.r7)(n.$apollo,e,n.mk);case 3:i=t.sent,n.updateIndividual(i.data.updateProfile.individual),n.$logger.debug("Updated profile ".concat(n.mk),e),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),n.dialog={open:!0,title:"Error updating profile",errorMessage:n.$getErrorMessage(t.t0)},n.$logger.error("Error updating profile: ".concat(t.t0),e);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},lock:function(){var e=this;return(0,R.A)((0,B.A)().mark((function n(){var t;return(0,B.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,Q.pG)(e.$apollo,e.mk);case 3:t=n.sent,Object.assign(e.individual,{isLocked:t.data.lock.individual.isLocked}),e.$logger.debug("Locked individual ".concat(e.mk)),n.next=12;break;case 8:n.prev=8,n.t0=n["catch"](0),e.dialog={open:!0,title:"Error locking profile",errorMessage:e.$getErrorMessage(n.t0)},e.$logger.error("Error locking individual ".concat(e.mk,": ").concat(n.t0));case 12:case"end":return n.stop()}}),n,null,[[0,8]])})))()},unlock:function(){var e=this;return(0,R.A)((0,B.A)().mark((function n(){var t;return(0,B.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,Q.Cr)(e.$apollo,e.mk);case 3:t=n.sent,Object.assign(e.individual,{isLocked:t.data.unlock.individual.isLocked}),e.$logger.debug("Unlocked individual ".concat(e.mk)),n.next=12;break;case 8:n.prev=8,n.t0=n["catch"](0),e.dialog={open:!0,title:"Error updating profile",errorMessage:e.$getErrorMessage(n.t0)},e.$logger.error("Error unlocking individual ".concat(e.mk,": ").concat(n.t0));case 12:case"end":return n.stop()}}),n,null,[[0,8]])})))()},getCountryList:function(){var e=this;return(0,R.A)((0,B.A)().mark((function n(){var t;return(0,B.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,q.X6)(e.$apollo);case 3:t=n.sent,e.countries=t.data.countries.entities,n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),e.dialog={open:!0,title:"Error loading country list",errorMessage:e.$getErrorMessage(n.t0)};case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},unmergeIdentities:function(e){var n=this;return(0,R.A)((0,B.A)().mark((function t(){var i,r;return(0,B.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,Q.Io)(n.$apollo,e);case 3:i=t.sent,r=i.data.unmergeIdentities.individuals.find((function(e){return e.mk===n.mk})),n.updateIndividual(r),n.$logger.debug("Unmerged identities",e),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](0),n.dialog={open:!0,title:"Error updating profile",errorMessage:n.$getErrorMessage(t.t0)},n.$logger.error("Error unmerging identities ".concat(e,": ").concat(t.t0));case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))()},enroll:function(e,n,t,i,r){var a=this;return(0,R.A)((0,B.A)().mark((function o(){var l;return(0,B.A)().wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,(0,Q.xu)(a.$apollo,e,n,t,i,r);case 2:return l=o.sent,o.abrupt("return",l);case 4:case"end":return o.stop()}}),o)})))()},updateEnrollment:function(e){var n=this;return(0,R.A)((0,B.A)().mark((function t(){var i;return(0,B.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object.assign(e,{uuid:n.mk}),t.prev=1,t.next=4,(0,Q.ct)(n.$apollo,e);case 4:i=t.sent,n.updateIndividual(i.data.updateEnrollment.individual),n.$logger.debug("Updated enrollment",e),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](1),n.dialog={open:!0,title:"Error updating profile",errorMessage:n.$getErrorMessage(t.t0)},n.$logger.error("Error updating enrollment: ".concat(t.t0),e);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()},withdraw:function(e){var n=this;return(0,R.A)((0,B.A)().mark((function t(){var i,r,a,o,l;return(0,B.A)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.name,r=e.fromDate,a=e.toDate,o=e.parentOrg,t.prev=1,t.next=4,(0,Q.ne)(n.$apollo,n.mk,i,r,a,o);case 4:l=t.sent,n.updateIndividual(l.data.withdraw.individual),n.$logger.debug("Removed affiliation",(0,z.A)({uuid:n.mk},e)),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](1),n.dialog={open:!0,title:"Error updating profile",errorMessage:n.$getErrorMessage(t.t0)},n.$logger.error("Error removing affiliation: ".concat(t.t0),(0,z.A)({uuid:n.mk},e));case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()},deleteIndividual:function(){var e=this;return(0,R.A)((0,B.A)().mark((function n(){var t;return(0,B.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,Q.Ut)(e.$apollo,e.mk);case 3:t=n.sent,t&&e.$router.push("/"),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),e.dialog={open:!0,title:"Error deleting profile",errorMessage:e.$getErrorMessage(n.t0)};case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},openTeamModal:function(e){this.teamModal={open:!0,organization:e}},confirmDelete:function(){this.dialog={open:!0,title:"Delete ".concat(this.individual.name,"?"),action:this.deleteIndividual}},closeDialog:function(){this.dialog={open:!1,title:"",text:"",errorMessage:""}},updateIndividual:function(e){Array.isArray(e)||(e=[e]),this.individual=(0,j.p4)(e[0]),this.socialProfiles=this.getSocialProfiles(e[0]),Object.assign(this.form,{name:this.individual.name,email:this.individual.email,country:this.individual.country,gender:this.individual.gender}),document.title="".concat(this.individual.name||"Individual"," - Sorting Hat")},fetchOrganizations:function(e,n,t){var i=this;return(0,R.A)((0,B.A)().mark((function r(){var a;return(0,B.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,(0,q.t2)(i.$apollo,e,n,t);case 2:return a=r.sent,r.abrupt("return",a.data.organizations);case 4:case"end":return r.stop()}}),r)})))()},applyRecommendation:function(e,n){var t=this;return(0,R.A)((0,B.A)().mark((function i(){return(0,B.A)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,(0,Q.x2)(t.$apollo,e,n);case 3:t.$apollo.queries.individuals.refetch(),t.$logger.debug("Applied recommendation ".concat(e)),i.next=11;break;case 7:i.prev=7,i.t0=i["catch"](0),t.dialog={open:!0,title:"Error applying recommendation",errorMessage:t.$getErrorMessage(i.t0)},t.$logger.error("Error applying recommendation ".concat(e,": ").concat(i.t0));case 11:case"end":return i.stop()}}),i,null,[[0,7]])})))()},recommendMatches:function(e,n,t,i){var r=this;return(0,R.A)((0,B.A)().mark((function a(){var o;return(0,B.A)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,(0,Q.wg)(r.$apollo,e,n,t,i);case 2:return o=a.sent,a.abrupt("return",o);case 4:case"end":return a.stop()}}),a)})))()},getSocialProfiles:function(e){return e.identities.reduce((function(e,n){var t=[{source:"github",link:"http://github.com/".concat(n.username),icon:"mdi-github"},{source:"linkedin",link:"https://www.linkedin.com/in/".concat(n.username),icon:"mdi-linkedin"}],i=t.find((function(e){return e.source===n.source.toLowerCase()})),r=e.find((function(e){return e.source===n.source&&e.username===n.username}));return i&&!r&&e.push((0,z.A)((0,z.A)({},n),i)),e}),[])},addLinkedInProfile:function(){var e=this;return(0,R.A)((0,B.A)().mark((function n(){var t;return(0,B.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,Q.DA)(e.$apollo,e.mk,e.linkedinModal.username);case 3:t=n.sent,e.updateIndividual(t.data.addIdentity.individual),Object.assign(e.linkedinModal,{open:!1,username:""}),n.next=12;break;case 8:n.prev=8,n.t0=n["catch"](0),e.dialog={open:!0,title:"Error adding identity",errorMessage:e.$getErrorMessage(n.t0)},e.$logger.error("Error adding identity: ".concat(n.t0));case 12:case"end":return n.stop()}}),n,null,[[0,8]])})))()},removeLinkedInProfile:function(){var e=this;return(0,R.A)((0,B.A)().mark((function n(){var t,i,r;return(0,B.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,i=null===(t=e.socialProfiles.find((function(e){return"linkedin"===e.source})))||void 0===t?void 0:t.uuid,n.next=4,(0,Q.Ut)(e.$apollo,i);case 4:r=n.sent,e.updateIndividual(r.data.deleteIdentity.individual),e.closeDialog(),n.next=13;break;case 9:n.prev=9,n.t0=n["catch"](0),e.dialog={open:!0,title:"Error removing identity",errorMessage:e.$getErrorMessage(n.t0)},e.$logger.error("Error removing identity: ".concat(n.t0));case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))()},confirmRemoveIdentity:function(){this.dialog={open:!0,title:"Remove LinkedIn profile?",action:this.removeLinkedInProfile}}}};var ie=t(64621);const re=(0,ie.A)(te,[["render",S],["__scopeId","data-v-d27b290e"]]),ae=re}}]);
//# sourceMappingURL=193.c42f1169.js.map