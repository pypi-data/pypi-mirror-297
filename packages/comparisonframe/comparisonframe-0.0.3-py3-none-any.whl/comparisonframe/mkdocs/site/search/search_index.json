{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Intro","text":"<p>Comparison Frame is designed to automate and streamline the  process of comparing textual data, particularly focusing on various  metrics such as character and word count, punctuation usage, and  semantic similarity. It's particularly useful for scenarios where consistent text analysis is required, such as evaluating the performance of natural language processing models,  monitoring content quality, or tracking changes in textual data over  time using manual evaluation.</p>"},{"location":"#installation","title":"Installation","text":"<pre><code>pip install comparisonframe\n</code></pre>"},{"location":"flow/","title":"Flow","text":""},{"location":"release-notes/","title":"Release notes","text":""},{"location":"release-notes/#003","title":"0.0.3","text":"<pre><code>- minor fixes to scores calculation\n</code></pre>"},{"location":"release-notes/#002","title":"0.0.2","text":"<pre><code>- revised version implemeted based on diagram\n\n- test status based on pandas query for aggregate scores table\n\n- calculating comparison and aggr scores\n\n- metadata for records and runs\n\n- aggregate scores for each query\n\n- recording runs, and comparing them to records though mocker\n\n- separate expandable records analyser\n</code></pre>"},{"location":"release-notes/#001","title":"0.0.1","text":"<pre><code>- adding mocker-db instead of embedder\n</code></pre>"},{"location":"release-notes/#000","title":"0.0.0","text":"<pre><code>- initial version\n</code></pre>"},{"location":"usage-examples/","title":"Usage examples","text":"<pre><code>from comparisonframe import ComparisonFrame\n</code></pre>"},{"location":"usage-examples/#1-creating-validation-set","title":"1. Creating validation set","text":""},{"location":"usage-examples/#11-initialize-comparison-class","title":"1.1 Initialize comparison class","text":"<pre><code>comparer = ComparisonFrame(\n    # optionally\n    ## mocker default parameters\n    mocker_params = {\n        'file_path' : \"./comparisonframe_storage\",\n         'persist' : True},\n\n    ## scores to calculate\n    compare_scores = ['word_count_diff','semantic_similarity'],\n    aggr_scores = ['median']\n)\n</code></pre>"},{"location":"usage-examples/#12-recording-queries-and-expected-responses-validation-set","title":"1.2 Recording queries and expected responses (validation set)","text":"<pre><code>comparer.record_queries(\n    queries = [\"Black metal\", \n               \"Tribulation\"],\n    expected_texts = [\"Black metal is an extreme subgenre of heavy metal music.\",\n    \"Tribulation are a Swedish heavy metal band from Arvika that formed in 2005.\"],\n    metadata = {'name' : 'metal_bands'})\n</code></pre>"},{"location":"usage-examples/#2-comparing-newly-generated-data-with-expected-results","title":"2. Comparing newly generated data with expected results","text":""},{"location":"usage-examples/#21-initialize-new-comparison-class","title":"2.1 Initialize new comparison class","text":"<pre><code>comparer = ComparisonFrame(\n    # optionally\n    ## mocker default parameters\n    mocker_params = {\n        'file_path' : \"./comparisonframe_storage\",\n         'persist' : True},\n\n    ## scores to calculate\n    compare_scores = ['word_count_diff','semantic_similarity'],\n    aggr_scores = ['median']\n)\n</code></pre>"},{"location":"usage-examples/#22-show-validation-set","title":"2.2 Show validation set","text":"<pre><code>untested_queries = comparer.get_all_queries(\n    ## optional\n    metadata_filters={'name' : 'metal_bands'})\nprint(untested_queries)\n</code></pre> <pre><code>['Black metal', 'Tribulation']\n</code></pre> <pre><code>comparer.get_all_records()\n</code></pre> <pre><code>[{'record_id': '0cc157453395b440f36d1a1aee24aa76a03f5f9ab0a7a8bd7b663c92f2f16e87',\n  'query': 'Black metal',\n  'expected_text': 'Black metal is an extreme subgenre of heavy metal music.'},\n {'record_id': 'eecd9c2a5b25ee6053891b894157fa30372ed694763385e1ada1dc9ad8e41625',\n  'query': 'Tribulation',\n  'expected_text': 'Tribulation are a Swedish heavy metal band from Arvika that formed in 2005.'}]\n</code></pre> <pre><code>comparer.get_all_records_df()\n</code></pre> record_id query expected_text 0 0cc157453395b440f36d1a1aee24aa76a03f5f9ab0a7a8... Black metal Black metal is an extreme subgenre of heavy me... 1 eecd9c2a5b25ee6053891b894157fa30372ed694763385... Tribulation Tribulation are a Swedish heavy metal band fro..."},{"location":"usage-examples/#23-insert-newly-generated-with-records","title":"2.3 Insert newly generated with records","text":"<pre><code>valid_answer_query_1 = \"Black metal is an extreme subgenre of heavy metal music.\"\nvery_similar_answer_query_1 = \"Black metal is a subgenre of heavy metal music.\"\nunexpected_answer_query_1 = \"Black metals are beautiful and are often used in jewelry design.\"\n</code></pre> <pre><code>comparer.record_runs(queries = [\"Black metal\"],\n                     provided_texts = [valid_answer_query_1,\n                                      very_similar_answer_query_1,\n                                      unexpected_answer_query_1],\n                    metadata={'desc' : 'definitions'})\n</code></pre> <pre><code>comparer.get_all_runs()\n</code></pre> <pre><code>[{'timestamp': '2024-09-24 03:43:48',\n  'run_id': 'e8f5f87186ac81a38896e602c7d8a4e1b973aa00973b68cbfdc983e6c1762d6e',\n  'query': 'Black metal',\n  'provided_text': 'Black metal is an extreme subgenre of heavy metal music.'},\n {'timestamp': '2024-09-24 03:43:48',\n  'run_id': 'e0e4dfaff0b16227dbfde7a75eb9f060ccd2b1b5acc8b4b48aa9d305a3591353',\n  'query': 'Black metal',\n  'provided_text': 'Black metal is a subgenre of heavy metal music.'},\n {'timestamp': '2024-09-24 03:43:48',\n  'run_id': '4e806f8cf2bd2184e63d41c85322e129b14c8d5206472c7668077452386257af',\n  'query': 'Black metal',\n  'provided_text': 'Black metals are beautiful and are often used in jewelry design.'}]\n</code></pre> <pre><code>df = comparer.get_all_runs_df()\ndf\n</code></pre> timestamp run_id query provided_text 0 2024-09-24 03:43:48 e8f5f87186ac81a38896e602c7d8a4e1b973aa00973b68... Black metal Black metal is an extreme subgenre of heavy me... 1 2024-09-24 03:43:48 e0e4dfaff0b16227dbfde7a75eb9f060ccd2b1b5acc8b4... Black metal Black metal is a subgenre of heavy metal music. 2 2024-09-24 03:43:48 4e806f8cf2bd2184e63d41c85322e129b14c8d5206472c... Black metal Black metals are beautiful and are often used ..."},{"location":"usage-examples/#24-comparing-runs-with-records","title":"2.4 Comparing runs with records","text":"<pre><code>comparer.compare_runs_with_records()\n</code></pre> <pre><code>WARNING:ComparisonFrame:No data was found with applied filters!\n</code></pre> <pre><code>comparer.get_all_run_scores()\n</code></pre> <pre><code>[{'timestamp': '2024-09-24 03:43:57',\n  'run_id': 'e8f5f87186ac81a38896e602c7d8a4e1b973aa00973b68cbfdc983e6c1762d6e',\n  'query': 'Black metal',\n  'provided_text': 'Black metal is an extreme subgenre of heavy metal music.',\n  'record_id': '0cc157453395b440f36d1a1aee24aa76a03f5f9ab0a7a8bd7b663c92f2f16e87',\n  'word_count_diff': 0,\n  'semantic_similarity': 1.0000001192092896,\n  'comparison_id': '9376f9245bf3a237ef1eb4920cc2c86918fdba5e5934014058b14286fbd31f32'},\n {'timestamp': '2024-09-24 03:43:57',\n  'run_id': 'e0e4dfaff0b16227dbfde7a75eb9f060ccd2b1b5acc8b4b48aa9d305a3591353',\n  'query': 'Black metal',\n  'provided_text': 'Black metal is a subgenre of heavy metal music.',\n  'record_id': '0cc157453395b440f36d1a1aee24aa76a03f5f9ab0a7a8bd7b663c92f2f16e87',\n  'word_count_diff': 1,\n  'semantic_similarity': 0.9859851002693176,\n  'comparison_id': '756abbce6c86dea26ce9f3d0cc11668b76df40120faf2fbee1dad5daa1e201ec'},\n {'timestamp': '2024-09-24 03:43:57',\n  'run_id': '4e806f8cf2bd2184e63d41c85322e129b14c8d5206472c7668077452386257af',\n  'query': 'Black metal',\n  'provided_text': 'Black metals are beautiful and are often used in jewelry design.',\n  'record_id': '0cc157453395b440f36d1a1aee24aa76a03f5f9ab0a7a8bd7b663c92f2f16e87',\n  'word_count_diff': 1,\n  'semantic_similarity': 0.4940534234046936,\n  'comparison_id': 'f6ab2967695a560f4ff208e03c2804b09f26b9356ab5da592186e503a900ab56'}]\n</code></pre> <pre><code>comparer.get_all_run_scores_df()\n</code></pre> timestamp run_id query provided_text record_id word_count_diff semantic_similarity comparison_id 0 2024-09-24 03:43:57 e8f5f87186ac81a38896e602c7d8a4e1b973aa00973b68... Black metal Black metal is an extreme subgenre of heavy me... 0cc157453395b440f36d1a1aee24aa76a03f5f9ab0a7a8... 0 1.000000 9376f9245bf3a237ef1eb4920cc2c86918fdba5e593401... 1 2024-09-24 03:43:57 e0e4dfaff0b16227dbfde7a75eb9f060ccd2b1b5acc8b4... Black metal Black metal is a subgenre of heavy metal music. 0cc157453395b440f36d1a1aee24aa76a03f5f9ab0a7a8... 1 0.985985 756abbce6c86dea26ce9f3d0cc11668b76df40120faf2f... 2 2024-09-24 03:43:57 4e806f8cf2bd2184e63d41c85322e129b14c8d5206472c... Black metal Black metals are beautiful and are often used ... 0cc157453395b440f36d1a1aee24aa76a03f5f9ab0a7a8... 1 0.494053 f6ab2967695a560f4ff208e03c2804b09f26b9356ab5da..."},{"location":"usage-examples/#3-calculating-aggregate-comparison-scores","title":"3 Calculating aggregate comparison scores","text":"<pre><code>comparer.calculate_aggr_scores()\n</code></pre> <pre><code>WARNING:ComparisonFrame:No data was found with applied filters!\n</code></pre> <pre><code>comparer.get_all_aggr_scores()\n</code></pre> <pre><code>[{'timestamp': '2024-09-24 03:44:07',\n  'comparison_id': ['9376f9245bf3a237ef1eb4920cc2c86918fdba5e5934014058b14286fbd31f32',\n   '756abbce6c86dea26ce9f3d0cc11668b76df40120faf2fbee1dad5daa1e201ec',\n   'f6ab2967695a560f4ff208e03c2804b09f26b9356ab5da592186e503a900ab56'],\n  'query': 'Black metal',\n  'median_word_count_diff': 1.0,\n  'median_semantic_similarity': 0.9859851002693176,\n  'record_status_id': '2723311824179b0f89b65a513368bfe05298a625b7c73b5a06ff33702689d56a'}]\n</code></pre> <pre><code>comparer.get_all_aggr_scores_df()\n</code></pre> timestamp comparison_id query median_word_count_diff median_semantic_similarity record_status_id 0 2024-09-24 03:44:07 [9376f9245bf3a237ef1eb4920cc2c86918fdba5e59340... Black metal 1.0 0.985985 2723311824179b0f89b65a513368bfe05298a625b7c73b..."},{"location":"usage-examples/#4-recording-test-statuses","title":"4. Recording test statuses","text":"<pre><code>comparer.calculate_test_statuses(test_query = \"median_semantic_similarity &gt; 0.9\")\n\n</code></pre> <pre><code>comparer.get_test_statuses()\n</code></pre> <pre><code>[{'timestamp': '2024-09-24 03:44:13',\n  'record_id': '0cc157453395b440f36d1a1aee24aa76a03f5f9ab0a7a8bd7b663c92f2f16e87',\n  'record_status_id': '2723311824179b0f89b65a513368bfe05298a625b7c73b5a06ff33702689d56a',\n  'query': 'Black metal',\n  'test': 'median_semantic_similarity &gt; 0.9',\n  'valid': True}]\n</code></pre> <pre><code>comparer.get_test_statuses_df()\n</code></pre> timestamp record_id record_status_id query test valid 0 2024-09-24 03:44:13 0cc157453395b440f36d1a1aee24aa76a03f5f9ab0a7a8... 2723311824179b0f89b65a513368bfe05298a625b7c73b... Black metal median_semantic_similarity &gt; 0.9 True"},{"location":"usage-examples/#5-reseting-statuses-flushing-records-and-comparison-results","title":"5. Reseting statuses, flushing records and comparison results","text":"<pre><code>comparer.flush_records()\n</code></pre> <pre><code>comparer.flush_runs()\n</code></pre> <pre><code>comparer.flush_comparison_scores()\n</code></pre> <pre><code>comparer.flush_aggregate_scores()\n</code></pre> <pre><code>comparer.flush_test_statuses()\n</code></pre>"}]}