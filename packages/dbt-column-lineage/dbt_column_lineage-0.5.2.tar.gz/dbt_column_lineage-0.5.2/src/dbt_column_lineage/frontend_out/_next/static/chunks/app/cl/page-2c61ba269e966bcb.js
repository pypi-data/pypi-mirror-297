(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[863],{38127:function(e,t,a){Promise.resolve().then(a.bind(a,23023))},23023:function(e,t,a){"use strict";a.d(t,{Cl:function(){return P}});var s=a(57437),o=a(16463),n=a(2265),r=a(6785),l=a(71165),i=a(20357);let c=e=>{let{getNodes:t,setNodes:a,getEdges:s,setEdges:o}=(0,r._K)(),c=(0,r.Bn)(),[d,u]=(0,n.useState)([]),[h,m]=(0,n.useState)([]),[p,x]=(0,n.useState)(),[g,f]=(0,n.useState)(),b=(0,l.o)(e=>e.setLoading),y=(0,l.o)(e=>e.showColumn),j=(0,l.o)(e=>e.setClearNodePosition),v=(0,l.o)(e=>e.leftMaxDepth),w=(0,l.o)(e=>e.rightMaxDepth),N=(0,n.useCallback)((e,t)=>{let a=new Map(e.map(e=>[e.id,e]));return t.forEach(e=>{if(a.has(e.id)){let t=a.get(e.id);a.set(e.id,{...t,data:{...t.data,...e.data,columns:Array.from(new Set([...t.data.columns,...e.data.columns]))}})}else a.set(e.id,e)}),Array.from(a.values())},[]),C=(0,n.useCallback)((e,t)=>{let a=new Map(e.map(e=>[e.id,e]));return t.forEach(e=>{a.has(e.id)||a.set(e.id,e)}),Array.from(a.values())},[]),k=(0,n.useCallback)(async(e,n,r)=>{b(!0);let l=JSON.stringify({[n]:[r]}),c=new URLSearchParams({sources:n,columns:l,depth:"1",show_column:y.toString(),reverse:"true"});w?c.set("depth","-1"):c.set("depth","1");let d=i.env.NEXT_PUBLIC_API_HOSTNAME||"",h=await fetch("".concat(d,"/api/v1/lineage?").concat(c)),m=await h.json();if(b(!1),200!=h.status){alert(m.error);return}if(0==m.edges.length){y?u(e=>[...e,r]):x(n);return}let p=N(t(),m.nodes),g=C(s(),m.edges);a(p),o(g),j(!0)},[t,s,y,w]),_=(0,n.useCallback)(async(e,n)=>{b(!0);let r=JSON.stringify({[e]:[n]}),l=new URLSearchParams({sources:e,columns:r,depth:"1",show_column:y.toString()});v?l.set("depth","-1"):l.set("depth","1");let c=i.env.NEXT_PUBLIC_API_HOSTNAME||"",d=await fetch("".concat(c,"/api/v1/lineage?").concat(l)),u=await d.json();if(b(!1),200!=d.status){alert(u.error);return}if(0==u.edges.length){y?m(e=>[...e,n]):f(e);return}let h=N(t(),u.nodes),p=C(s(),u.edges);a(h),o(p),j(!0)},[t,s,y,c,v]),L=(0,n.useCallback)(()=>{let t=[e];a(e=>e.filter(e=>!t.includes(e.id))),o(e=>e.filter(e=>!t.includes(e.source)&&!t.includes(e.target))),j(!0)},[e,a,o]),S=(0,n.useCallback)(e=>{let t={};return e.forEach(e=>{t[e.target]||(t[e.target]={}),e.targetHandle&&(t[e.target][e.targetHandle]=(t[e.target][e.targetHandle]||0)+1)}),Object.entries(t).filter(e=>{let[t,a]=e;return Object.values(a).some(e=>e>=2)}).map(e=>{let[t]=e;return t})},[]),P=(0,n.useCallback)((e,t)=>{let a=t.filter(t=>t.source===e).map(e=>e.target),s=S(t),o=a.filter(e=>!s.includes(e)),n=o.flatMap(e=>P(e,t));return[...o,...n]},[s]),E=(0,n.useCallback)((e,n)=>{let l=P(e,s()),i=[e,...l],c=new Map,d=new Set;s().forEach(t=>{if(t.fixed&&d.add(t.target),i.includes(t.source)&&i.includes(t.target)){var a,s;let o=c.get(t.source)||new Set,r=c.get(t.target)||new Set,l=(null===(a=t.sourceHandle)||void 0===a?void 0:a.split("__")[0])||"",i=(null===(s=t.targetHandle)||void 0===s?void 0:s.split("__")[0])||"",d=t.source===e&&l===n,u=o.has(l);(d||u)&&(r.add(i),c.set(t.target,r))}}),a(t=>t.map(e=>{if(!i.includes(e.id))return e;let t=c.get(e.id)||new Set,a=e.data.columns.filter(e=>!t.has(e));return{...e,data:{...e.data,columns:a}}}).filter(t=>t.id===e||t.data.columns.length>0||d.has(t.id))),o(a=>(0,r.my)(t(),a).filter(t=>{var a;return t.source!=e||(null===(a=t.sourceHandle)||void 0===a?void 0:a.split("__")[0])!=n})),j(!0)},[y,a,o,P,t,s]),M=(0,n.useCallback)(n=>{let l=P(n,s());a(e=>e.filter(e=>!l.includes(e.id))),o(a=>(0,r.my)(t(),a).filter(t=>t.source!=e&&!l.includes(t.source))),j(!0)},[P,t,s]);return{addReverseLineage:k,addSingleLineage:_,hideNode:L,getDescendantNodes:P,hideColumnAndRelatedEdges:E,hideTableAndRelatedEdges:M,lastNodeColumns:d,lastNodeTable:p,firstNodeColumns:h,firstNodeTable:g}};var d=a(6920),u=a(45079),h=(0,n.memo)(e=>{let{type:t,position:a,id:o,isConnectable:n,nodeId:i,onDelete:c,onConnect:h}=e,m=(0,r.oR)(e=>e.edges),p=(0,l.o)(e=>e.loading),x=m.some(e=>"target"===t&&e.target===i&&e.targetHandle===o||"source"===t&&e.source===i&&e.sourceHandle===o);return(0,s.jsxs)("div",{style:{position:"absolute",[a===r.Ly.Left?"left":"right"]:"-2px",top:"50%",transform:"translateY(-50%)",zIndex:1},children:[(0,s.jsx)(r.HH,{type:t,position:a,id:o,isConnectable:n,style:{opacity:0,width:"24px",height:"24px",background:"transparent",border:"none"}}),(0,s.jsx)("button",{className:"w-6 h-6 flex items-center justify-center bg-white rounded-full border border-gray-300 hover:bg-gray-100 focus:outline-none",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",pointerEvents:"auto",cursor:"source"===t&&x?"pointer":"default"},onClick:e=>{p||(e.stopPropagation(),"source"===t&&x?c():x||h(t))},children:"source"===t&&x?(0,s.jsx)(d.G,{icon:u.Kl4,className:"text-gray-600"}):x?(0,s.jsx)("span",{className:"w-4 h-4"}):(0,s.jsx)(d.G,{icon:p?u.LM3:u.r8p,spinPulse:p,className:"text-gray-600"})})]})}),m=a(1970),p=(0,n.memo)(e=>{let{schema:t,tableName:a,selected:r,color:l,isClickableTableName:i,content:c,hideNode:h}=e,p=(0,o.useSearchParams)(),[x,g]=(0,n.useState)(!1),f=(0,n.useCallback)(e=>{e.stopPropagation();let s=new URLSearchParams({schema:t,sources:a,activeSource:a});window.open("/cte?".concat(s.toString()),"_blank")},[t,a]),b=(0,n.useCallback)(async e=>{e.stopPropagation();try{await navigator.clipboard.writeText(a),alert("Copied to clipboard!: "+a)}catch(e){console.error("Failed to copy text: ",e)}},[a]),y=(0,n.useCallback)(e=>{e.stopPropagation(),h()},[h]),j=(0,n.useCallback)(()=>p.get("source")!==a,[p,a]),v=(0,n.useMemo)(()=>({backgroundColor:l||"#FFF"}),[l]);return(0,s.jsxs)("div",{className:"\n        flex flex-col bg-white \n        transition-all duration-250 ease-in-out\n        ".concat(r?"shadow-[0_14px_28px_rgba(0,0,0,0.25),_0_10px_10px_rgba(0,0,0,0.22)]":"shadow-[0_3px_6px_rgba(0,0,0,0.16),_0_3px_6px_rgba(0,0,0,0.23)]","\n        border-0 border-solid border-[#bbb]\n        text-[10pt]\n      "),children:[(0,s.jsxs)("div",{className:"relative py-2 px-3 flex items-center justify-between",style:v,children:[(0,s.jsx)("div",{className:"flex-grow mr-2 overflow-hidden text-ellipsis",children:i?(0,s.jsx)("span",{className:"cursor-pointer hover:underline",onClick:f,title:a,children:a}):(0,s.jsx)("span",{title:a,children:a})}),(0,s.jsxs)("div",{className:"flex-shrink-0 flex items-center",children:[(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)("button",{className:"p-1 rounded-full hover:bg-gray-200 focus:outline-none",onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:(0,s.jsx)(d.G,{icon:u.iV1})}),x&&(0,s.jsx)("div",{className:"absolute right-0 top-0 bg-white rounded-md shadow-lg z-10 whitespace-nowrap",style:{transform:"translate(5%, -90%)"},onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:(0,s.jsx)("div",{className:"py-1",children:(0,s.jsxs)("button",{onClick:b,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",title:"Copy table name",children:[(0,s.jsx)(d.G,{icon:m.kZ_,className:"mr-2"}),"Copy table name"]})})})]}),j()&&(0,s.jsx)("button",{onClick:y,className:"p-1 ml-2 rounded-full hover:bg-gray-200 focus:outline-none",title:"Hide node",children:(0,s.jsx)(d.G,{icon:u.NBC})})]})]}),(0,s.jsx)("div",{className:"",children:c})]})}),x=a(20357),g=e=>{let{schema:t,tableName:a,nodeColumns:o,handlePlusClickEventNodeHandle:r}=e,[l,i]=(0,n.useState)(!1),[c,h]=(0,n.useState)(!1),[m,p]=(0,n.useState)([]),[g,f]=(0,n.useState)(null),b=(0,n.useRef)(null),y=(0,n.useRef)(null),j=(0,n.useCallback)(async()=>{if(!(m.length>0)&&!l){i(!0);try{let e=new URLSearchParams({schema:t,source:a}),s=x.env.NEXT_PUBLIC_API_HOSTNAME||"",n=await fetch("".concat(s,"/api/v1/columns?").concat(e)),r=await n.json(),l=new Set(o.map(e=>e.toLowerCase())),i=r.filter(e=>!l.has(e.value.toLowerCase()));p(i)}catch(e){console.error("Error fetching columns:",e)}finally{i(!1)}}},[t,a,o,l,i]),v=(0,n.useCallback)(()=>{h(e=>{let t=!e;return t&&j(),t})},[j]),w=(0,n.useCallback)(async e=>{!l&&(await r(e.value,"source"),p(t=>t.filter(t=>t.value!==e.value)),y.current&&f(y.current.offsetWidth))},[l,r]);return(0,n.useEffect)(()=>{y.current&&f(y.current.offsetWidth)},[]),(0,s.jsxs)("div",{ref:y,children:[(0,s.jsx)("div",{className:"mt-2 border-t pt-2 flex justify-center",children:(0,s.jsx)("button",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-gray-200 hover:bg-gray-300 focus:outline-none",onClick:v,"aria-label":c?"Collapse columns":"Expand columns",children:(0,s.jsx)(d.G,{icon:c?u.mTx:u.ptq,className:"text-gray-600"})})}),c&&g&&(0,s.jsx)("div",{ref:b,className:"mt-2 max-h-60 overflow-y-auto pr-4 scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200",style:{width:"".concat(g,"px")},onWheel:e=>e.stopPropagation(),children:l?(0,s.jsx)("p",{className:"text-center",children:"Loading columns..."}):m.length>0?(0,s.jsx)("ul",{className:"list-none p-0 m-0",children:m.map(e=>(0,s.jsxs)("li",{className:"flex flex-col relative cursor-pointer hover:bg-gray-100 transition-colors duration-200 py-2 px-6",onClick:()=>w(e),children:[(0,s.jsx)("span",{className:"hover:underline flex-grow truncate",children:e.label}),e.description&&(0,s.jsx)("span",{className:"text-xs text-gray-500 mt-1 truncate",title:e.description,children:e.description})]},e.value))}):(0,s.jsx)("p",{className:"text-center text-gray-500",children:"All columns have been selected."})})]})},f=(0,n.memo)(e=>{let{type:t,position:a,id:o,isConnectable:n,nodeId:i,onConnect:c,onDelete:h}=e,m=(0,r.oR)(e=>e.edges),p=(0,l.o)(e=>e.loading),x=m.some(e=>"target"===t&&e.target===i&&e.targetHandle===o||"source"===t&&e.source===i&&e.sourceHandle===o),g={position:"absolute",top:"22px",transform:"translateY(-50%)",...a===r.Ly.Left?{left:"-2px"}:{right:"-2px"},zIndex:1};return(0,s.jsxs)("div",{style:g,children:[(0,s.jsx)(r.HH,{type:t,position:a,id:o,isConnectable:n,style:{opacity:0,width:"24px",height:"24px",background:"transparent",border:"none"}}),h&&(0,s.jsx)("button",{className:"w-6 h-6 flex items-center justify-center bg-white rounded-full border border-gray-300 hover:bg-gray-100 focus:outline-none",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",pointerEvents:"auto",cursor:"source"===t&&x?"pointer":"default"},onClick:e=>{p||(e.stopPropagation(),"source"===t&&x&&h?h():!x&&c&&c())},children:"source"===t&&x&&h?(0,s.jsx)(d.G,{icon:u.Kl4,className:"text-gray-600"}):!x&&c?(0,s.jsx)(d.G,{icon:p?u.LM3:u.r8p,spinPulse:p,className:"text-gray-600"}):(0,s.jsx)("span",{className:"w-4 h-4"})})]})});let b=e=>{let{data:t,id:a,selected:o}=e,{addSingleLineage:i,addReverseLineage:d,hideNode:u,hideTableAndRelatedEdges:m,hideColumnAndRelatedEdges:x,lastNodeColumns:b,lastNodeTable:y,firstNodeColumns:j,firstNodeTable:v}=c(a),w=(0,l.o)(e=>e.options),N=(0,l.o)(e=>e.showColumn),C=(0,n.useCallback)((e,a)=>{e.stopPropagation();let{schema:s,name:o}=t,n=JSON.stringify({[o]:[a.toLowerCase()]}),r=new URLSearchParams({schema:s,sources:o,activeSource:o,selectedColumns:n});window.open("/cte?".concat(r.toString()),"_blank")},[t]),k=(0,n.useCallback)(async(e,s)=>{"target"===s?await d(a,t.name,e):"source"===s&&await i(t.name,e)},[d,i,a,t.name]),_=(0,n.useCallback)(e=>{N?x(a,e):m(a)},[N,x,m,a]);return N?(0,s.jsx)(p,{schema:t.schema,tableName:t.name,selected:o,color:"incremental"===t.materialized?"#ADD8E6":"Lavender",hideNode:u,isClickableTableName:!1,content:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[v!=t.name&&(0,s.jsx)(f,{type:"source",position:r.Ly.Left,id:"".concat(a,"__source"),isConnectable:!0,nodeId:a}),y!=t.name&&(0,s.jsx)(f,{type:"target",position:r.Ly.Right,id:"".concat(a,"__target"),isConnectable:!0,nodeId:a})]}),(0,s.jsxs)("div",{className:"py-2 px-0",children:[t.columns.map(e=>(0,s.jsxs)("div",{className:"flex items-center relative",style:{position:"relative",padding:"8px 16px",flexGrow:1,textAlign:"left",paddingRight:"24px",paddingLeft:"24px"},children:[(0,s.jsx)("p",{className:"cursor-pointer hover:underline flex-grow",onClick:t=>C(t,e),children:e}),!t.last&&!j.includes(e)&&(0,s.jsx)(h,{type:"source",position:"LR"===w.rankdir?r.Ly.Right:r.Ly.Left,id:"".concat(e,"__source"),isConnectable:!0,nodeId:a,onDelete:()=>_(e),onConnect:()=>k(e,"source")}),!t.first&&!b.includes(e)&&(0,s.jsx)(h,{type:"target",position:"LR"===w.rankdir?r.Ly.Left:r.Ly.Right,id:"".concat(e,"__target"),isConnectable:!0,nodeId:a,onDelete:()=>_(e),onConnect:()=>k(e,"target")})]},"i-"+e)),(0,s.jsx)(g,{schema:t.schema,tableName:t.name,nodeColumns:t.columns,handlePlusClickEventNodeHandle:k})]})]})}):(0,s.jsx)(p,{schema:t.schema,tableName:t.name,selected:o,color:"incremental"===t.materialized?"#ADD8E6":"Lavender",hideNode:u,isClickableTableName:!0,content:(0,s.jsxs)(s.Fragment,{children:[v!=t.name&&(0,s.jsx)(f,{type:"source",position:r.Ly.Left,id:"".concat(a,"__source"),isConnectable:!0,nodeId:a,onConnect:()=>k("","source"),onDelete:_}),y!=t.name&&(0,s.jsx)(f,{type:"target",position:r.Ly.Right,id:"".concat(a,"__target"),isConnectable:!0,nodeId:a,onConnect:()=>k("","target"),onDelete:_})]})})};var y=a(27289),j=a(63775),v=a(50197);a(10715);var w=a(29820),N=a.n(w);let C=(e,t,a)=>{let s=new(N()).graphlib.Graph;return s.setDefaultEdgeLabel(()=>({})),s.setGraph(a),t.forEach(e=>s.setEdge(e.source,e.target)),e.forEach(e=>s.setNode(e.id,{label:e.id,width:e.width,height:e.height})),N().layout(s),e.forEach(e=>{let t=s.node(e.id);switch(a.rankdir){case"TB":e.targetPosition=r.Ly.Top,e.sourcePosition=r.Ly.Bottom;break;case"BT":e.targetPosition=r.Ly.Bottom,e.sourcePosition=r.Ly.Top;break;case"LR":e.targetPosition=r.Ly.Left,e.sourcePosition=r.Ly.Right;break;case"RL":e.targetPosition=r.Ly.Right,e.sourcePosition=r.Ly.Left}return e.position={x:t.x-t.width/2+Math.random()/1e3,y:t.y-t.height/2},e}),{nodes:e,edges:t}},k=e=>{let{setNodes:t,setEdges:a,setViewIsFit:i,nodesPositioned:c,setNodesPositioned:h}=e,{fitView:m}=(0,r._K)(),p=(0,r.oR)(e=>e.nodeInternals),x=Array.from(p.values()),g=(0,r.oR)(e=>e.edges),f=(0,r.oR)(e=>e.transform),b=(0,l.o)(e=>e.options),y=(0,l.o)(e=>e.sidebarActive),j=(0,l.o)(e=>e.setSidebarActive),v=(0,o.useRouter)();return(0,n.useCallback)((e,t)=>{let a=new URLSearchParams({schema:e.data.schema,source:e.data.name,column:t});v.push("/cte?".concat(a.toString()))},[p]),(0,n.useEffect)(()=>{try{var e;if((null===(e=x[0])||void 0===e?void 0:e.width)&&x.length>0&&!c){let e=C(x,g,b);console.log("redraw",e),t(e.nodes),a(e.edges),h(!0),window.requestAnimationFrame(()=>{setTimeout(()=>m(),0)}),i(!0)}}catch(e){console.log("error",e)}},[c,x]),(0,s.jsxs)("div",{className:"bg-white drop-shadow-md "+(y?"w-1/6":"w-5"),children:[(0,s.jsx)("div",{className:"px-1",onClick:()=>j(!y),children:(0,s.jsx)(d.G,{icon:y?u.yOZ:u.EyR,className:"h-[20px]"})}),y&&(0,s.jsxs)("div",{className:"px-2 text-sm",children:[(0,s.jsx)("div",{className:"py-1 font-semibold text-base",children:"Zoom & pan transform"}),(0,s.jsxs)("div",{className:"transform break-words",children:["[",f[0].toFixed(2),", ",f[1].toFixed(2),", ",f[2].toFixed(2),"]"]}),(0,s.jsx)("div",{className:"py-1 font-semibold text-base",children:"Nodes"}),x.map(e=>(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium break-words",children:e.data.name}),(0,s.jsxs)("div",{children:["x: ",e.position.x.toFixed(2),", y: ",e.position.y.toFixed(2)]})]},e.id))]})]})};var _=a(37215),L=()=>{let{getEdges:e,setEdges:t}=(0,r._K)(),a=(0,l.o)(e=>e.showColumn),o=(0,l.o)(e=>e.setShowColumn),i=(0,l.o)(e=>e.setClearNodePosition),c=(0,l.o)(e=>e.columnModeEdges),h=(0,l.o)(e=>e.setColumnModeEdges),m=(0,l.o)(e=>e.setRightMaxDepth),[p,x]=(0,n.useState)("column"),g=[{id:"table",icon:u.B3e,label:"Table"},{id:"column",icon:u.rWw,label:"Column"}];(0,n.useEffect)(()=>{x(a?"column":"table")},[a]);let f=(0,n.useCallback)(a=>{let s="column"===a;o(s);let n=e();if(s){let e=n.map(e=>({...e,fixed:!0,style:{...e.style,strokeDasharray:"5,5",strokeWidth:1.5}}));t(c.concat(e)),m(!1)}else{h(n.filter(e=>!e.fixed));let e=new Map;n.forEach(t=>{let a=t.source,s=t.target,o="".concat(a,"-").concat(s);e.has(o)||e.set(o,{id:o,source:a,target:s,sourceHandle:"".concat(a,"__source"),targetHandle:"".concat(s,"__target")})}),t(Array.from(e.values()))}i(!0)},[e,t,o,i,c]);return(0,s.jsx)("div",{className:"inline-flex rounded-md shadow-sm",role:"group",children:g.map(e=>(0,s.jsxs)("button",{type:"button",className:"px-4 py-2 text-sm font-medium border ".concat(p===e.id?"bg-blue-500 text-white border-blue-600":"bg-white text-gray-700 border-gray-200 hover:bg-gray-50"," ").concat(e.id===g[0].id?"rounded-l-lg":e.id===g[g.length-1].id?"rounded-r-lg":""),onClick:()=>f(e.id),children:[(0,s.jsx)(d.G,{icon:e.icon,className:"mr-2"}),e.label]},e.id))})},S=a(20357);let P=()=>{let{height:e,width:t}=(0,y.Y)(),[a,i]=(0,r.Rr)([]),[c,d]=(0,r.ll)([]),[u,h]=(0,n.useState)(!1),[m,p]=(0,n.useState)(!0),x=(0,l.o)(e=>e.sidebarActive);(0,l.o)(e=>e.options);let g=(0,l.o)(e=>e.setOptions),f=(0,l.o)(e=>e.clearNodePosition),w=(0,l.o)(e=>e.setClearNodePosition),N=(0,l.o)(e=>e.leftMaxDepth),C=(0,l.o)(e=>e.setLeftMaxDepth),P=(0,l.o)(e=>e.rightMaxDepth),E=(0,l.o)(e=>e.setRightMaxDepth),M=(0,l.o)(e=>e.showColumn),R=(0,o.useSearchParams)(),A=(0,n.useCallback)(async e=>{let{sources:t,columns:a,showColumn:s,depth:o}=e;i([]),d([]);let n=new URLSearchParams({sources:t.join(","),columns:JSON.stringify(a),show_column:s});Number.isNaN(o)?s?n.append("depth","-1"):n.append("depth","1"):n.set("depth",o.toString());let r=S.env.NEXT_PUBLIC_API_HOSTNAME||"",l=await fetch("".concat(r,"/api/v1/lineage?").concat(n)),c=await l.json();return 200!=l.status?(alert(c.error),!1):(i(c.nodes),d(c.edges),p(!1),!0)},[R]);(0,n.useCallback)(async e=>{g({rankdir:e}),p(!1)},[R]);let D=(0,n.useCallback)(e=>i(t=>(0,r.Fb)(e,t)),[i]),H=(0,n.useCallback)(e=>d(t=>(0,r.yn)(e,t)),[d]),T=(0,n.useCallback)(e=>d(t=>(0,r.Z_)(e,t)),[d]);(0,n.useEffect)(()=>{f&&(w(!1),setTimeout(()=>p(!1),100))},[f]),(0,n.useEffect)(()=>{p(!1)},[x]),(0,n.useEffect)(()=>{g({rankdir:"RL"})},[]);let I=(0,n.useMemo)(()=>({eventNode:e=>(0,s.jsx)(b,{...e})}),[]);return(0,s.jsxs)("div",{children:[(0,s.jsx)(_.h,{handleFetchData:A}),(0,s.jsx)("div",{className:"flex flex-wrap",children:(0,s.jsxs)(r.tV,{children:[(0,s.jsx)("div",{className:x?"w-5/6":"w-[calc(100%-20px)]",style:{height:e-55},children:(0,s.jsxs)(r.x$,{nodes:a,edges:c,onNodesChange:D,onEdgesChange:H,onConnect:T,nodeTypes:I,children:[(0,s.jsxs)(r.s_,{position:"top-left",children:[(0,s.jsx)("div",{className:"App",children:(0,s.jsx)(L,{})}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{id:"leftMaxDepth",type:"checkbox",checked:N,onChange:()=>C(!N),className:"form-checkbox h-5 w-5 text-blue-600 rounded"}),(0,s.jsx)("label",{htmlFor:"leftMaxDepth",children:(0,s.jsx)("span",{className:"ml-2 text-gray-700",children:"max depth for left (+) button"})})]}),!0!=M&&(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{id:"rightMaxDepth",type:"checkbox",checked:P,onChange:()=>E(!P),className:"form-checkbox h-5 w-5 text-blue-600 rounded"}),(0,s.jsx)("label",{htmlFor:"rightMaxDepth",children:(0,s.jsx)("span",{className:"ml-2 text-gray-700",children:"max depth for right (+) button"})})]})]}),(0,s.jsx)(j.Z,{}),(0,s.jsx)(v.A,{style:{backgroundColor:"#f5f5f5"}})]})}),(0,s.jsx)(k,{setNodes:i,setEdges:d,setViewIsFit:h,setNodesPositioned:p,nodesPositioned:m})]})})]})}}},function(e){e.O(0,[489,676,780,237,49,971,23,744],function(){return e(e.s=38127)}),_N_E=e.O()}]);