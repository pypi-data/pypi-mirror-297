const __vite__fileDeps=["./module.zMBilgLc.js","./module.C-VadMaF.js","./2.BTHvNncS.js","./preload-helper.D6kgxu3v.js","./scheduler.xQsDa6L3.js","./index.lnKugwF0.js","./entry.Br8KHvZB.js","./stores.CuobX2VM.js","../assets/2.BB4aO6Br.css","./module.niXGEr8P.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{s as De,e as z,c as L,b as O,f as y,p as B,i as H,n as ke,y as $e,z as ge,Q as Tt,t as ae,d as ue,Z as Xe,h as R,j as fe,r as V,a as j,g as q,F as he,L as ie,R as It,J as et,T as Se,E as tt,x as it,O as Mt,M as pe,l as St,u as At,m as Bt,o as Pt,K as U,N as zt,B as gt}from"./scheduler.xQsDa6L3.js";import{S as Re,i as Te,f as ne,c as G,a as K,m as Q,t as M,b as S,d as Y,g as ye,e as Ee}from"./index.lnKugwF0.js";import{f as nt,y as be,p as Lt,B as bt,d as vt,b as wt,e as pt}from"./2.BTHvNncS.js";import{s as ot,W as Ct,p as st,a as xe,A as Ut,S as Ot}from"./StaticAudio.CF2sFxuF.js";import{_ as rt}from"./preload-helper.D6kgxu3v.js";import{U as Nt}from"./Upload.ClncYcC5.js";import{M as kt}from"./ModifyUpload.DK_-IRb9.js";import{B as Vt}from"./BlockLabel.DkJW14QK.js";import{M as Ht}from"./Music.ww8JRczV.js";import{a as jt,S as qt}from"./SelectSource.N3PHdQIM.js";import{StreamingBar as Ft}from"./index.D0eHcLQ6.js";import{P as Jt}from"./Trim.DWkxzAmU.js";import{U as Gt}from"./UploadText.B_71wsln.js";import{default as Yi}from"./Example.C8krYMtY.js";function We(n,e,t,i){return new(t||(t=Promise))(function(o,s){function a(f){try{r(i.next(f))}catch(l){s(l)}}function u(f){try{r(i.throw(f))}catch(l){s(l)}}function r(f){var l;f.done?o(f.value):(l=f.value,l instanceof t?l:new t(function(_){_(l)})).then(a,u)}r((i=i.apply(n,[])).next())})}class Kt{constructor(){this.listeners={},this.on=this.addEventListener,this.un=this.removeEventListener}addEventListener(e,t,i){if(this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t),i==null?void 0:i.once){const o=()=>{this.removeEventListener(e,o),this.removeEventListener(e,t)};return this.addEventListener(e,o),o}return()=>this.removeEventListener(e,t)}removeEventListener(e,t){var i;(i=this.listeners[e])===null||i===void 0||i.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach(i=>i(...t))}}class Qt extends Kt{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}}const Yt=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];class Ie extends Qt{constructor(e){var t;super(Object.assign(Object.assign({},e),{audioBitsPerSecond:(t=e.audioBitsPerSecond)!==null&&t!==void 0?t:128e3})),this.stream=null,this.mediaRecorder=null}static create(e){return new Ie(e||{})}renderMicStream(e){const t=new AudioContext,i=t.createMediaStreamSource(e),o=t.createAnalyser();i.connect(o);const s=o.frequencyBinCount,a=new Float32Array(s),u=s/t.sampleRate;let r;const f=()=>{o.getFloatTimeDomainData(a),this.wavesurfer&&(this.wavesurfer.options.cursorWidth=0,this.wavesurfer.options.interact=!1,this.wavesurfer.load("",[a],u)),r=requestAnimationFrame(f)};return f(),()=>{cancelAnimationFrame(r),i==null||i.disconnect(),t==null||t.close()}}startMic(e){return We(this,void 0,void 0,function*(){let t;try{t=yield navigator.mediaDevices.getUserMedia({audio:!(e!=null&&e.deviceId)||{deviceId:e.deviceId}})}catch(o){throw new Error("Error accessing the microphone: "+o.message)}const i=this.renderMicStream(t);return this.subscriptions.push(this.once("destroy",i)),this.stream=t,t})}stopMic(){this.stream&&(this.stream.getTracks().forEach(e=>e.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(e){return We(this,void 0,void 0,function*(){const t=this.stream||(yield this.startMic(e)),i=this.mediaRecorder||new MediaRecorder(t,{mimeType:this.options.mimeType||Yt.find(s=>MediaRecorder.isTypeSupported(s)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=i,this.stopRecording();const o=[];i.ondataavailable=s=>{s.data.size>0&&o.push(s.data)},i.onstop=()=>{var s;const a=new Blob(o,{type:i.mimeType});this.emit("record-end",a),this.options.renderRecordedAudio!==!1&&((s=this.wavesurfer)===null||s===void 0||s.load(URL.createObjectURL(a)))},i.start(),this.emit("record-start")})}isRecording(){var e;return((e=this.mediaRecorder)===null||e===void 0?void 0:e.state)==="recording"}isPaused(){var e;return((e=this.mediaRecorder)===null||e===void 0?void 0:e.state)==="paused"}stopRecording(){var e;this.isRecording()&&((e=this.mediaRecorder)===null||e===void 0||e.stop())}pauseRecording(){var e;this.isRecording()&&((e=this.mediaRecorder)===null||e===void 0||e.pause(),this.emit("record-pause"))}resumeRecording(){var e;this.isPaused()&&((e=this.mediaRecorder)===null||e===void 0||e.resume(),this.emit("record-resume"))}static getAvailableAudioDevices(){return We(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(e=>e.filter(t=>t.kind==="audioinput"))})}destroy(){super.destroy(),this.stopRecording(),this.stopMic()}}function lt(n,e,t){const i=n.slice();return i[3]=e[t],i}function Zt(n){let e,t=nt(n[0]),i=[];for(let o=0;o<t.length;o+=1)i[o]=at(lt(n,t,o));return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=ge()},l(o){for(let s=0;s<i.length;s+=1)i[s].l(o);e=ge()},m(o,s){for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(o,s);H(o,e,s)},p(o,s){if(s&1){t=nt(o[0]);let a;for(a=0;a<t.length;a+=1){const u=lt(o,t,a);i[a]?i[a].p(u,s):(i[a]=at(u),i[a].c(),i[a].m(e.parentNode,e))}for(;a<i.length;a+=1)i[a].d(1);i.length=t.length}},d(o){o&&y(e),Tt(i,o)}}}function Wt(n){let e,t=n[1]("audio.no_microphone")+"",i;return{c(){e=z("option"),i=ae(t),this.h()},l(o){e=L(o,"OPTION",{});var s=O(e);i=ue(s,t),s.forEach(y),this.h()},h(){e.__value="",Xe(e,e.__value)},m(o,s){H(o,e,s),R(e,i)},p(o,s){s&2&&t!==(t=o[1]("audio.no_microphone")+"")&&fe(i,t)},d(o){o&&y(e)}}}function at(n){let e,t=n[3].label+"",i,o;return{c(){e=z("option"),i=ae(t),this.h()},l(s){e=L(s,"OPTION",{});var a=O(e);i=ue(a,t),a.forEach(y),this.h()},h(){e.__value=o=n[3].deviceId,Xe(e,e.__value)},m(s,a){H(s,e,a),R(e,i)},p(s,a){a&1&&t!==(t=s[3].label+"")&&fe(i,t),a&1&&o!==(o=s[3].deviceId)&&(e.__value=o,Xe(e,e.__value))},d(s){s&&y(e)}}}function Xt(n){let e,t;function i(a,u){return a[0].length===0?Wt:Zt}let o=i(n),s=o(n);return{c(){e=z("select"),s.c(),this.h()},l(a){e=L(a,"SELECT",{class:!0,"aria-label":!0});var u=O(e);s.l(u),u.forEach(y),this.h()},h(){B(e,"class","mic-select svelte-8c6syi"),B(e,"aria-label","Select input device"),e.disabled=t=n[0].length===0},m(a,u){H(a,e,u),s.m(e,null)},p(a,[u]){o===(o=i(a))&&s?s.p(a,u):(s.d(1),s=o(a),s&&(s.c(),s.m(e,null))),u&1&&t!==(t=a[0].length===0)&&(e.disabled=t)},i:ke,o:ke,d(a){a&&y(e),s.d()}}}function xt(n,e,t){let{i18n:i}=e,{micDevices:o=[]}=e;const s=$e();return n.$$set=a=>{"i18n"in a&&t(1,i=a.i18n),"micDevices"in a&&t(0,o=a.micDevices)},n.$$.update=()=>{if(n.$$.dirty&2&&typeof window<"u")try{let a=[];Ie.getAvailableAudioDevices().then(u=>{t(0,o=u),u.forEach(r=>{r.deviceId&&a.push(r)}),t(0,o=a)})}catch(a){throw a instanceof DOMException&&a.name=="NotAllowedError"&&s("error",i("audio.allow_recording_access")),a}},[o,i]}class yt extends Re{constructor(e){super(),Te(this,e,xt,Xt,De,{i18n:1,micDevices:0})}}function ut(n){let e,t;return{c(){e=z("time"),t=ae(n[2]),this.h()},l(i){e=L(i,"TIME",{class:!0});var o=O(e);t=ue(o,n[2]),o.forEach(y),this.h()},h(){B(e,"class","duration-button duration svelte-1u00rfr")},m(i,o){H(i,e,o),R(e,t)},p(i,o){o&4&&fe(t,i[2])},d(i){i&&y(e)}}}function $t(n){let e,t,i,o=n[1]("audio.record")+"",s,a,u,r=n[1]("audio.stop")+"",f,l,_,m,b=n[1]("audio.stop")+"",A,E,c,d,p,w,F=n[1]("audio.resume")+"",T,N,X,Z,D,W,oe,re;d=new Jt({});let C=n[4]&&!n[3]&&ut(n);function ve(I){n[21](I)}let le={i18n:n[1]};return n[5]!==void 0&&(le.micDevices=n[5]),Z=new yt({props:le}),V.push(()=>ne(Z,"micDevices",ve)),{c(){e=z("div"),t=z("div"),i=z("button"),s=ae(o),a=j(),u=z("button"),f=ae(r),_=j(),m=z("button"),A=ae(b),E=j(),c=z("button"),G(d.$$.fragment),p=j(),w=z("button"),T=ae(F),N=j(),C&&C.c(),X=j(),G(Z.$$.fragment),this.h()},l(I){e=L(I,"DIV",{class:!0});var k=O(e);t=L(k,"DIV",{class:!0});var P=O(t);i=L(P,"BUTTON",{class:!0});var x=O(i);s=ue(x,o),x.forEach(y),a=q(P),u=L(P,"BUTTON",{class:!0});var $=O(u);f=ue($,r),$.forEach(y),_=q(P),m=L(P,"BUTTON",{id:!0,class:!0});var de=O(m);A=ue(de,b),de.forEach(y),E=q(P),c=L(P,"BUTTON",{"aria-label":!0,class:!0});var te=O(c);K(d.$$.fragment,te),te.forEach(y),p=q(P),w=L(P,"BUTTON",{class:!0});var v=O(w);T=ue(v,F),v.forEach(y),N=q(P),C&&C.l(P),P.forEach(y),X=q(k),K(Z.$$.fragment,k),k.forEach(y),this.h()},h(){B(i,"class","record record-button svelte-1u00rfr"),B(u,"class",l="stop-button "+(n[0].isPaused()?"stop-button-paused":"")+" svelte-1u00rfr"),B(m,"id","stop-paused"),B(m,"class","stop-button-paused svelte-1u00rfr"),B(c,"aria-label","pause"),B(c,"class","pause-button svelte-1u00rfr"),B(w,"class","resume-button svelte-1u00rfr"),B(t,"class","wrapper svelte-1u00rfr"),B(e,"class","controls svelte-1u00rfr")},m(I,k){H(I,e,k),R(e,t),R(t,i),R(i,s),n[11](i),R(t,a),R(t,u),R(u,f),n[13](u),R(t,_),R(t,m),R(m,A),n[15](m),R(t,E),R(t,c),Q(d,c,null),n[17](c),R(t,p),R(t,w),R(w,T),n[19](w),R(t,N),C&&C.m(t,null),R(e,X),Q(Z,e,null),W=!0,oe||(re=[he(i,"click",n[12]),he(u,"click",n[14]),he(m,"click",n[16]),he(c,"click",n[18]),he(w,"click",n[20])],oe=!0)},p(I,[k]){(!W||k&2)&&o!==(o=I[1]("audio.record")+"")&&fe(s,o),(!W||k&2)&&r!==(r=I[1]("audio.stop")+"")&&fe(f,r),(!W||k&1&&l!==(l="stop-button "+(I[0].isPaused()?"stop-button-paused":"")+" svelte-1u00rfr"))&&B(u,"class",l),(!W||k&2)&&b!==(b=I[1]("audio.stop")+"")&&fe(A,b),(!W||k&2)&&F!==(F=I[1]("audio.resume")+"")&&fe(T,F),I[4]&&!I[3]?C?C.p(I,k):(C=ut(I),C.c(),C.m(t,null)):C&&(C.d(1),C=null);const P={};k&2&&(P.i18n=I[1]),!D&&k&32&&(D=!0,P.micDevices=I[5],ie(()=>D=!1)),Z.$set(P)},i(I){W||(M(d.$$.fragment,I),M(Z.$$.fragment,I),W=!0)},o(I){S(d.$$.fragment,I),S(Z.$$.fragment,I),W=!1},d(I){I&&y(e),n[11](null),n[13](null),n[15](null),Y(d),n[17](null),n[19](null),C&&C.d(),Y(Z),oe=!1,It(re)}}}function ei(n,e,t){let{record:i}=e,{i18n:o}=e,s=[],a,u,r,f,l,{record_time:_}=e,{show_recording_waveform:m}=e,{timing:b=!1}=e;function A(D){V[D?"unshift":"push"](()=>{a=D,t(6,a),t(0,i)})}const E=()=>i.startRecording();function c(D){V[D?"unshift":"push"](()=>{f=D,t(9,f),t(0,i)})}const d=()=>{i.isPaused()&&(i.resumeRecording(),i.stopRecording()),i.stopRecording()};function p(D){V[D?"unshift":"push"](()=>{l=D,t(10,l),t(0,i)})}const w=()=>{i.isPaused()&&(i.resumeRecording(),i.stopRecording()),i.stopRecording()};function F(D){V[D?"unshift":"push"](()=>{u=D,t(7,u),t(0,i)})}const T=()=>i.pauseRecording();function N(D){V[D?"unshift":"push"](()=>{r=D,t(8,r),t(0,i)})}const X=()=>i.resumeRecording();function Z(D){s=D,t(5,s)}return n.$$set=D=>{"record"in D&&t(0,i=D.record),"i18n"in D&&t(1,o=D.i18n),"record_time"in D&&t(2,_=D.record_time),"show_recording_waveform"in D&&t(3,m=D.show_recording_waveform),"timing"in D&&t(4,b=D.timing)},n.$$.update=()=>{n.$$.dirty&1&&i.on("record-start",()=>{i.startMic(),t(6,a.style.display="none",a),t(9,f.style.display="flex",f),t(7,u.style.display="block",u)}),n.$$.dirty&1&&i.on("record-end",()=>{i.isPaused()&&(i.resumeRecording(),i.stopRecording()),i.stopMic(),t(6,a.style.display="flex",a),t(9,f.style.display="none",f),t(7,u.style.display="none",u),t(6,a.disabled=!1,a)}),n.$$.dirty&1&&i.on("record-pause",()=>{t(7,u.style.display="none",u),t(8,r.style.display="block",r),t(9,f.style.display="none",f),t(10,l.style.display="flex",l)}),n.$$.dirty&1&&i.on("record-resume",()=>{t(7,u.style.display="block",u),t(8,r.style.display="none",r),t(6,a.style.display="none",a),t(9,f.style.display="flex",f),t(10,l.style.display="none",l)})},[i,o,_,m,b,s,a,u,r,f,l,A,E,c,d,p,w,F,T,N,X,Z]}class ti extends Re{constructor(e){super(),Te(this,e,ei,$t,De,{record:0,i18n:1,record_time:2,show_recording_waveform:3,timing:4})}}function ft(n){let e,t,i="0:00",o,s,a,u=n[0]==="edit"&&n[16]>0&&_t(n);function r(_,m){return _[15]?ni:ii}let f=r(n),l=f(n);return{c(){e=z("div"),t=z("time"),t.textContent=i,o=j(),s=z("div"),u&&u.c(),a=j(),l.c(),this.h()},l(_){e=L(_,"DIV",{class:!0});var m=O(e);t=L(m,"TIME",{class:!0,"data-svelte-h":!0}),Se(t)!=="svelte-1rda9am"&&(t.textContent=i),o=q(m),s=L(m,"DIV",{});var b=O(s);u&&u.l(b),a=q(b),l.l(b),b.forEach(y),m.forEach(y),this.h()},h(){B(t,"class","time svelte-1z0uz8p"),B(e,"class","timestamps svelte-1z0uz8p")},m(_,m){H(_,e,m),R(e,t),n[22](t),R(e,o),R(e,s),u&&u.m(s,null),R(s,a),l.m(s,null)},p(_,m){_[0]==="edit"&&_[16]>0?u?u.p(_,m):(u=_t(_),u.c(),u.m(s,a)):u&&(u.d(1),u=null),f===(f=r(_))&&l?l.p(_,m):(l.d(1),l=f(_),l&&(l.c(),l.m(s,null)))},d(_){_&&y(e),n[22](null),u&&u.d(),l.d()}}}function _t(n){let e,t=be(n[16])+"",i;return{c(){e=z("time"),i=ae(t),this.h()},l(o){e=L(o,"TIME",{class:!0});var s=O(e);i=ue(s,t),s.forEach(y),this.h()},h(){B(e,"class","trim-duration svelte-1z0uz8p")},m(o,s){H(o,e,s),R(e,i)},p(o,s){s[0]&65536&&t!==(t=be(o[16])+"")&&fe(i,t)},d(o){o&&y(e)}}}function ii(n){let e,t="0:00";return{c(){e=z("time"),e.textContent=t,this.h()},l(i){e=L(i,"TIME",{class:!0,"data-svelte-h":!0}),Se(e)!=="svelte-1llsiqq"&&(e.textContent=t),this.h()},h(){B(e,"class","duration svelte-1z0uz8p")},m(i,o){H(i,e,o),n[23](e)},p:ke,d(i){i&&y(e),n[23](null)}}}function ni(n){let e,t=be(n[14])+"",i;return{c(){e=z("time"),i=ae(t),this.h()},l(o){e=L(o,"TIME",{class:!0});var s=O(e);i=ue(s,t),s.forEach(y),this.h()},h(){B(e,"class","duration svelte-1z0uz8p")},m(o,s){H(o,e,s),R(e,i)},p(o,s){s[0]&16384&&t!==(t=be(o[14])+"")&&fe(i,t)},d(o){o&&y(e)}}}function ct(n){let e,t,i;function o(a){n[24](a)}let s={i18n:n[1],timing:n[15],show_recording_waveform:n[2].show_recording_waveform,record_time:be(n[14])};return n[6]!==void 0&&(s.record=n[6]),e=new ti({props:s}),V.push(()=>ne(e,"record",o)),{c(){G(e.$$.fragment)},l(a){K(e.$$.fragment,a)},m(a,u){Q(e,a,u),i=!0},p(a,u){const r={};u[0]&2&&(r.i18n=a[1]),u[0]&32768&&(r.timing=a[15]),u[0]&4&&(r.show_recording_waveform=a[2].show_recording_waveform),u[0]&16384&&(r.record_time=be(a[14])),!t&&u[0]&64&&(t=!0,r.record=a[6],ie(()=>t=!1)),e.$set(r)},i(a){i||(M(e.$$.fragment,a),i=!0)},o(a){S(e.$$.fragment,a),i=!1},d(a){Y(e,a)}}}function dt(n){let e,t,i,o,s;function a(l){n[25](l)}function u(l){n[26](l)}function r(l){n[27](l)}let f={container:n[10],playing:n[9],audio_duration:n[13],i18n:n[1],editable:n[4],interactive:!0,handle_trim_audio:n[17],show_redo:!0,handle_reset_value:n[3],waveform_options:n[2]};return n[5]!==void 0&&(f.waveform=n[5]),n[16]!==void 0&&(f.trimDuration=n[16]),n[0]!==void 0&&(f.mode=n[0]),e=new Ct({props:f}),V.push(()=>ne(e,"waveform",a)),V.push(()=>ne(e,"trimDuration",u)),V.push(()=>ne(e,"mode",r)),{c(){G(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,_){Q(e,l,_),s=!0},p(l,_){const m={};_[0]&1024&&(m.container=l[10]),_[0]&512&&(m.playing=l[9]),_[0]&8192&&(m.audio_duration=l[13]),_[0]&2&&(m.i18n=l[1]),_[0]&16&&(m.editable=l[4]),_[0]&8&&(m.handle_reset_value=l[3]),_[0]&4&&(m.waveform_options=l[2]),!t&&_[0]&32&&(t=!0,m.waveform=l[5],ie(()=>t=!1)),!i&&_[0]&65536&&(i=!0,m.trimDuration=l[16],ie(()=>i=!1)),!o&&_[0]&1&&(o=!0,m.mode=l[0],ie(()=>o=!1)),e.$set(m)},i(l){s||(M(e.$$.fragment,l),s=!0)},o(l){S(e.$$.fragment,l),s=!1},d(l){Y(e,l)}}}function oi(n){let e,t,i,o,s,a,u,r,f=(n[15]||n[12])&&n[2].show_recording_waveform&&ft(n),l=n[11]&&!n[12]&&ct(n),_=n[5]&&n[12]&&dt(n);return{c(){e=z("div"),t=z("div"),i=j(),o=z("div"),s=j(),f&&f.c(),a=j(),l&&l.c(),u=j(),_&&_.c(),this.h()},l(m){e=L(m,"DIV",{class:!0});var b=O(e);t=L(b,"DIV",{class:!0,"data-testid":!0}),O(t).forEach(y),i=q(b),o=L(b,"DIV",{"data-testid":!0}),O(o).forEach(y),s=q(b),f&&f.l(b),a=q(b),l&&l.l(b),u=q(b),_&&_.l(b),b.forEach(y),this.h()},h(){B(t,"class","microphone svelte-1z0uz8p"),B(t,"data-testid","microphone-waveform"),B(o,"data-testid","recording-waveform"),B(e,"class","component-wrapper svelte-1z0uz8p")},m(m,b){H(m,e,b),R(e,t),n[20](t),R(e,i),R(e,o),n[21](o),R(e,s),f&&f.m(e,null),R(e,a),l&&l.m(e,null),R(e,u),_&&_.m(e,null),r=!0},p(m,b){(m[15]||m[12])&&m[2].show_recording_waveform?f?f.p(m,b):(f=ft(m),f.c(),f.m(e,a)):f&&(f.d(1),f=null),m[11]&&!m[12]?l?(l.p(m,b),b[0]&6144&&M(l,1)):(l=ct(m),l.c(),M(l,1),l.m(e,u)):l&&(ye(),S(l,1,1,()=>{l=null}),Ee()),m[5]&&m[12]?_?(_.p(m,b),b[0]&4128&&M(_,1)):(_=dt(m),_.c(),M(_,1),_.m(e,null)):_&&(ye(),S(_,1,1,()=>{_=null}),Ee())},i(m){r||(M(l),M(_),r=!0)},o(m){S(l),S(_),r=!1},d(m){m&&y(e),n[20](null),n[21](null),f&&f.d(),l&&l.d(),_&&_.d()}}}function si(n,e,t){let{mode:i}=e,{i18n:o}=e,{dispatch_blob:s}=e,{waveform_settings:a}=e,{waveform_options:u={show_recording_waveform:!0}}=e,{handle_reset_value:r}=e,{editable:f=!0}=e,l,_,m=!1,b,A,E,c=null,d,p,w,F=0,T,N=!1,X=0;const Z=()=>{clearInterval(T),T=setInterval(()=>{t(14,F++,F)},1e3)},D=$e();function W(){if(Z(),t(15,N=!0),D("start_recording"),u.show_recording_waveform){let v=A;v&&(v.style.display="block")}}async function oe(v){t(14,F=0),t(15,N=!1),clearInterval(T);try{const se=await v.arrayBuffer(),J=await new AudioContext({sampleRate:a.sampleRate}).decodeAudioData(se);J&&await st(J).then(async _e=>{await s([_e],"change"),await s([_e],"stop_recording")})}catch(se){console.error(se)}}const re=()=>{A&&t(11,A.innerHTML="",A),l!==void 0&&l.destroy(),A&&(l=xe.create({...a,normalize:!1,container:A}),t(6,E=l.registerPlugin(Ie.create())),E.startMic(),E==null||E.on("record-end",oe),E==null||E.on("record-start",W),E==null||E.on("record-pause",()=>{D("pause_recording"),clearInterval(T)}),E==null||E.on("record-end",v=>{t(12,c=URL.createObjectURL(v));const se=A,ce=b;se&&(se.style.display="none"),ce&&c&&(ce.innerHTML="",C())}))},C=()=>{let v=b;!c||!v||t(5,_=xe.create({container:v,url:c,...a}))},ve=async(v,se)=>{t(0,i="edit");const ce=_.getDecodedData();ce&&await st(ce,v,se).then(async J=>{await s([J],"change"),await s([J],"stop_recording"),_.destroy(),C()}),D("edit")};et(()=>{re(),window.addEventListener("keydown",v=>{v.key==="ArrowRight"?ot(_,.1):v.key==="ArrowLeft"&&ot(_,-.1)})});function le(v){V[v?"unshift":"push"](()=>{A=v,t(11,A)})}function I(v){V[v?"unshift":"push"](()=>{b=v,t(10,b)})}function k(v){V[v?"unshift":"push"](()=>{d=v,t(7,d),t(5,_)})}function P(v){V[v?"unshift":"push"](()=>{p=v,t(8,p),t(5,_)})}function x(v){E=v,t(6,E)}function $(v){_=v,t(5,_)}function de(v){X=v,t(16,X)}function te(v){i=v,t(0,i)}return n.$$set=v=>{"mode"in v&&t(0,i=v.mode),"i18n"in v&&t(1,o=v.i18n),"dispatch_blob"in v&&t(18,s=v.dispatch_blob),"waveform_settings"in v&&t(19,a=v.waveform_settings),"waveform_options"in v&&t(2,u=v.waveform_options),"handle_reset_value"in v&&t(3,r=v.handle_reset_value),"editable"in v&&t(4,f=v.editable)},n.$$.update=()=>{n.$$.dirty[0]&64&&(E==null||E.on("record-resume",()=>{Z()})),n.$$.dirty[0]&288&&(_==null||_.on("decode",v=>{t(13,w=v),p&&t(8,p.textContent=be(v),p)})),n.$$.dirty[0]&160&&(_==null||_.on("timeupdate",v=>d&&t(7,d.textContent=be(v),d))),n.$$.dirty[0]&32&&(_==null||_.on("pause",()=>{D("pause"),t(9,m=!1)})),n.$$.dirty[0]&32&&(_==null||_.on("play",()=>{D("play"),t(9,m=!0)})),n.$$.dirty[0]&32&&(_==null||_.on("finish",()=>{D("stop"),t(9,m=!1)}))},[i,o,u,r,f,_,E,d,p,m,b,A,c,w,F,N,X,ve,s,a,le,I,k,P,x,$,de,te]}class ri extends Re{constructor(e){super(),Te(this,e,si,oi,De,{mode:0,i18n:1,dispatch_blob:18,waveform_settings:19,waveform_options:2,handle_reset_value:3,editable:4},null,[-1,-1])}}function mt(n){let e;return{c(){e=z("div"),this.h()},l(t){e=L(t,"DIV",{}),O(e).forEach(y),this.h()},h(){tt(e,"display",n[0]?"block":"none")},m(t,i){H(t,e,i),n[11](e)},p(t,i){i&1&&tt(e,"display",t[0]?"block":"none")},d(t){t&&y(e),n[11](null)}}}function li(n){let e,t,i='<span class="dot"></span>',o,s=n[4]("audio.record")+"",a,u,r;return{c(){e=z("button"),t=z("span"),t.innerHTML=i,o=j(),a=ae(s),this.h()},l(f){e=L(f,"BUTTON",{class:!0});var l=O(e);t=L(l,"SPAN",{class:!0,"data-svelte-h":!0}),Se(t)!=="svelte-1dwz2xe"&&(t.innerHTML=i),o=q(l),a=ue(l,s),l.forEach(y),this.h()},h(){B(t,"class","record-icon"),B(e,"class","record-button svelte-v7r1kv")},m(f,l){H(f,e,l),R(e,t),R(e,o),R(e,a),u||(r=he(e,"click",n[14]),u=!0)},p(f,l){l&16&&s!==(s=f[4]("audio.record")+"")&&fe(a,s)},i:ke,o:ke,d(f){f&&y(e),u=!1,r()}}}function ai(n){let e,t,i,o,s=n[4]("audio.waiting")+"",a,u,r,f;return i=new jt({}),{c(){e=z("button"),t=z("div"),G(i.$$.fragment),o=j(),a=ae(s),this.h()},l(l){e=L(l,"BUTTON",{class:!0});var _=O(e);t=L(_,"DIV",{class:!0});var m=O(t);K(i.$$.fragment,m),m.forEach(y),o=q(_),a=ue(_,s),_.forEach(y),this.h()},h(){B(t,"class","icon svelte-v7r1kv"),B(e,"class","spinner-button svelte-v7r1kv")},m(l,_){H(l,e,_),R(e,t),Q(i,t,null),R(e,o),R(e,a),u=!0,r||(f=he(e,"click",n[13]),r=!0)},p(l,_){(!u||_&16)&&s!==(s=l[4]("audio.waiting")+"")&&fe(a,s)},i(l){u||(M(i.$$.fragment,l),u=!0)},o(l){S(i.$$.fragment,l),u=!1},d(l){l&&y(e),Y(i),r=!1,f()}}}function ui(n){let e,t,i='<span class="pinger"></span> <span class="dot"></span>',o,s=(n[1]?n[4]("audio.pause"):n[4]("audio.stop"))+"",a,u,r,f;return{c(){e=z("button"),t=z("span"),t.innerHTML=i,o=j(),a=ae(s),this.h()},l(l){e=L(l,"BUTTON",{class:!0});var _=O(e);t=L(_,"SPAN",{class:!0,"data-svelte-h":!0}),Se(t)!=="svelte-bla7qm"&&(t.innerHTML=i),o=q(_),a=ue(_,s),_.forEach(y),this.h()},h(){B(t,"class","record-icon"),B(e,"class",u=it(n[1]?"stop-button-paused":"stop-button")+" svelte-v7r1kv")},m(l,_){H(l,e,_),R(e,t),R(e,o),R(e,a),r||(f=he(e,"click",n[12]),r=!0)},p(l,_){_&18&&s!==(s=(l[1]?l[4]("audio.pause"):l[4]("audio.stop"))+"")&&fe(a,s),_&2&&u!==(u=it(l[1]?"stop-button-paused":"stop-button")+" svelte-v7r1kv")&&B(e,"class",u)},i:ke,o:ke,d(l){l&&y(e),r=!1,f()}}}function fi(n){let e,t,i,o,s,a,u,r,f,l=n[5].show_recording_waveform&&mt(n);const _=[ui,ai,li],m=[];function b(c,d){return c[0]&&!c[6]?0:c[0]&&c[6]?1:2}o=b(n),s=m[o]=_[o](n);function A(c){n[15](c)}let E={i18n:n[4]};return n[9]!==void 0&&(E.micDevices=n[9]),u=new yt({props:E}),V.push(()=>ne(u,"micDevices",A)),{c(){e=z("div"),l&&l.c(),t=j(),i=z("div"),s.c(),a=j(),G(u.$$.fragment),this.h()},l(c){e=L(c,"DIV",{class:!0});var d=O(e);l&&l.l(d),t=q(d),i=L(d,"DIV",{class:!0});var p=O(i);s.l(p),a=q(p),K(u.$$.fragment,p),p.forEach(y),d.forEach(y),this.h()},h(){B(i,"class","controls svelte-v7r1kv"),B(e,"class","mic-wrap svelte-v7r1kv")},m(c,d){H(c,e,d),l&&l.m(e,null),R(e,t),R(e,i),m[o].m(i,null),R(i,a),Q(u,i,null),f=!0},p(c,[d]){c[5].show_recording_waveform?l?l.p(c,d):(l=mt(c),l.c(),l.m(e,t)):l&&(l.d(1),l=null);let p=o;o=b(c),o===p?m[o].p(c,d):(ye(),S(m[p],1,1,()=>{m[p]=null}),Ee(),s=m[o],s?s.p(c,d):(s=m[o]=_[o](c),s.c()),M(s,1),s.m(i,a));const w={};d&16&&(w.i18n=c[4]),!r&&d&512&&(r=!0,w.micDevices=c[9],ie(()=>r=!1)),u.$set(w)},i(c){f||(M(s),M(u.$$.fragment,c),f=!0)},o(c){S(s),S(u.$$.fragment,c),f=!1},d(c){c&&y(e),l&&l.d(),m[o].d(),Y(u)}}}function _i(n,e,t){let{recording:i=!1}=e,{paused_recording:o=!1}=e,{stop:s}=e,{record:a}=e,{i18n:u}=e,{waveform_settings:r}=e,{waveform_options:f={show_recording_waveform:!0}}=e,{waiting:l=!1}=e,_,m,b,A=[];et(()=>{E()});const E=()=>{_!==void 0&&_.destroy(),b&&(_=xe.create({...r,height:100,container:b}),t(7,m=_.registerPlugin(Ie.create())))};function c(T){V[T?"unshift":"push"](()=>{b=T,t(8,b)})}const d=()=>{m==null||m.stopMic(),s()},p=()=>{s()},w=()=>{m==null||m.startMic(),a()};function F(T){A=T,t(9,A)}return n.$$set=T=>{"recording"in T&&t(0,i=T.recording),"paused_recording"in T&&t(1,o=T.paused_recording),"stop"in T&&t(2,s=T.stop),"record"in T&&t(3,a=T.record),"i18n"in T&&t(4,u=T.i18n),"waveform_settings"in T&&t(10,r=T.waveform_settings),"waveform_options"in T&&t(5,f=T.waveform_options),"waiting"in T&&t(6,l=T.waiting)},[i,o,s,a,u,f,l,m,b,A,r,c,d,p,w,F]}class ci extends Re{constructor(e){super(),Te(this,e,_i,fi,De,{recording:0,paused_recording:1,stop:2,record:3,i18n:4,waveform_settings:10,waveform_options:5,waiting:6})}}function di(n){let e,t,i,o,s;e=new kt({props:{i18n:n[11],download:n[8]?n[1].url:null}}),e.$on("clear",n[27]),e.$on("edit",n[45]);function a(r){n[46](r)}let u={value:n[1],label:n[4],i18n:n[11],dispatch_blob:n[25],waveform_settings:n[12],waveform_options:n[14],trim_region_settings:n[13],handle_reset_value:n[15],editable:n[16],loop:n[6],interactive:!0};return n[23]!==void 0&&(u.mode=n[23]),i=new Ut({props:u}),V.push(()=>ne(i,"mode",a)),i.$on("stop",n[47]),i.$on("play",n[48]),i.$on("pause",n[49]),i.$on("edit",n[50]),{c(){G(e.$$.fragment),t=j(),G(i.$$.fragment)},l(r){K(e.$$.fragment,r),t=q(r),K(i.$$.fragment,r)},m(r,f){Q(e,r,f),H(r,t,f),Q(i,r,f),s=!0},p(r,f){const l={};f[0]&2048&&(l.i18n=r[11]),f[0]&258&&(l.download=r[8]?r[1].url:null),e.$set(l);const _={};f[0]&2&&(_.value=r[1]),f[0]&16&&(_.label=r[4]),f[0]&2048&&(_.i18n=r[11]),f[0]&4096&&(_.waveform_settings=r[12]),f[0]&16384&&(_.waveform_options=r[14]),f[0]&8192&&(_.trim_region_settings=r[13]),f[0]&32768&&(_.handle_reset_value=r[15]),f[0]&65536&&(_.editable=r[16]),f[0]&64&&(_.loop=r[6]),!o&&f[0]&8388608&&(o=!0,_.mode=r[23],ie(()=>o=!1)),i.$set(_)},i(r){s||(M(e.$$.fragment,r),M(i.$$.fragment,r),s=!0)},o(r){S(e.$$.fragment,r),S(i.$$.fragment,r),s=!1},d(r){r&&y(t),Y(e,r),Y(i,r)}}}function mi(n){let e,t,i,o;const s=[gi,hi],a=[];function u(r,f){return r[2]==="microphone"?0:r[2]==="upload"?1:-1}return~(e=u(n))&&(t=a[e]=s[e](n)),{c(){t&&t.c(),i=ge()},l(r){t&&t.l(r),i=ge()},m(r,f){~e&&a[e].m(r,f),H(r,i,f),o=!0},p(r,f){let l=e;e=u(r),e===l?~e&&a[e].p(r,f):(t&&(ye(),S(a[l],1,1,()=>{a[l]=null}),Ee()),~e?(t=a[e],t?t.p(r,f):(t=a[e]=s[e](r),t.c()),M(t,1),t.m(i.parentNode,i)):t=null)},i(r){o||(M(t),o=!0)},o(r){S(t),o=!1},d(r){r&&y(i),~e&&a[e].d(r)}}}function hi(n){let e,t,i,o;function s(r){n[42](r)}function a(r){n[43](r)}let u={filetype:"audio/aac,audio/midi,audio/mpeg,audio/ogg,audio/wav,audio/x-wav,audio/opus,audio/webm,audio/flac,audio/vnd.rn-realaudio,audio/x-ms-wma,audio/x-aiff,audio/amr,audio/*",root:n[5],max_file_size:n[17],upload:n[18],stream_handler:n[19],$$slots:{default:[bi]},$$scope:{ctx:n}};return n[0]!==void 0&&(u.dragging=n[0]),n[3]!==void 0&&(u.uploading=n[3]),e=new Nt({props:u}),V.push(()=>ne(e,"dragging",s)),V.push(()=>ne(e,"uploading",a)),e.$on("load",n[28]),e.$on("error",n[44]),{c(){G(e.$$.fragment)},l(r){K(e.$$.fragment,r)},m(r,f){Q(e,r,f),o=!0},p(r,f){const l={};f[0]&32&&(l.root=r[5]),f[0]&131072&&(l.max_file_size=r[17]),f[0]&262144&&(l.upload=r[18]),f[0]&524288&&(l.stream_handler=r[19]),f[1]&2097152&&(l.$$scope={dirty:f,ctx:r}),!t&&f[0]&1&&(t=!0,l.dragging=r[0],ie(()=>t=!1)),!i&&f[0]&8&&(i=!0,l.uploading=r[3],ie(()=>i=!1)),e.$set(l)},i(r){o||(M(e.$$.fragment,r),o=!0)},o(r){S(e.$$.fragment,r),o=!1},d(r){Y(e,r)}}}function gi(n){let e,t,i,o,s,a;e=new kt({props:{i18n:n[11]}}),e.$on("clear",n[27]);const u=[wi,vi],r=[];function f(l,_){return l[10]?0:1}return i=f(n),o=r[i]=u[i](n),{c(){G(e.$$.fragment),t=j(),o.c(),s=ge()},l(l){K(e.$$.fragment,l),t=q(l),o.l(l),s=ge()},m(l,_){Q(e,l,_),H(l,t,_),r[i].m(l,_),H(l,s,_),a=!0},p(l,_){const m={};_[0]&2048&&(m.i18n=l[11]),e.$set(m);let b=i;i=f(l),i===b?r[i].p(l,_):(ye(),S(r[b],1,1,()=>{r[b]=null}),Ee(),o=r[i],o?o.p(l,_):(o=r[i]=u[i](l),o.c()),M(o,1),o.m(s.parentNode,s))},i(l){a||(M(e.$$.fragment,l),M(o),a=!0)},o(l){S(e.$$.fragment,l),S(o),a=!1},d(l){l&&(y(t),y(s)),Y(e,l),r[i].d(l)}}}function bi(n){let e;const t=n[37].default,i=St(t,n,n[52],null);return{c(){i&&i.c()},l(o){i&&i.l(o)},m(o,s){i&&i.m(o,s),e=!0},p(o,s){i&&i.p&&(!e||s[1]&2097152)&&At(i,t,o,o[52],e?Pt(t,o[52],s,null):Bt(o[52]),null)},i(o){e||(M(i,o),e=!0)},o(o){S(i,o),e=!1},d(o){i&&i.d(o)}}}function vi(n){let e,t,i;function o(a){n[38](a)}let s={i18n:n[11],editable:n[16],dispatch_blob:n[25],waveform_settings:n[12],waveform_options:n[14],handle_reset_value:n[15]};return n[23]!==void 0&&(s.mode=n[23]),e=new ri({props:s}),V.push(()=>ne(e,"mode",o)),e.$on("start_recording",n[39]),e.$on("pause_recording",n[40]),e.$on("stop_recording",n[41]),{c(){G(e.$$.fragment)},l(a){K(e.$$.fragment,a)},m(a,u){Q(e,a,u),i=!0},p(a,u){const r={};u[0]&2048&&(r.i18n=a[11]),u[0]&65536&&(r.editable=a[16]),u[0]&4096&&(r.waveform_settings=a[12]),u[0]&16384&&(r.waveform_options=a[14]),u[0]&32768&&(r.handle_reset_value=a[15]),!t&&u[0]&8388608&&(t=!0,r.mode=a[23],ie(()=>t=!1)),e.$set(r)},i(a){i||(M(e.$$.fragment,a),i=!0)},o(a){S(e.$$.fragment,a),i=!1},d(a){Y(e,a)}}}function wi(n){let e,t;return e=new ci({props:{record:n[26],recording:n[22],stop:n[29],i18n:n[11],waveform_settings:n[12],waveform_options:n[14],waiting:n[21]==="waiting"}}),{c(){G(e.$$.fragment)},l(i){K(e.$$.fragment,i)},m(i,o){Q(e,i,o),t=!0},p(i,o){const s={};o[0]&4194304&&(s.recording=i[22]),o[0]&2048&&(s.i18n=i[11]),o[0]&4096&&(s.waveform_settings=i[12]),o[0]&16384&&(s.waveform_options=i[14]),o[0]&2097152&&(s.waiting=i[21]==="waiting"),e.$set(s)},i(i){t||(M(e.$$.fragment,i),t=!0)},o(i){S(e.$$.fragment,i),t=!1},d(i){Y(e,i)}}}function pi(n){let e,t,i,o,s,a,u,r,f,l,_;e=new Vt({props:{show_label:n[7],Icon:Ht,float:n[2]==="upload"&&n[1]===null,label:n[4]||n[11]("audio.audio")}}),o=new Ft({props:{time_limit:n[20]}});const m=[mi,di],b=[];function A(d,p){return d[1]===null||d[10]?0:1}a=A(n),u=b[a]=m[a](n);function E(d){n[51](d)}let c={sources:n[9],handle_clear:n[27]};return n[2]!==void 0&&(c.active_source=n[2]),f=new qt({props:c}),V.push(()=>ne(f,"active_source",E)),{c(){G(e.$$.fragment),t=j(),i=z("div"),G(o.$$.fragment),s=j(),u.c(),r=j(),G(f.$$.fragment),this.h()},l(d){K(e.$$.fragment,d),t=q(d),i=L(d,"DIV",{class:!0});var p=O(i);K(o.$$.fragment,p),s=q(p),u.l(p),r=q(p),K(f.$$.fragment,p),p.forEach(y),this.h()},h(){B(i,"class","audio-container svelte-1or5kk1")},m(d,p){Q(e,d,p),H(d,t,p),H(d,i,p),Q(o,i,null),R(i,s),b[a].m(i,null),R(i,r),Q(f,i,null),_=!0},p(d,p){const w={};p[0]&128&&(w.show_label=d[7]),p[0]&6&&(w.float=d[2]==="upload"&&d[1]===null),p[0]&2064&&(w.label=d[4]||d[11]("audio.audio")),e.$set(w);const F={};p[0]&1048576&&(F.time_limit=d[20]),o.$set(F);let T=a;a=A(d),a===T?b[a].p(d,p):(ye(),S(b[T],1,1,()=>{b[T]=null}),Ee(),u=b[a],u?u.p(d,p):(u=b[a]=m[a](d),u.c()),M(u,1),u.m(i,r));const N={};p[0]&512&&(N.sources=d[9]),!l&&p[0]&4&&(l=!0,N.active_source=d[2],ie(()=>l=!1)),f.$set(N)},i(d){_||(M(e.$$.fragment,d),M(o.$$.fragment,d),M(u),M(f.$$.fragment,d),_=!0)},o(d){S(e.$$.fragment,d),S(o.$$.fragment,d),S(u),S(f.$$.fragment,d),_=!1},d(d){d&&(y(t),y(i)),Y(e,d),Y(o),b[a].d(),Y(f)}}}const ht=44;function ki(n,e,t){let{$$slots:i={},$$scope:o}=e,{value:s=null}=e,{label:a}=e,{root:u}=e,{loop:r}=e,{show_label:f=!0}=e,{show_download_button:l=!1}=e,{sources:_=["microphone","upload"]}=e,{pending:m=!1}=e,{streaming:b=!1}=e,{i18n:A}=e,{waveform_settings:E}=e,{trim_region_settings:c={}}=e,{waveform_options:d={}}=e,{dragging:p}=e,{active_source:w}=e,{handle_reset_value:F=()=>{}}=e,{editable:T=!0}=e,{max_file_size:N=null}=e,{upload:X}=e,{stream_handler:Z}=e,{stream_every:D}=e,{uploading:W=!1}=e,oe=null,re="closed";const C=h=>{h==="closed"?(t(20,oe=null),t(21,re="closed")):h==="waiting"?t(21,re="waiting"):t(21,re="open")},ve=h=>{le&&t(20,oe=h)};let le=!1,I,k="",P,x=[],$=!1,de=!1,te=[],v;function se(){v=[rt(()=>import("./module.zMBilgLc.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url),rt(()=>import("./module.niXGEr8P.js"),__vite__mapDeps([9,1]),import.meta.url)]}typeof window<"u"&&b&&se();const J=$e(),_e=async(h,ee)=>{var Me;let me=new File(h,"audio.wav");const we=await Lt([me],ee==="stream");t(1,s=(Me=await X(we,u,void 0,N||void 0))==null?void 0:Me.filter(Boolean)[0]),J(ee,s)};Mt(()=>{b&&I&&I.state!=="inactive"&&I.stop()});async function Ae(){let h;try{h=await navigator.mediaDevices.getUserMedia({audio:!0})}catch(ee){if(!navigator.mediaDevices){J("error",A("audio.no_device_support"));return}if(ee instanceof DOMException&&ee.name=="NotAllowedError"){J("error",A("audio.allow_recording_access"));return}throw ee}if(h!=null){if(b){const[{MediaRecorder:ee,register:me},{connect:we}]=await Promise.all(v);await me(await we()),I=new ee(h,{mimeType:"audio/wav"}),I.addEventListener("dataavailable",Be)}else I=new MediaRecorder(h),I.addEventListener("dataavailable",ee=>{te.push(ee.data)});I.addEventListener("stop",async()=>{t(22,le=!1),await _e(te,"change"),await _e(te,"stop_recording"),te=[]}),de=!0}}async function Be(h){let ee=await h.data.arrayBuffer(),me=new Uint8Array(ee);if(P||(t(34,P=new Uint8Array(ee.slice(0,ht))),me=new Uint8Array(ee.slice(ht))),m)x.push(me);else{let we=[P].concat(x,[me]);if(!le||re==="waiting")return;_e(we,"stream"),t(35,x=[])}}async function Pe(){t(22,le=!0),J("start_recording"),de||await Ae(),t(34,P=void 0),b&&I.start(D*1e3)}function ze(){J("change",null),J("clear"),t(23,k=""),t(1,s=null)}function Le({detail:h}){t(1,s=h),J("change",h),J("upload",h)}async function Ce(){t(22,le=!1),b&&(J("close_stream"),J("stop_recording"),I.stop(),m&&t(36,$=!0),_e(te,"stop_recording"),J("clear"),t(23,k=""))}function Ue(h){k=h,t(23,k)}function Oe(h){pe.call(this,n,h)}function Ne(h){pe.call(this,n,h)}function Ve(h){pe.call(this,n,h)}function He(h){p=h,t(0,p)}function je(h){W=h,t(3,W)}const qe=({detail:h})=>J("error",h),Fe=()=>t(23,k="edit");function Je(h){k=h,t(23,k)}function Ge(h){pe.call(this,n,h)}function Ke(h){pe.call(this,n,h)}function Qe(h){pe.call(this,n,h)}function Ye(h){pe.call(this,n,h)}function Ze(h){w=h,t(2,w)}return n.$$set=h=>{"value"in h&&t(1,s=h.value),"label"in h&&t(4,a=h.label),"root"in h&&t(5,u=h.root),"loop"in h&&t(6,r=h.loop),"show_label"in h&&t(7,f=h.show_label),"show_download_button"in h&&t(8,l=h.show_download_button),"sources"in h&&t(9,_=h.sources),"pending"in h&&t(30,m=h.pending),"streaming"in h&&t(10,b=h.streaming),"i18n"in h&&t(11,A=h.i18n),"waveform_settings"in h&&t(12,E=h.waveform_settings),"trim_region_settings"in h&&t(13,c=h.trim_region_settings),"waveform_options"in h&&t(14,d=h.waveform_options),"dragging"in h&&t(0,p=h.dragging),"active_source"in h&&t(2,w=h.active_source),"handle_reset_value"in h&&t(15,F=h.handle_reset_value),"editable"in h&&t(16,T=h.editable),"max_file_size"in h&&t(17,N=h.max_file_size),"upload"in h&&t(18,X=h.upload),"stream_handler"in h&&t(19,Z=h.stream_handler),"stream_every"in h&&t(31,D=h.stream_every),"uploading"in h&&t(3,W=h.uploading),"$$scope"in h&&t(52,o=h.$$scope)},n.$$.update=()=>{if(n.$$.dirty[0]&1&&J("drag",p),n.$$.dirty[0]&1073741824|n.$$.dirty[1]&56&&$&&m===!1&&(t(36,$=!1),P&&x)){let h=[P].concat(x);t(35,x=[]),_e(h,"stream")}},[p,s,w,W,a,u,r,f,l,_,b,A,E,c,d,F,T,N,X,Z,oe,re,le,k,J,_e,Pe,ze,Le,Ce,m,D,C,ve,P,x,$,i,Ue,Oe,Ne,Ve,He,je,qe,Fe,Je,Ge,Ke,Qe,Ye,Ze,o]}class yi extends Re{constructor(e){super(),Te(this,e,ki,pi,De,{value:1,label:4,root:5,loop:6,show_label:7,show_download_button:8,sources:9,pending:30,streaming:10,i18n:11,waveform_settings:12,trim_region_settings:13,waveform_options:14,dragging:0,active_source:2,handle_reset_value:15,editable:16,max_file_size:17,upload:18,stream_handler:19,stream_every:31,uploading:3,modify_stream:32,set_time_limit:33},null,[-1,-1])}get modify_stream(){return this.$$.ctx[32]}get set_time_limit(){return this.$$.ctx[33]}}const Ei=yi;function Di(n){let e,t;return e=new bt({props:{variant:n[0]===null&&n[24]==="upload"?"dashed":"solid",border_mode:n[26]?"focus":"base",padding:!1,allow_overflow:!1,elem_id:n[3],elem_classes:n[4],visible:n[5],container:n[11],scale:n[12],min_width:n[13],$$slots:{default:[Ii]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},l(i){K(e.$$.fragment,i)},m(i,o){Q(e,i,o),t=!0},p(i,o){const s={};o[0]&16777217&&(s.variant=i[0]===null&&i[24]==="upload"?"dashed":"solid"),o[0]&67108864&&(s.border_mode=i[26]?"focus":"base"),o[0]&8&&(s.elem_id=i[3]),o[0]&16&&(s.elem_classes=i[4]),o[0]&32&&(s.visible=i[5]),o[0]&2048&&(s.container=i[11]),o[0]&4096&&(s.scale=i[12]),o[0]&8192&&(s.min_width=i[13]),o[0]&268355463|o[2]&32&&(s.$$scope={dirty:o,ctx:i}),e.$set(s)},i(i){t||(M(e.$$.fragment,i),t=!0)},o(i){S(e.$$.fragment,i),t=!1},d(i){Y(e,i)}}}function Ri(n){let e,t;return e=new bt({props:{variant:"solid",border_mode:n[26]?"focus":"base",padding:!1,allow_overflow:!1,elem_id:n[3],elem_classes:n[4],visible:n[5],container:n[11],scale:n[12],min_width:n[13],$$slots:{default:[Mi]},$$scope:{ctx:n}}}),{c(){G(e.$$.fragment)},l(i){K(e.$$.fragment,i)},m(i,o){Q(e,i,o),t=!0},p(i,o){const s={};o[0]&67108864&&(s.border_mode=i[26]?"focus":"base"),o[0]&8&&(s.elem_id=i[3]),o[0]&16&&(s.elem_classes=i[4]),o[0]&32&&(s.visible=i[5]),o[0]&2048&&(s.container=i[11]),o[0]&4096&&(s.scale=i[12]),o[0]&8192&&(s.min_width=i[13]),o[0]&138921219|o[2]&32&&(s.$$scope={dirty:o,ctx:i}),e.$set(s)},i(i){t||(M(e.$$.fragment,i),t=!0)},o(i){S(e.$$.fragment,i),t=!1},d(i){Y(e,i)}}}function Ti(n){let e,t;return e=new Gt({props:{i18n:n[22].i18n,type:"audio"}}),{c(){G(e.$$.fragment)},l(i){K(e.$$.fragment,i)},m(i,o){Q(e,i,o),t=!0},p(i,o){const s={};o[0]&4194304&&(s.i18n=i[22].i18n),e.$set(s)},i(i){t||(M(e.$$.fragment,i),t=!0)},o(i){S(e.$$.fragment,i),t=!1},d(i){Y(e,i)}}}function Ii(n){let e,t,i,o,s,a,u,r;const f=[{autoscroll:n[22].autoscroll},{i18n:n[22].i18n},n[1]];let l={};for(let c=0;c<f.length;c+=1)l=gt(l,f[c]);e=new vt({props:l}),e.$on("clear_status",n[44]);function _(c){n[47](c)}function m(c){n[48](c)}function b(c){n[49](c)}function A(c){n[50](c)}let E={label:n[8],show_label:n[10],show_download_button:n[15],value:n[0],root:n[9],sources:n[7],active_source:n[24],pending:n[19],streaming:n[20],loop:n[14],max_file_size:n[22].max_file_size,handle_reset_value:n[28],editable:n[17],i18n:n[22].i18n,waveform_settings:n[27],waveform_options:n[18],trim_region_settings:n[29],stream_every:n[21],upload:n[45],stream_handler:n[46],$$slots:{default:[Ti]},$$scope:{ctx:n}};return n[26]!==void 0&&(E.dragging=n[26]),n[23]!==void 0&&(E.uploading=n[23]),n[25]!==void 0&&(E.modify_stream=n[25]),n[2]!==void 0&&(E.set_time_limit=n[2]),i=new Ei({props:E}),V.push(()=>ne(i,"dragging",_)),V.push(()=>ne(i,"uploading",m)),V.push(()=>ne(i,"modify_stream",b)),V.push(()=>ne(i,"set_time_limit",A)),i.$on("change",n[51]),i.$on("stream",n[52]),i.$on("drag",n[53]),i.$on("edit",n[54]),i.$on("play",n[55]),i.$on("pause",n[56]),i.$on("stop",n[57]),i.$on("start_recording",n[58]),i.$on("pause_recording",n[59]),i.$on("stop_recording",n[60]),i.$on("upload",n[61]),i.$on("clear",n[62]),i.$on("error",n[30]),i.$on("close_stream",n[63]),{c(){G(e.$$.fragment),t=j(),G(i.$$.fragment)},l(c){K(e.$$.fragment,c),t=q(c),K(i.$$.fragment,c)},m(c,d){Q(e,c,d),H(c,t,d),Q(i,c,d),r=!0},p(c,d){const p=d[0]&4194306?wt(f,[d[0]&4194304&&{autoscroll:c[22].autoscroll},d[0]&4194304&&{i18n:c[22].i18n},d[0]&2&&pt(c[1])]):{};e.$set(p);const w={};d[0]&256&&(w.label=c[8]),d[0]&1024&&(w.show_label=c[10]),d[0]&32768&&(w.show_download_button=c[15]),d[0]&1&&(w.value=c[0]),d[0]&512&&(w.root=c[9]),d[0]&128&&(w.sources=c[7]),d[0]&16777216&&(w.active_source=c[24]),d[0]&524288&&(w.pending=c[19]),d[0]&1048576&&(w.streaming=c[20]),d[0]&16384&&(w.loop=c[14]),d[0]&4194304&&(w.max_file_size=c[22].max_file_size),d[0]&131072&&(w.editable=c[17]),d[0]&4194304&&(w.i18n=c[22].i18n),d[0]&134217728&&(w.waveform_settings=c[27]),d[0]&262144&&(w.waveform_options=c[18]),d[0]&2097152&&(w.stream_every=c[21]),d[0]&4194304&&(w.upload=c[45]),d[0]&4194304&&(w.stream_handler=c[46]),d[0]&4194304|d[2]&32&&(w.$$scope={dirty:d,ctx:c}),!o&&d[0]&67108864&&(o=!0,w.dragging=c[26],ie(()=>o=!1)),!s&&d[0]&8388608&&(s=!0,w.uploading=c[23],ie(()=>s=!1)),!a&&d[0]&33554432&&(a=!0,w.modify_stream=c[25],ie(()=>a=!1)),!u&&d[0]&4&&(u=!0,w.set_time_limit=c[2],ie(()=>u=!1)),i.$set(w)},i(c){r||(M(e.$$.fragment,c),M(i.$$.fragment,c),r=!0)},o(c){S(e.$$.fragment,c),S(i.$$.fragment,c),r=!1},d(c){c&&y(t),Y(e,c),Y(i,c)}}}function Mi(n){let e,t,i,o;const s=[{autoscroll:n[22].autoscroll},{i18n:n[22].i18n},n[1]];let a={};for(let u=0;u<s.length;u+=1)a=gt(a,s[u]);return e=new vt({props:a}),e.$on("clear_status",n[38]),i=new Ot({props:{i18n:n[22].i18n,show_label:n[10],show_download_button:n[15],show_share_button:n[16],value:n[0],label:n[8],loop:n[14],waveform_settings:n[27],waveform_options:n[18],editable:n[17]}}),i.$on("share",n[39]),i.$on("error",n[40]),i.$on("play",n[41]),i.$on("pause",n[42]),i.$on("stop",n[43]),{c(){G(e.$$.fragment),t=j(),G(i.$$.fragment)},l(u){K(e.$$.fragment,u),t=q(u),K(i.$$.fragment,u)},m(u,r){Q(e,u,r),H(u,t,r),Q(i,u,r),o=!0},p(u,r){const f=r[0]&4194306?wt(s,[r[0]&4194304&&{autoscroll:u[22].autoscroll},r[0]&4194304&&{i18n:u[22].i18n},r[0]&2&&pt(u[1])]):{};e.$set(f);const l={};r[0]&4194304&&(l.i18n=u[22].i18n),r[0]&1024&&(l.show_label=u[10]),r[0]&32768&&(l.show_download_button=u[15]),r[0]&65536&&(l.show_share_button=u[16]),r[0]&1&&(l.value=u[0]),r[0]&256&&(l.label=u[8]),r[0]&16384&&(l.loop=u[14]),r[0]&134217728&&(l.waveform_settings=u[27]),r[0]&262144&&(l.waveform_options=u[18]),r[0]&131072&&(l.editable=u[17]),i.$set(l)},i(u){o||(M(e.$$.fragment,u),M(i.$$.fragment,u),o=!0)},o(u){S(e.$$.fragment,u),S(i.$$.fragment,u),o=!1},d(u){u&&y(t),Y(e,u),Y(i,u)}}}function Si(n){let e,t,i,o;const s=[Ri,Di],a=[];function u(r,f){return r[6]?1:0}return e=u(n),t=a[e]=s[e](n),{c(){t.c(),i=ge()},l(r){t.l(r),i=ge()},m(r,f){a[e].m(r,f),H(r,i,f),o=!0},p(r,f){let l=e;e=u(r),e===l?a[e].p(r,f):(ye(),S(a[l],1,1,()=>{a[l]=null}),Ee(),t=a[e],t?t.p(r,f):(t=a[e]=s[e](r),t.c()),M(t,1),t.m(i.parentNode,i))},i(r){o||(M(t),o=!0)},o(r){S(t),o=!1},d(r){r&&y(i),a[e].d(r)}}}function Ai(n,e,t){let{value_is_output:i=!1}=e,{elem_id:o=""}=e,{elem_classes:s=[]}=e,{visible:a=!0}=e,{interactive:u}=e,{value:r=null}=e,{sources:f}=e,{label:l}=e,{root:_}=e,{show_label:m}=e,{container:b=!0}=e,{scale:A=null}=e,{min_width:E=void 0}=e,{loading_status:c}=e,{autoplay:d=!1}=e,{loop:p=!1}=e,{show_download_button:w}=e,{show_share_button:F=!1}=e,{editable:T=!0}=e,{waveform_options:N={}}=e,{pending:X}=e,{streaming:Z}=e,{stream_every:D}=e,{input_ready:W}=e,oe=!1,re="closed",C;function ve(g){re=g,C(g)}const le=()=>re;let{set_time_limit:I}=e,{gradio:k}=e,P=null,x,$=r;const de=()=>{$===null||r===$||t(0,r=$)};let te,v,se="darkorange";et(()=>{se=getComputedStyle(document==null?void 0:document.documentElement).getPropertyValue("--color-accent"),J(),t(27,v.waveColor=N.waveform_color||"#9ca3af",v),t(27,v.progressColor=N.waveform_progress_color||se,v),t(27,v.mediaControls=N.show_controls,v),t(27,v.sampleRate=N.sample_rate||44100,v)});const ce={color:N.trim_region_color,drag:!0,resize:!0};function J(){document.documentElement.style.setProperty("--trim-region-color",ce.color||se)}function _e({detail:g}){const[Dt,Rt]=g.includes("Invalid file type")?["warning","complete"]:["error","error"];t(1,c=c||{}),t(1,c.status=Rt,c),t(1,c.message=g,c),k.dispatch(Dt,g)}zt(()=>{t(31,i=!1)});const Ae=()=>k.dispatch("clear_status",c),Be=g=>k.dispatch("share",g.detail),Pe=g=>k.dispatch("error",g.detail),ze=()=>k.dispatch("play"),Le=()=>k.dispatch("pause"),Ce=()=>k.dispatch("stop"),Ue=()=>k.dispatch("clear_status",c),Oe=(...g)=>k.client.upload(...g),Ne=(...g)=>k.client.stream(...g);function Ve(g){te=g,t(26,te)}function He(g){oe=g,t(23,oe)}function je(g){C=g,t(25,C)}function qe(g){I=g,t(2,I)}const Fe=({detail:g})=>t(0,r=g),Je=({detail:g})=>{t(0,r=g),k.dispatch("stream",r)},Ge=({detail:g})=>t(26,te=g),Ke=()=>k.dispatch("edit"),Qe=()=>k.dispatch("play"),Ye=()=>k.dispatch("pause"),Ze=()=>k.dispatch("stop"),h=()=>k.dispatch("start_recording"),ee=()=>k.dispatch("pause_recording"),me=g=>k.dispatch("stop_recording"),we=()=>k.dispatch("upload"),Me=()=>k.dispatch("clear"),Et=()=>k.dispatch("close_stream","stream");return n.$$set=g=>{"value_is_output"in g&&t(31,i=g.value_is_output),"elem_id"in g&&t(3,o=g.elem_id),"elem_classes"in g&&t(4,s=g.elem_classes),"visible"in g&&t(5,a=g.visible),"interactive"in g&&t(6,u=g.interactive),"value"in g&&t(0,r=g.value),"sources"in g&&t(7,f=g.sources),"label"in g&&t(8,l=g.label),"root"in g&&t(9,_=g.root),"show_label"in g&&t(10,m=g.show_label),"container"in g&&t(11,b=g.container),"scale"in g&&t(12,A=g.scale),"min_width"in g&&t(13,E=g.min_width),"loading_status"in g&&t(1,c=g.loading_status),"autoplay"in g&&t(33,d=g.autoplay),"loop"in g&&t(14,p=g.loop),"show_download_button"in g&&t(15,w=g.show_download_button),"show_share_button"in g&&t(16,F=g.show_share_button),"editable"in g&&t(17,T=g.editable),"waveform_options"in g&&t(18,N=g.waveform_options),"pending"in g&&t(19,X=g.pending),"streaming"in g&&t(20,Z=g.streaming),"stream_every"in g&&t(21,D=g.stream_every),"input_ready"in g&&t(32,W=g.input_ready),"set_time_limit"in g&&t(2,I=g.set_time_limit),"gradio"in g&&t(22,k=g.gradio)},n.$$.update=()=>{n.$$.dirty[0]&8388608&&t(32,W=!oe),n.$$.dirty[0]&1|n.$$.dirty[1]&64&&r&&$===null&&t(37,$=r),n.$$.dirty[0]&4194305|n.$$.dirty[1]&33&&JSON.stringify(r)!==JSON.stringify(P)&&(t(36,P=r),k.dispatch("change"),i||k.dispatch("input")),n.$$.dirty[0]&16777344&&!x&&f&&t(24,x=f[0]),n.$$.dirty[1]&4&&t(27,v={height:50,barWidth:2,barGap:3,cursorWidth:2,cursorColor:"#ddd5e9",autoplay:d,barRadius:10,dragToSeek:!0,normalize:!0,minPxPerSec:20})},[r,c,I,o,s,a,u,f,l,_,m,b,A,E,p,w,F,T,N,X,Z,D,k,oe,x,C,te,v,de,ce,_e,i,W,d,ve,le,P,$,Ae,Be,Pe,ze,Le,Ce,Ue,Oe,Ne,Ve,He,je,qe,Fe,Je,Ge,Ke,Qe,Ye,Ze,h,ee,me,we,Me,Et]}class Bi extends Re{constructor(e){super(),Te(this,e,Ai,Si,De,{value_is_output:31,elem_id:3,elem_classes:4,visible:5,interactive:6,value:0,sources:7,label:8,root:9,show_label:10,container:11,scale:12,min_width:13,loading_status:1,autoplay:33,loop:14,show_download_button:15,show_share_button:16,editable:17,waveform_options:18,pending:19,streaming:20,stream_every:21,input_ready:32,modify_stream_state:34,get_stream_state:35,set_time_limit:2,gradio:22},null,[-1,-1,-1])}get value_is_output(){return this.$$.ctx[31]}set value_is_output(e){this.$$set({value_is_output:e}),U()}get elem_id(){return this.$$.ctx[3]}set elem_id(e){this.$$set({elem_id:e}),U()}get elem_classes(){return this.$$.ctx[4]}set elem_classes(e){this.$$set({elem_classes:e}),U()}get visible(){return this.$$.ctx[5]}set visible(e){this.$$set({visible:e}),U()}get interactive(){return this.$$.ctx[6]}set interactive(e){this.$$set({interactive:e}),U()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),U()}get sources(){return this.$$.ctx[7]}set sources(e){this.$$set({sources:e}),U()}get label(){return this.$$.ctx[8]}set label(e){this.$$set({label:e}),U()}get root(){return this.$$.ctx[9]}set root(e){this.$$set({root:e}),U()}get show_label(){return this.$$.ctx[10]}set show_label(e){this.$$set({show_label:e}),U()}get container(){return this.$$.ctx[11]}set container(e){this.$$set({container:e}),U()}get scale(){return this.$$.ctx[12]}set scale(e){this.$$set({scale:e}),U()}get min_width(){return this.$$.ctx[13]}set min_width(e){this.$$set({min_width:e}),U()}get loading_status(){return this.$$.ctx[1]}set loading_status(e){this.$$set({loading_status:e}),U()}get autoplay(){return this.$$.ctx[33]}set autoplay(e){this.$$set({autoplay:e}),U()}get loop(){return this.$$.ctx[14]}set loop(e){this.$$set({loop:e}),U()}get show_download_button(){return this.$$.ctx[15]}set show_download_button(e){this.$$set({show_download_button:e}),U()}get show_share_button(){return this.$$.ctx[16]}set show_share_button(e){this.$$set({show_share_button:e}),U()}get editable(){return this.$$.ctx[17]}set editable(e){this.$$set({editable:e}),U()}get waveform_options(){return this.$$.ctx[18]}set waveform_options(e){this.$$set({waveform_options:e}),U()}get pending(){return this.$$.ctx[19]}set pending(e){this.$$set({pending:e}),U()}get streaming(){return this.$$.ctx[20]}set streaming(e){this.$$set({streaming:e}),U()}get stream_every(){return this.$$.ctx[21]}set stream_every(e){this.$$set({stream_every:e}),U()}get input_ready(){return this.$$.ctx[32]}set input_ready(e){this.$$set({input_ready:e}),U()}get modify_stream_state(){return this.$$.ctx[34]}get get_stream_state(){return this.$$.ctx[35]}get set_time_limit(){return this.$$.ctx[2]}set set_time_limit(e){this.$$set({set_time_limit:e}),U()}get gradio(){return this.$$.ctx[22]}set gradio(e){this.$$set({gradio:e}),U()}}const Gi=Bi;export{Yi as BaseExample,Ei as BaseInteractiveAudio,Ut as BasePlayer,Ot as BaseStaticAudio,Gi as default};
