const __vite__fileDeps=["./module-BQ9WeAw_.js","./module-C-VadMaF.js","./index-Jey5Syrb.js","./index-CNnBt9Ig.css","./module-BA06XY8_.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{s as Ct,W as Cn,p as Pt,a as wt,A as Pn,S as Bn}from"./StaticAudio-B-04VIvb.js";import{_ as Bt,d as Ln}from"./index-Jey5Syrb.js";import{U as zn}from"./Upload-bxZMT4Dp.js";import{M as tn}from"./ModifyUpload-O7TRBMcq.js";import"./IconButtonWrapper.svelte_svelte_type_style_lang-Cdolb8gF.js";import{B as In}from"./BlockLabel-NJZVSFq5.js";import{M as Tn}from"./Music-CDm0RGMk.js";import{a as Un,S as qn}from"./SelectSource-NfBXRcIV.js";import"./StreamingBar.svelte_svelte_type_style_lang-hwxd5zZk.js";import{S as jn}from"./StreamingBar-2MSsHDpg.js";import{P as On}from"./Trim-JQYgj7Jd.js";import{f as de}from"./utils-BiWkKWez.js";import{S as nn}from"./index-Ct-HSZQg.js";import{B as on}from"./Block--xuAGeyl.js";import{U as Wn}from"./UploadText-CmN27mG_.js";import{default as ts}from"./Example-uQ8MuYg6.js";import"./IconButton-DBg6YGHG.js";import"./Empty-D-VJ_RsP.js";import"./ShareButton-BAtA0g51.js";import"./Community-CC3ywblm.js";import"./Download-DVtk-Jv3.js";import"./IconButtonWrapper-CDScR4JZ.js";import"./Play-B0Q0U1Qz.js";import"./Undo-DCjBnnSO.js";import"./file-url-DgijyRSD.js";import"./context-TgWPFwN2.js";/* empty css                                                   */import"./hls-CnVhpNcu.js";import"./DownloadLink-CoHnReV-.js";import"./svelte/svelte.js";/* empty css                                             */import"./Clear-By3xiIwg.js";import"./Upload-Cp8Go_XF.js";function pt(n,e,t,i){return new(t||(t=Promise))(function(o,l){function r(_){try{s(i.next(_))}catch(a){l(a)}}function u(_){try{s(i.throw(_))}catch(a){l(a)}}function s(_){var a;_.done?o(_.value):(a=_.value,a instanceof t?a:new t(function(f){f(a)})).then(r,u)}s((i=i.apply(n,[])).next())})}class Nn{constructor(){this.listeners={},this.on=this.addEventListener,this.un=this.removeEventListener}addEventListener(e,t,i){if(this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t),i?.once){const o=()=>{this.removeEventListener(e,o),this.removeEventListener(e,t)};return this.addEventListener(e,o),o}return()=>this.removeEventListener(e,t)}removeEventListener(e,t){var i;(i=this.listeners[e])===null||i===void 0||i.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach(i=>i(...t))}}class Fn extends Nn{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}}const Hn=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];class qe extends Fn{constructor(e){var t;super(Object.assign(Object.assign({},e),{audioBitsPerSecond:(t=e.audioBitsPerSecond)!==null&&t!==void 0?t:128e3})),this.stream=null,this.mediaRecorder=null}static create(e){return new qe(e||{})}renderMicStream(e){const t=new AudioContext,i=t.createMediaStreamSource(e),o=t.createAnalyser();i.connect(o);const l=o.frequencyBinCount,r=new Float32Array(l),u=l/t.sampleRate;let s;const _=()=>{o.getFloatTimeDomainData(r),this.wavesurfer&&(this.wavesurfer.options.cursorWidth=0,this.wavesurfer.options.interact=!1,this.wavesurfer.load("",[r],u)),s=requestAnimationFrame(_)};return _(),()=>{cancelAnimationFrame(s),i?.disconnect(),t?.close()}}startMic(e){return pt(this,void 0,void 0,function*(){let t;try{t=yield navigator.mediaDevices.getUserMedia({audio:!e?.deviceId||{deviceId:e.deviceId}})}catch(o){throw new Error("Error accessing the microphone: "+o.message)}const i=this.renderMicStream(t);return this.subscriptions.push(this.once("destroy",i)),this.stream=t,t})}stopMic(){this.stream&&(this.stream.getTracks().forEach(e=>e.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(e){return pt(this,void 0,void 0,function*(){const t=this.stream||(yield this.startMic(e)),i=this.mediaRecorder||new MediaRecorder(t,{mimeType:this.options.mimeType||Hn.find(l=>MediaRecorder.isTypeSupported(l)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=i,this.stopRecording();const o=[];i.ondataavailable=l=>{l.data.size>0&&o.push(l.data)},i.onstop=()=>{var l;const r=new Blob(o,{type:i.mimeType});this.emit("record-end",r),this.options.renderRecordedAudio!==!1&&((l=this.wavesurfer)===null||l===void 0||l.load(URL.createObjectURL(r)))},i.start(),this.emit("record-start")})}isRecording(){var e;return((e=this.mediaRecorder)===null||e===void 0?void 0:e.state)==="recording"}isPaused(){var e;return((e=this.mediaRecorder)===null||e===void 0?void 0:e.state)==="paused"}stopRecording(){var e;this.isRecording()&&((e=this.mediaRecorder)===null||e===void 0||e.stop())}pauseRecording(){var e;this.isRecording()&&((e=this.mediaRecorder)===null||e===void 0||e.pause(),this.emit("record-pause"))}resumeRecording(){var e;this.isPaused()&&((e=this.mediaRecorder)===null||e===void 0||e.resume(),this.emit("record-resume"))}static getAvailableAudioDevices(){return pt(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(e=>e.filter(t=>t.kind==="audioinput"))})}destroy(){super.destroy(),this.stopRecording(),this.stopMic()}}const{SvelteComponent:Vn,append:sn,attr:Lt,destroy_each:Jn,detach:Xe,element:kt,empty:Gn,ensure_array_like:zt,flush:It,init:Yn,insert:Ze,noop:Tt,safe_not_equal:Kn,set_data:rn,set_input_value:vt,text:ln}=window.__gradio__svelte__internal,{createEventDispatcher:Qn}=window.__gradio__svelte__internal;function Ut(n,e,t){const i=n.slice();return i[3]=e[t],i}function Xn(n){let e,t=zt(n[0]),i=[];for(let o=0;o<t.length;o+=1)i[o]=qt(Ut(n,t,o));return{c(){for(let o=0;o<i.length;o+=1)i[o].c();e=Gn()},m(o,l){for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(o,l);Ze(o,e,l)},p(o,l){if(l&1){t=zt(o[0]);let r;for(r=0;r<t.length;r+=1){const u=Ut(o,t,r);i[r]?i[r].p(u,l):(i[r]=qt(u),i[r].c(),i[r].m(e.parentNode,e))}for(;r<i.length;r+=1)i[r].d(1);i.length=t.length}},d(o){o&&Xe(e),Jn(i,o)}}}function Zn(n){let e,t=n[1]("audio.no_microphone")+"",i;return{c(){e=kt("option"),i=ln(t),e.__value="",vt(e,e.__value)},m(o,l){Ze(o,e,l),sn(e,i)},p(o,l){l&2&&t!==(t=o[1]("audio.no_microphone")+"")&&rn(i,t)},d(o){o&&Xe(e)}}}function qt(n){let e,t=n[3].label+"",i,o;return{c(){e=kt("option"),i=ln(t),e.__value=o=n[3].deviceId,vt(e,e.__value)},m(l,r){Ze(l,e,r),sn(e,i)},p(l,r){r&1&&t!==(t=l[3].label+"")&&rn(i,t),r&1&&o!==(o=l[3].deviceId)&&(e.__value=o,vt(e,e.__value))},d(l){l&&Xe(e)}}}function $n(n){let e,t;function i(r,u){return r[0].length===0?Zn:Xn}let o=i(n),l=o(n);return{c(){e=kt("select"),l.c(),Lt(e,"class","mic-select svelte-1ya9x7a"),Lt(e,"aria-label","Select input device"),e.disabled=t=n[0].length===0},m(r,u){Ze(r,e,u),l.m(e,null)},p(r,[u]){o===(o=i(r))&&l?l.p(r,u):(l.d(1),l=o(r),l&&(l.c(),l.m(e,null))),u&1&&t!==(t=r[0].length===0)&&(e.disabled=t)},i:Tt,o:Tt,d(r){r&&Xe(e),l.d()}}}function xn(n,e,t){let{i18n:i}=e,{micDevices:o=[]}=e;const l=Qn();return n.$$set=r=>{"i18n"in r&&t(1,i=r.i18n),"micDevices"in r&&t(0,o=r.micDevices)},n.$$.update=()=>{if(n.$$.dirty&2&&typeof window<"u"){console.log("getting audio devices");try{let r=[];qe.getAvailableAudioDevices().then(u=>{t(0,o=u),u.forEach(s=>{s.deviceId&&r.push(s)}),t(0,o=r)})}catch(r){throw r instanceof DOMException&&r.name=="NotAllowedError"&&l("error",i("audio.allow_recording_access")),r}}},[o,i]}class an extends Vn{constructor(e){super(),Yn(this,e,xn,$n,Kn,{i18n:1,micDevices:0})}get i18n(){return this.$$.ctx[1]}set i18n(e){this.$$set({i18n:e}),It()}get micDevices(){return this.$$.ctx[0]}set micDevices(e){this.$$set({micDevices:e}),It()}}const{SvelteComponent:ei,add_flush_callback:ti,append:U,attr:Z,bind:ni,binding_callbacks:De,create_component:jt,destroy_component:Ot,detach:un,element:_e,flush:Ae,init:ii,insert:_n,listen:Ce,mount_component:Wt,run_all:oi,safe_not_equal:si,set_data:Pe,space:ye,text:Be,transition_in:Nt,transition_out:Ft}=window.__gradio__svelte__internal;function Ht(n){let e,t;return{c(){e=_e("time"),t=Be(n[2]),Z(e,"class","duration-button duration svelte-11fum4b")},m(i,o){_n(i,e,o),U(e,t)},p(i,o){o&4&&Pe(t,i[2])},d(i){i&&un(e)}}}function ri(n){let e,t,i,o=n[1]("audio.record")+"",l,r,u,s=n[1]("audio.stop")+"",_,a,f,h,p=n[1]("audio.stop")+"",S,E,c,d,y,w,P=n[1]("audio.resume")+"",D,A,W,I,k,z,N,H;d=new On({});let C=n[4]&&!n[3]&&Ht(n);function me(R){n[21](R)}let V={i18n:n[1]};return n[5]!==void 0&&(V.micDevices=n[5]),I=new an({props:V}),De.push(()=>ni(I,"micDevices",me)),{c(){e=_e("div"),t=_e("div"),i=_e("button"),l=Be(o),r=ye(),u=_e("button"),_=Be(s),f=ye(),h=_e("button"),S=Be(p),E=ye(),c=_e("button"),jt(d.$$.fragment),y=ye(),w=_e("button"),D=Be(P),A=ye(),C&&C.c(),W=ye(),jt(I.$$.fragment),Z(i,"class","record record-button svelte-11fum4b"),Z(u,"class",a="stop-button "+(n[0].isPaused()?"stop-button-paused":"")+" svelte-11fum4b"),Z(h,"id","stop-paused"),Z(h,"class","stop-button-paused svelte-11fum4b"),Z(c,"aria-label","pause"),Z(c,"class","pause-button svelte-11fum4b"),Z(w,"class","resume-button svelte-11fum4b"),Z(t,"class","wrapper svelte-11fum4b"),Z(e,"class","controls svelte-11fum4b")},m(R,v){_n(R,e,v),U(e,t),U(t,i),U(i,l),n[11](i),U(t,r),U(t,u),U(u,_),n[13](u),U(t,f),U(t,h),U(h,S),n[15](h),U(t,E),U(t,c),Wt(d,c,null),n[17](c),U(t,y),U(t,w),U(w,D),n[19](w),U(t,A),C&&C.m(t,null),U(e,W),Wt(I,e,null),z=!0,N||(H=[Ce(i,"click",n[12]),Ce(u,"click",n[14]),Ce(h,"click",n[16]),Ce(c,"click",n[18]),Ce(w,"click",n[20])],N=!0)},p(R,[v]){(!z||v&2)&&o!==(o=R[1]("audio.record")+"")&&Pe(l,o),(!z||v&2)&&s!==(s=R[1]("audio.stop")+"")&&Pe(_,s),(!z||v&1&&a!==(a="stop-button "+(R[0].isPaused()?"stop-button-paused":"")+" svelte-11fum4b"))&&Z(u,"class",a),(!z||v&2)&&p!==(p=R[1]("audio.stop")+"")&&Pe(S,p),(!z||v&2)&&P!==(P=R[1]("audio.resume")+"")&&Pe(D,P),R[4]&&!R[3]?C?C.p(R,v):(C=Ht(R),C.c(),C.m(t,null)):C&&(C.d(1),C=null);const T={};v&2&&(T.i18n=R[1]),!k&&v&32&&(k=!0,T.micDevices=R[5],ti(()=>k=!1)),I.$set(T)},i(R){z||(Nt(d.$$.fragment,R),Nt(I.$$.fragment,R),z=!0)},o(R){Ft(d.$$.fragment,R),Ft(I.$$.fragment,R),z=!1},d(R){R&&un(e),n[11](null),n[13](null),n[15](null),Ot(d),n[17](null),n[19](null),C&&C.d(),Ot(I),N=!1,oi(H)}}}function li(n,e,t){let{record:i}=e,{i18n:o}=e,l=[],r,u,s,_,a,{record_time:f}=e,{show_recording_waveform:h}=e,{timing:p=!1}=e;function S(k){De[k?"unshift":"push"](()=>{r=k,t(6,r),t(0,i)})}const E=()=>i.startRecording();function c(k){De[k?"unshift":"push"](()=>{_=k,t(9,_),t(0,i)})}const d=()=>{i.isPaused()&&(i.resumeRecording(),i.stopRecording()),i.stopRecording()};function y(k){De[k?"unshift":"push"](()=>{a=k,t(10,a),t(0,i)})}const w=()=>{i.isPaused()&&(i.resumeRecording(),i.stopRecording()),i.stopRecording()};function P(k){De[k?"unshift":"push"](()=>{u=k,t(7,u),t(0,i)})}const D=()=>i.pauseRecording();function A(k){De[k?"unshift":"push"](()=>{s=k,t(8,s),t(0,i)})}const W=()=>i.resumeRecording();function I(k){l=k,t(5,l)}return n.$$set=k=>{"record"in k&&t(0,i=k.record),"i18n"in k&&t(1,o=k.i18n),"record_time"in k&&t(2,f=k.record_time),"show_recording_waveform"in k&&t(3,h=k.show_recording_waveform),"timing"in k&&t(4,p=k.timing)},n.$$.update=()=>{n.$$.dirty&1&&i.on("record-start",()=>{i.startMic(),t(6,r.style.display="none",r),t(9,_.style.display="flex",_),t(7,u.style.display="block",u)}),n.$$.dirty&1&&i.on("record-end",()=>{i.isPaused()&&(i.resumeRecording(),i.stopRecording()),i.stopMic(),t(6,r.style.display="flex",r),t(9,_.style.display="none",_),t(7,u.style.display="none",u),t(6,r.disabled=!1,r)}),n.$$.dirty&1&&i.on("record-pause",()=>{t(7,u.style.display="none",u),t(8,s.style.display="block",s),t(9,_.style.display="none",_),t(10,a.style.display="flex",a)}),n.$$.dirty&1&&i.on("record-resume",()=>{t(7,u.style.display="block",u),t(8,s.style.display="none",s),t(6,r.style.display="none",r),t(9,_.style.display="flex",_),t(10,a.style.display="none",a)})},[i,o,f,h,p,l,r,u,s,_,a,S,E,c,d,y,w,P,D,A,W,I]}class ai extends ei{constructor(e){super(),ii(this,e,li,ri,si,{record:0,i18n:1,record_time:2,show_recording_waveform:3,timing:4})}get record(){return this.$$.ctx[0]}set record(e){this.$$set({record:e}),Ae()}get i18n(){return this.$$.ctx[1]}set i18n(e){this.$$set({i18n:e}),Ae()}get record_time(){return this.$$.ctx[2]}set record_time(e){this.$$set({record_time:e}),Ae()}get show_recording_waveform(){return this.$$.ctx[3]}set show_recording_waveform(e){this.$$set({show_recording_waveform:e}),Ae()}get timing(){return this.$$.ctx[4]}set timing(e){this.$$set({timing:e}),Ae()}}const{SvelteComponent:ui,add_flush_callback:Je,append:K,attr:ee,bind:Ge,binding_callbacks:fe,check_outros:Vt,create_component:cn,destroy_component:fn,detach:je,element:te,flush:he,group_outros:Jt,init:_i,insert:Oe,mount_component:dn,noop:ci,safe_not_equal:fi,set_data:mn,space:Re,text:gn,transition_in:ce,transition_out:Se}=window.__gradio__svelte__internal,{onMount:di}=window.__gradio__svelte__internal,{createEventDispatcher:mi}=window.__gradio__svelte__internal;function Gt(n){let e,t,i,o,l,r=n[0]==="edit"&&n[16]>0&&Yt(n);function u(a,f){return a[15]?hi:gi}let s=u(n),_=s(n);return{c(){e=te("div"),t=te("time"),t.textContent="0:00",i=Re(),o=te("div"),r&&r.c(),l=Re(),_.c(),ee(t,"class","time svelte-9n45fh"),ee(e,"class","timestamps svelte-9n45fh")},m(a,f){Oe(a,e,f),K(e,t),n[22](t),K(e,i),K(e,o),r&&r.m(o,null),K(o,l),_.m(o,null)},p(a,f){a[0]==="edit"&&a[16]>0?r?r.p(a,f):(r=Yt(a),r.c(),r.m(o,l)):r&&(r.d(1),r=null),s===(s=u(a))&&_?_.p(a,f):(_.d(1),_=s(a),_&&(_.c(),_.m(o,null)))},d(a){a&&je(e),n[22](null),r&&r.d(),_.d()}}}function Yt(n){let e,t=de(n[16])+"",i;return{c(){e=te("time"),i=gn(t),ee(e,"class","trim-duration svelte-9n45fh")},m(o,l){Oe(o,e,l),K(e,i)},p(o,l){l[0]&65536&&t!==(t=de(o[16])+"")&&mn(i,t)},d(o){o&&je(e)}}}function gi(n){let e;return{c(){e=te("time"),e.textContent="0:00",ee(e,"class","duration svelte-9n45fh")},m(t,i){Oe(t,e,i),n[23](e)},p:ci,d(t){t&&je(e),n[23](null)}}}function hi(n){let e,t=de(n[14])+"",i;return{c(){e=te("time"),i=gn(t),ee(e,"class","duration svelte-9n45fh")},m(o,l){Oe(o,e,l),K(e,i)},p(o,l){l[0]&16384&&t!==(t=de(o[14])+"")&&mn(i,t)},d(o){o&&je(e)}}}function Kt(n){let e,t,i;function o(r){n[24](r)}let l={i18n:n[1],timing:n[15],show_recording_waveform:n[2].show_recording_waveform,record_time:de(n[14])};return n[6]!==void 0&&(l.record=n[6]),e=new ai({props:l}),fe.push(()=>Ge(e,"record",o)),{c(){cn(e.$$.fragment)},m(r,u){dn(e,r,u),i=!0},p(r,u){const s={};u[0]&2&&(s.i18n=r[1]),u[0]&32768&&(s.timing=r[15]),u[0]&4&&(s.show_recording_waveform=r[2].show_recording_waveform),u[0]&16384&&(s.record_time=de(r[14])),!t&&u[0]&64&&(t=!0,s.record=r[6],Je(()=>t=!1)),e.$set(s)},i(r){i||(ce(e.$$.fragment,r),i=!0)},o(r){Se(e.$$.fragment,r),i=!1},d(r){fn(e,r)}}}function Qt(n){let e,t,i,o,l;function r(a){n[25](a)}function u(a){n[26](a)}function s(a){n[27](a)}let _={container:n[10],playing:n[9],audio_duration:n[13],i18n:n[1],editable:n[4],interactive:!0,handle_trim_audio:n[17],show_redo:!0,handle_reset_value:n[3],waveform_options:n[2]};return n[5]!==void 0&&(_.waveform=n[5]),n[16]!==void 0&&(_.trimDuration=n[16]),n[0]!==void 0&&(_.mode=n[0]),e=new Cn({props:_}),fe.push(()=>Ge(e,"waveform",r)),fe.push(()=>Ge(e,"trimDuration",u)),fe.push(()=>Ge(e,"mode",s)),{c(){cn(e.$$.fragment)},m(a,f){dn(e,a,f),l=!0},p(a,f){const h={};f[0]&1024&&(h.container=a[10]),f[0]&512&&(h.playing=a[9]),f[0]&8192&&(h.audio_duration=a[13]),f[0]&2&&(h.i18n=a[1]),f[0]&16&&(h.editable=a[4]),f[0]&8&&(h.handle_reset_value=a[3]),f[0]&4&&(h.waveform_options=a[2]),!t&&f[0]&32&&(t=!0,h.waveform=a[5],Je(()=>t=!1)),!i&&f[0]&65536&&(i=!0,h.trimDuration=a[16],Je(()=>i=!1)),!o&&f[0]&1&&(o=!0,h.mode=a[0],Je(()=>o=!1)),e.$set(h)},i(a){l||(ce(e.$$.fragment,a),l=!0)},o(a){Se(e.$$.fragment,a),l=!1},d(a){fn(e,a)}}}function bi(n){let e,t,i,o,l,r,u,s,_=(n[15]||n[12])&&n[2].show_recording_waveform&&Gt(n),a=n[11]&&!n[12]&&Kt(n),f=n[5]&&n[12]&&Qt(n);return{c(){e=te("div"),t=te("div"),i=Re(),o=te("div"),l=Re(),_&&_.c(),r=Re(),a&&a.c(),u=Re(),f&&f.c(),ee(t,"class","microphone svelte-9n45fh"),ee(t,"data-testid","microphone-waveform"),ee(o,"data-testid","recording-waveform"),ee(e,"class","component-wrapper svelte-9n45fh")},m(h,p){Oe(h,e,p),K(e,t),n[20](t),K(e,i),K(e,o),n[21](o),K(e,l),_&&_.m(e,null),K(e,r),a&&a.m(e,null),K(e,u),f&&f.m(e,null),s=!0},p(h,p){(h[15]||h[12])&&h[2].show_recording_waveform?_?_.p(h,p):(_=Gt(h),_.c(),_.m(e,r)):_&&(_.d(1),_=null),h[11]&&!h[12]?a?(a.p(h,p),p[0]&6144&&ce(a,1)):(a=Kt(h),a.c(),ce(a,1),a.m(e,u)):a&&(Jt(),Se(a,1,1,()=>{a=null}),Vt()),h[5]&&h[12]?f?(f.p(h,p),p[0]&4128&&ce(f,1)):(f=Qt(h),f.c(),ce(f,1),f.m(e,null)):f&&(Jt(),Se(f,1,1,()=>{f=null}),Vt())},i(h){s||(ce(a),ce(f),s=!0)},o(h){Se(a),Se(f),s=!1},d(h){h&&je(e),n[20](null),n[21](null),_&&_.d(),a&&a.d(),f&&f.d()}}}function pi(n,e,t){let{mode:i}=e,{i18n:o}=e,{dispatch_blob:l}=e,{waveform_settings:r}=e,{waveform_options:u={show_recording_waveform:!0}}=e,{handle_reset_value:s}=e,{editable:_=!0}=e,a,f,h=!1,p,S,E,c=null,d,y,w,P=0,D,A=!1,W=0;const I=()=>{clearInterval(D),D=setInterval(()=>{t(14,P++,P)},1e3)},k=mi();function z(){if(I(),t(15,A=!0),k("start_recording"),u.show_recording_waveform){let b=S;b&&(b.style.display="block")}}async function N(b){t(14,P=0),t(15,A=!1),clearInterval(D);try{const F=await b.arrayBuffer(),B=await new AudioContext({sampleRate:r.sampleRate}).decodeAudioData(F);B&&await Pt(B).then(async X=>{await l([X],"change"),await l([X],"stop_recording")})}catch(F){console.error(F)}}const H=()=>{S&&t(11,S.innerHTML="",S),a!==void 0&&a.destroy(),S&&(a=wt.create({...r,normalize:!1,container:S}),t(6,E=a.registerPlugin(qe.create())),E.startMic(),E?.on("record-end",N),E?.on("record-start",z),E?.on("record-pause",()=>{k("pause_recording"),clearInterval(D)}),E?.on("record-end",b=>{t(12,c=URL.createObjectURL(b));const F=S,$=p;F&&(F.style.display="none"),$&&c&&($.innerHTML="",C())}))},C=()=>{let b=p;!c||!b||t(5,f=wt.create({container:b,url:c,...r}))},me=async(b,F)=>{t(0,i="edit");const $=f.getDecodedData();$&&await Pt($,b,F).then(async B=>{await l([B],"change"),await l([B],"stop_recording"),f.destroy(),C()}),k("edit")};di(()=>{H(),window.addEventListener("keydown",b=>{b.key==="ArrowRight"?Ct(f,.1):b.key==="ArrowLeft"&&Ct(f,-.1)})});function V(b){fe[b?"unshift":"push"](()=>{S=b,t(11,S)})}function R(b){fe[b?"unshift":"push"](()=>{p=b,t(10,p)})}function v(b){fe[b?"unshift":"push"](()=>{d=b,t(7,d),t(5,f)})}function T(b){fe[b?"unshift":"push"](()=>{y=b,t(8,y),t(5,f)})}function J(b){E=b,t(6,E)}function G(b){f=b,t(5,f)}function ke(b){W=b,t(16,W)}function Y(b){i=b,t(0,i)}return n.$$set=b=>{"mode"in b&&t(0,i=b.mode),"i18n"in b&&t(1,o=b.i18n),"dispatch_blob"in b&&t(18,l=b.dispatch_blob),"waveform_settings"in b&&t(19,r=b.waveform_settings),"waveform_options"in b&&t(2,u=b.waveform_options),"handle_reset_value"in b&&t(3,s=b.handle_reset_value),"editable"in b&&t(4,_=b.editable)},n.$$.update=()=>{n.$$.dirty[0]&64&&E?.on("record-resume",()=>{I()}),n.$$.dirty[0]&288&&f?.on("decode",b=>{t(13,w=b),y&&t(8,y.textContent=de(b),y)}),n.$$.dirty[0]&160&&f?.on("timeupdate",b=>d&&t(7,d.textContent=de(b),d)),n.$$.dirty[0]&32&&f?.on("pause",()=>{k("pause"),t(9,h=!1)}),n.$$.dirty[0]&32&&f?.on("play",()=>{k("play"),t(9,h=!0)}),n.$$.dirty[0]&32&&f?.on("finish",()=>{k("stop"),t(9,h=!1)})},[i,o,u,s,_,f,E,d,y,h,p,S,c,w,P,A,W,me,l,r,V,R,v,T,J,G,ke,Y]}class wi extends ui{constructor(e){super(),_i(this,e,pi,bi,fi,{mode:0,i18n:1,dispatch_blob:18,waveform_settings:19,waveform_options:2,handle_reset_value:3,editable:4},null,[-1,-1])}get mode(){return this.$$.ctx[0]}set mode(e){this.$$set({mode:e}),he()}get i18n(){return this.$$.ctx[1]}set i18n(e){this.$$set({i18n:e}),he()}get dispatch_blob(){return this.$$.ctx[18]}set dispatch_blob(e){this.$$set({dispatch_blob:e}),he()}get waveform_settings(){return this.$$.ctx[19]}set waveform_settings(e){this.$$set({waveform_settings:e}),he()}get waveform_options(){return this.$$.ctx[2]}set waveform_options(e){this.$$set({waveform_options:e}),he()}get handle_reset_value(){return this.$$.ctx[3]}set handle_reset_value(e){this.$$set({handle_reset_value:e}),he()}get editable(){return this.$$.ctx[4]}set editable(e){this.$$set({editable:e}),he()}}const{SvelteComponent:vi,add_flush_callback:ki,append:Q,attr:ne,bind:yi,binding_callbacks:hn,check_outros:Di,create_component:bn,destroy_component:pn,detach:We,element:re,flush:ue,group_outros:Ri,init:Si,insert:Ne,listen:yt,mount_component:wn,noop:Qe,null_to_empty:Xt,safe_not_equal:Ei,set_data:Dt,set_style:Zt,space:ze,text:Rt,transition_in:Ye,transition_out:Ke}=window.__gradio__svelte__internal,{onMount:Mi}=window.__gradio__svelte__internal;function $t(n){let e;return{c(){e=re("div"),Zt(e,"display",n[0]?"block":"none")},m(t,i){Ne(t,e,i),n[11](e)},p(t,i){i&1&&Zt(e,"display",t[0]?"block":"none")},d(t){t&&We(e),n[11](null)}}}function Ai(n){let e,t,i,o=n[4]("audio.record")+"",l,r,u;return{c(){e=re("button"),t=re("span"),t.innerHTML='<span class="dot"></span>',i=ze(),l=Rt(o),ne(t,"class","record-icon"),ne(e,"class","record-button svelte-1fz19cj")},m(s,_){Ne(s,e,_),Q(e,t),Q(e,i),Q(e,l),r||(u=yt(e,"click",n[14]),r=!0)},p(s,_){_&16&&o!==(o=s[4]("audio.record")+"")&&Dt(l,o)},i:Qe,o:Qe,d(s){s&&We(e),r=!1,u()}}}function Ci(n){let e,t,i,o,l=n[4]("audio.waiting")+"",r,u,s,_;return i=new Un({}),{c(){e=re("button"),t=re("div"),bn(i.$$.fragment),o=ze(),r=Rt(l),ne(t,"class","icon svelte-1fz19cj"),ne(e,"class","spinner-button svelte-1fz19cj")},m(a,f){Ne(a,e,f),Q(e,t),wn(i,t,null),Q(e,o),Q(e,r),u=!0,s||(_=yt(e,"click",n[13]),s=!0)},p(a,f){(!u||f&16)&&l!==(l=a[4]("audio.waiting")+"")&&Dt(r,l)},i(a){u||(Ye(i.$$.fragment,a),u=!0)},o(a){Ke(i.$$.fragment,a),u=!1},d(a){a&&We(e),pn(i),s=!1,_()}}}function Pi(n){let e,t,i,o=(n[1]?n[4]("audio.pause"):n[4]("audio.stop"))+"",l,r,u,s;return{c(){e=re("button"),t=re("span"),t.innerHTML='<span class="pinger"></span> <span class="dot"></span>',i=ze(),l=Rt(o),ne(t,"class","record-icon"),ne(e,"class",r=Xt(n[1]?"stop-button-paused":"stop-button")+" svelte-1fz19cj")},m(_,a){Ne(_,e,a),Q(e,t),Q(e,i),Q(e,l),u||(s=yt(e,"click",n[12]),u=!0)},p(_,a){a&18&&o!==(o=(_[1]?_[4]("audio.pause"):_[4]("audio.stop"))+"")&&Dt(l,o),a&2&&r!==(r=Xt(_[1]?"stop-button-paused":"stop-button")+" svelte-1fz19cj")&&ne(e,"class",r)},i:Qe,o:Qe,d(_){_&&We(e),u=!1,s()}}}function Bi(n){let e,t,i,o,l,r,u,s,_,a=n[5].show_recording_waveform&&$t(n);const f=[Pi,Ci,Ai],h=[];function p(c,d){return c[0]&&!c[6]?0:c[0]&&c[6]?1:2}o=p(n),l=h[o]=f[o](n);function S(c){n[15](c)}let E={i18n:n[4]};return n[9]!==void 0&&(E.micDevices=n[9]),u=new an({props:E}),hn.push(()=>yi(u,"micDevices",S)),{c(){e=re("div"),a&&a.c(),t=ze(),i=re("div"),l.c(),r=ze(),bn(u.$$.fragment),ne(i,"class","controls svelte-1fz19cj"),ne(e,"class","mic-wrap svelte-1fz19cj")},m(c,d){Ne(c,e,d),a&&a.m(e,null),Q(e,t),Q(e,i),h[o].m(i,null),Q(i,r),wn(u,i,null),_=!0},p(c,[d]){c[5].show_recording_waveform?a?a.p(c,d):(a=$t(c),a.c(),a.m(e,t)):a&&(a.d(1),a=null);let y=o;o=p(c),o===y?h[o].p(c,d):(Ri(),Ke(h[y],1,1,()=>{h[y]=null}),Di(),l=h[o],l?l.p(c,d):(l=h[o]=f[o](c),l.c()),Ye(l,1),l.m(i,r));const w={};d&16&&(w.i18n=c[4]),!s&&d&512&&(s=!0,w.micDevices=c[9],ki(()=>s=!1)),u.$set(w)},i(c){_||(Ye(l),Ye(u.$$.fragment,c),_=!0)},o(c){Ke(l),Ke(u.$$.fragment,c),_=!1},d(c){c&&We(e),a&&a.d(),h[o].d(),pn(u)}}}function Li(n,e,t){let{recording:i=!1}=e,{paused_recording:o=!1}=e,{stop:l}=e,{record:r}=e,{i18n:u}=e,{waveform_settings:s}=e,{waveform_options:_={show_recording_waveform:!0}}=e,{waiting:a=!1}=e,f,h,p,S=[];Mi(()=>{E()});const E=()=>{f!==void 0&&f.destroy(),p&&(f=wt.create({...s,height:100,container:p}),t(7,h=f.registerPlugin(qe.create())))};function c(D){hn[D?"unshift":"push"](()=>{p=D,t(8,p)})}const d=()=>{h?.stopMic(),l()},y=()=>{l()},w=()=>{h?.startMic(),r()};function P(D){S=D,t(9,S)}return n.$$set=D=>{"recording"in D&&t(0,i=D.recording),"paused_recording"in D&&t(1,o=D.paused_recording),"stop"in D&&t(2,l=D.stop),"record"in D&&t(3,r=D.record),"i18n"in D&&t(4,u=D.i18n),"waveform_settings"in D&&t(10,s=D.waveform_settings),"waveform_options"in D&&t(5,_=D.waveform_options),"waiting"in D&&t(6,a=D.waiting)},[i,o,l,r,u,_,a,h,p,S,s,c,d,y,w,P]}class zi extends vi{constructor(e){super(),Si(this,e,Li,Bi,Ei,{recording:0,paused_recording:1,stop:2,record:3,i18n:4,waveform_settings:10,waveform_options:5,waiting:6})}get recording(){return this.$$.ctx[0]}set recording(e){this.$$set({recording:e}),ue()}get paused_recording(){return this.$$.ctx[1]}set paused_recording(e){this.$$set({paused_recording:e}),ue()}get stop(){return this.$$.ctx[2]}set stop(e){this.$$set({stop:e}),ue()}get record(){return this.$$.ctx[3]}set record(e){this.$$set({record:e}),ue()}get i18n(){return this.$$.ctx[4]}set i18n(e){this.$$set({i18n:e}),ue()}get waveform_settings(){return this.$$.ctx[10]}set waveform_settings(e){this.$$set({waveform_settings:e}),ue()}get waveform_options(){return this.$$.ctx[5]}set waveform_options(e){this.$$set({waveform_options:e}),ue()}get waiting(){return this.$$.ctx[6]}set waiting(e){this.$$set({waiting:e}),ue()}}const{SvelteComponent:Ii,add_flush_callback:Ie,append:xt,attr:Ti,bind:Te,binding_callbacks:Ue,bubble:be,check_outros:St,create_component:ie,create_slot:Ui,destroy_component:oe,detach:Ee,element:qi,empty:vn,flush:L,get_all_dirty_from_scope:ji,get_slot_changes:Oi,group_outros:Et,init:Wi,insert:Me,mount_component:se,safe_not_equal:Ni,space:Le,transition_in:j,transition_out:O,update_slot_base:Fi}=window.__gradio__svelte__internal,{onDestroy:Hi,createEventDispatcher:Vi,tick:Zo}=window.__gradio__svelte__internal;function Ji(n){let e,t,i,o,l;e=new tn({props:{i18n:n[11],download:n[8]?n[1].url:null}}),e.$on("clear",n[27]),e.$on("edit",n[45]);function r(s){n[46](s)}let u={value:n[1],label:n[4],i18n:n[11],dispatch_blob:n[25],waveform_settings:n[12],waveform_options:n[14],trim_region_settings:n[13],handle_reset_value:n[15],editable:n[16],loop:n[6],interactive:!0};return n[23]!==void 0&&(u.mode=n[23]),i=new Pn({props:u}),Ue.push(()=>Te(i,"mode",r)),i.$on("stop",n[47]),i.$on("play",n[48]),i.$on("pause",n[49]),i.$on("edit",n[50]),{c(){ie(e.$$.fragment),t=Le(),ie(i.$$.fragment)},m(s,_){se(e,s,_),Me(s,t,_),se(i,s,_),l=!0},p(s,_){const a={};_[0]&2048&&(a.i18n=s[11]),_[0]&258&&(a.download=s[8]?s[1].url:null),e.$set(a);const f={};_[0]&2&&(f.value=s[1]),_[0]&16&&(f.label=s[4]),_[0]&2048&&(f.i18n=s[11]),_[0]&4096&&(f.waveform_settings=s[12]),_[0]&16384&&(f.waveform_options=s[14]),_[0]&8192&&(f.trim_region_settings=s[13]),_[0]&32768&&(f.handle_reset_value=s[15]),_[0]&65536&&(f.editable=s[16]),_[0]&64&&(f.loop=s[6]),!o&&_[0]&8388608&&(o=!0,f.mode=s[23],Ie(()=>o=!1)),i.$set(f)},i(s){l||(j(e.$$.fragment,s),j(i.$$.fragment,s),l=!0)},o(s){O(e.$$.fragment,s),O(i.$$.fragment,s),l=!1},d(s){s&&Ee(t),oe(e,s),oe(i,s)}}}function Gi(n){let e,t,i,o;const l=[Ki,Yi],r=[];function u(s,_){return s[2]==="microphone"?0:s[2]==="upload"?1:-1}return~(e=u(n))&&(t=r[e]=l[e](n)),{c(){t&&t.c(),i=vn()},m(s,_){~e&&r[e].m(s,_),Me(s,i,_),o=!0},p(s,_){let a=e;e=u(s),e===a?~e&&r[e].p(s,_):(t&&(Et(),O(r[a],1,1,()=>{r[a]=null}),St()),~e?(t=r[e],t?t.p(s,_):(t=r[e]=l[e](s),t.c()),j(t,1),t.m(i.parentNode,i)):t=null)},i(s){o||(j(t),o=!0)},o(s){O(t),o=!1},d(s){s&&Ee(i),~e&&r[e].d(s)}}}function Yi(n){let e,t,i,o;function l(s){n[42](s)}function r(s){n[43](s)}let u={filetype:"audio/aac,audio/midi,audio/mpeg,audio/ogg,audio/wav,audio/x-wav,audio/opus,audio/webm,audio/flac,audio/vnd.rn-realaudio,audio/x-ms-wma,audio/x-aiff,audio/amr,audio/*",root:n[5],max_file_size:n[17],upload:n[18],stream_handler:n[19],$$slots:{default:[Qi]},$$scope:{ctx:n}};return n[0]!==void 0&&(u.dragging=n[0]),n[3]!==void 0&&(u.uploading=n[3]),e=new zn({props:u}),Ue.push(()=>Te(e,"dragging",l)),Ue.push(()=>Te(e,"uploading",r)),e.$on("load",n[28]),e.$on("error",n[44]),{c(){ie(e.$$.fragment)},m(s,_){se(e,s,_),o=!0},p(s,_){const a={};_[0]&32&&(a.root=s[5]),_[0]&131072&&(a.max_file_size=s[17]),_[0]&262144&&(a.upload=s[18]),_[0]&524288&&(a.stream_handler=s[19]),_[1]&2097152&&(a.$$scope={dirty:_,ctx:s}),!t&&_[0]&1&&(t=!0,a.dragging=s[0],Ie(()=>t=!1)),!i&&_[0]&8&&(i=!0,a.uploading=s[3],Ie(()=>i=!1)),e.$set(a)},i(s){o||(j(e.$$.fragment,s),o=!0)},o(s){O(e.$$.fragment,s),o=!1},d(s){oe(e,s)}}}function Ki(n){let e,t,i,o,l,r;e=new tn({props:{i18n:n[11]}}),e.$on("clear",n[27]);const u=[Zi,Xi],s=[];function _(a,f){return a[10]?0:1}return i=_(n),o=s[i]=u[i](n),{c(){ie(e.$$.fragment),t=Le(),o.c(),l=vn()},m(a,f){se(e,a,f),Me(a,t,f),s[i].m(a,f),Me(a,l,f),r=!0},p(a,f){const h={};f[0]&2048&&(h.i18n=a[11]),e.$set(h);let p=i;i=_(a),i===p?s[i].p(a,f):(Et(),O(s[p],1,1,()=>{s[p]=null}),St(),o=s[i],o?o.p(a,f):(o=s[i]=u[i](a),o.c()),j(o,1),o.m(l.parentNode,l))},i(a){r||(j(e.$$.fragment,a),j(o),r=!0)},o(a){O(e.$$.fragment,a),O(o),r=!1},d(a){a&&(Ee(t),Ee(l)),oe(e,a),s[i].d(a)}}}function Qi(n){let e;const t=n[37].default,i=Ui(t,n,n[52],null);return{c(){i&&i.c()},m(o,l){i&&i.m(o,l),e=!0},p(o,l){i&&i.p&&(!e||l[1]&2097152)&&Fi(i,t,o,o[52],e?Oi(t,o[52],l,null):ji(o[52]),null)},i(o){e||(j(i,o),e=!0)},o(o){O(i,o),e=!1},d(o){i&&i.d(o)}}}function Xi(n){let e,t,i;function o(r){n[38](r)}let l={i18n:n[11],editable:n[16],dispatch_blob:n[25],waveform_settings:n[12],waveform_options:n[14],handle_reset_value:n[15]};return n[23]!==void 0&&(l.mode=n[23]),e=new wi({props:l}),Ue.push(()=>Te(e,"mode",o)),e.$on("start_recording",n[39]),e.$on("pause_recording",n[40]),e.$on("stop_recording",n[41]),{c(){ie(e.$$.fragment)},m(r,u){se(e,r,u),i=!0},p(r,u){const s={};u[0]&2048&&(s.i18n=r[11]),u[0]&65536&&(s.editable=r[16]),u[0]&4096&&(s.waveform_settings=r[12]),u[0]&16384&&(s.waveform_options=r[14]),u[0]&32768&&(s.handle_reset_value=r[15]),!t&&u[0]&8388608&&(t=!0,s.mode=r[23],Ie(()=>t=!1)),e.$set(s)},i(r){i||(j(e.$$.fragment,r),i=!0)},o(r){O(e.$$.fragment,r),i=!1},d(r){oe(e,r)}}}function Zi(n){let e,t;return e=new zi({props:{record:n[26],recording:n[22],stop:n[29],i18n:n[11],waveform_settings:n[12],waveform_options:n[14],waiting:n[21]==="waiting"}}),{c(){ie(e.$$.fragment)},m(i,o){se(e,i,o),t=!0},p(i,o){const l={};o[0]&4194304&&(l.recording=i[22]),o[0]&2048&&(l.i18n=i[11]),o[0]&4096&&(l.waveform_settings=i[12]),o[0]&16384&&(l.waveform_options=i[14]),o[0]&2097152&&(l.waiting=i[21]==="waiting"),e.$set(l)},i(i){t||(j(e.$$.fragment,i),t=!0)},o(i){O(e.$$.fragment,i),t=!1},d(i){oe(e,i)}}}function $i(n){let e,t,i,o,l,r,u,s,_,a,f;e=new In({props:{show_label:n[7],Icon:Tn,float:n[2]==="upload"&&n[1]===null,label:n[4]||n[11]("audio.audio")}}),o=new jn({props:{time_limit:n[20]}});const h=[Gi,Ji],p=[];function S(d,y){return d[1]===null||d[10]?0:1}r=S(n),u=p[r]=h[r](n);function E(d){n[51](d)}let c={sources:n[9],handle_clear:n[27]};return n[2]!==void 0&&(c.active_source=n[2]),_=new qn({props:c}),Ue.push(()=>Te(_,"active_source",E)),{c(){ie(e.$$.fragment),t=Le(),i=qi("div"),ie(o.$$.fragment),l=Le(),u.c(),s=Le(),ie(_.$$.fragment),Ti(i,"class","audio-container svelte-cbyffp")},m(d,y){se(e,d,y),Me(d,t,y),Me(d,i,y),se(o,i,null),xt(i,l),p[r].m(i,null),xt(i,s),se(_,i,null),f=!0},p(d,y){const w={};y[0]&128&&(w.show_label=d[7]),y[0]&6&&(w.float=d[2]==="upload"&&d[1]===null),y[0]&2064&&(w.label=d[4]||d[11]("audio.audio")),e.$set(w);const P={};y[0]&1048576&&(P.time_limit=d[20]),o.$set(P);let D=r;r=S(d),r===D?p[r].p(d,y):(Et(),O(p[D],1,1,()=>{p[D]=null}),St(),u=p[r],u?u.p(d,y):(u=p[r]=h[r](d),u.c()),j(u,1),u.m(i,s));const A={};y[0]&512&&(A.sources=d[9]),!a&&y[0]&4&&(a=!0,A.active_source=d[2],Ie(()=>a=!1)),_.$set(A)},i(d){f||(j(e.$$.fragment,d),j(o.$$.fragment,d),j(u),j(_.$$.fragment,d),f=!0)},o(d){O(e.$$.fragment,d),O(o.$$.fragment,d),O(u),O(_.$$.fragment,d),f=!1},d(d){d&&(Ee(t),Ee(i)),oe(e,d),oe(o),p[r].d(),oe(_)}}}const en=44;function xi(n,e,t){let{$$slots:i={},$$scope:o}=e,{value:l=null}=e,{label:r}=e,{root:u}=e,{loop:s}=e,{show_label:_=!0}=e,{show_download_button:a=!1}=e,{sources:f=["microphone","upload"]}=e,{pending:h=!1}=e,{streaming:p=!1}=e,{i18n:S}=e,{waveform_settings:E}=e,{trim_region_settings:c={}}=e,{waveform_options:d={}}=e,{dragging:y}=e,{active_source:w}=e,{handle_reset_value:P=()=>{}}=e,{editable:D=!0}=e,{max_file_size:A=null}=e,{upload:W}=e,{stream_handler:I}=e,{stream_every:k}=e,{uploading:z=!1}=e,N=null,H="closed";const C=m=>{m==="closed"?(t(20,N=null),t(21,H="closed")):m==="waiting"?t(21,H="waiting"):t(21,H="open")},me=m=>{V&&t(20,N=m)};let V=!1,R,v="",T,J=[],G=!1,ke=!1,Y=[],b;function F(){b=[Bt(()=>import("./module-BQ9WeAw_.js"),__vite__mapDeps([0,1,2,3]),import.meta.url),Bt(()=>import("./module-BA06XY8_.js"),__vite__mapDeps([4,1]),import.meta.url)]}typeof window<"u"&&p&&F();const B=Vi(),X=async(m,q)=>{let x=new File(m,"audio.wav");const ge=await Ln([x],q==="stream");t(1,l=(await W(ge,u,void 0,A||void 0))?.filter(Boolean)[0]),B(q,l)};Hi(()=>{p&&R&&R.state!=="inactive"&&R.stop()});async function $e(){let m;try{m=await navigator.mediaDevices.getUserMedia({audio:!0})}catch(q){if(!navigator.mediaDevices){B("error",S("audio.no_device_support"));return}if(q instanceof DOMException&&q.name=="NotAllowedError"){B("error",S("audio.allow_recording_access"));return}throw q}if(m!=null){if(console.log({streaming:p}),p){const[{MediaRecorder:q,register:x},{connect:ge}]=await Promise.all(b);await x(await ge()),R=new q(m,{mimeType:"audio/wav"}),R.addEventListener("dataavailable",xe)}else R=new MediaRecorder(m),R.addEventListener("dataavailable",q=>{Y.push(q.data),console.log("data")});R.addEventListener("stop",async()=>{t(22,V=!1),await X(Y,"change"),await X(Y,"stop_recording"),Y=[]}),ke=!0}}async function xe(m){let q=await m.data.arrayBuffer(),x=new Uint8Array(q);if(T||(t(34,T=new Uint8Array(q.slice(0,en))),x=new Uint8Array(q.slice(en))),h)J.push(x);else{let ge=[T].concat(J,[x]);if(!V||H==="waiting")return;X(ge,"stream"),t(35,J=[])}console.log("chunk")}async function et(){console.log("recording"),t(22,V=!0),B("start_recording"),ke||await $e(),t(34,T=void 0),p&&R.start(k*1e3)}function tt(){B("change",null),B("clear"),t(23,v=""),t(1,l=null)}function nt({detail:m}){t(1,l=m),B("change",m),B("upload",m)}async function it(){console.log("stopping"),t(22,V=!1),p&&(B("close_stream"),B("stop_recording"),R.stop(),h&&t(36,G=!0),X(Y,"stop_recording"),B("clear"),t(23,v=""))}function ot(m){v=m,t(23,v)}function st(m){be.call(this,n,m)}function rt(m){be.call(this,n,m)}function lt(m){be.call(this,n,m)}function at(m){y=m,t(0,y)}function ut(m){z=m,t(3,z)}const _t=({detail:m})=>B("error",m),ct=()=>t(23,v="edit");function ft(m){v=m,t(23,v)}function dt(m){be.call(this,n,m)}function mt(m){be.call(this,n,m)}function gt(m){be.call(this,n,m)}function ht(m){be.call(this,n,m)}function bt(m){w=m,t(2,w)}return n.$$set=m=>{"value"in m&&t(1,l=m.value),"label"in m&&t(4,r=m.label),"root"in m&&t(5,u=m.root),"loop"in m&&t(6,s=m.loop),"show_label"in m&&t(7,_=m.show_label),"show_download_button"in m&&t(8,a=m.show_download_button),"sources"in m&&t(9,f=m.sources),"pending"in m&&t(30,h=m.pending),"streaming"in m&&t(10,p=m.streaming),"i18n"in m&&t(11,S=m.i18n),"waveform_settings"in m&&t(12,E=m.waveform_settings),"trim_region_settings"in m&&t(13,c=m.trim_region_settings),"waveform_options"in m&&t(14,d=m.waveform_options),"dragging"in m&&t(0,y=m.dragging),"active_source"in m&&t(2,w=m.active_source),"handle_reset_value"in m&&t(15,P=m.handle_reset_value),"editable"in m&&t(16,D=m.editable),"max_file_size"in m&&t(17,A=m.max_file_size),"upload"in m&&t(18,W=m.upload),"stream_handler"in m&&t(19,I=m.stream_handler),"stream_every"in m&&t(31,k=m.stream_every),"uploading"in m&&t(3,z=m.uploading),"$$scope"in m&&t(52,o=m.$$scope)},n.$$.update=()=>{if(n.$$.dirty[0]&1&&B("drag",y),n.$$.dirty[0]&1073741824|n.$$.dirty[1]&56&&G&&h===!1&&(t(36,G=!1),T&&J)){let m=[T].concat(J);t(35,J=[]),X(m,"stream")}},[y,l,w,z,r,u,s,_,a,f,p,S,E,c,d,P,D,A,W,I,N,H,V,v,B,X,et,tt,nt,it,h,k,C,me,T,J,G,i,ot,st,rt,lt,at,ut,_t,ct,ft,dt,mt,gt,ht,bt,o]}class eo extends Ii{constructor(e){super(),Wi(this,e,xi,$i,Ni,{value:1,label:4,root:5,loop:6,show_label:7,show_download_button:8,sources:9,pending:30,streaming:10,i18n:11,waveform_settings:12,trim_region_settings:13,waveform_options:14,dragging:0,active_source:2,handle_reset_value:15,editable:16,max_file_size:17,upload:18,stream_handler:19,stream_every:31,uploading:3,modify_stream:32,set_time_limit:33},null,[-1,-1])}get value(){return this.$$.ctx[1]}set value(e){this.$$set({value:e}),L()}get label(){return this.$$.ctx[4]}set label(e){this.$$set({label:e}),L()}get root(){return this.$$.ctx[5]}set root(e){this.$$set({root:e}),L()}get loop(){return this.$$.ctx[6]}set loop(e){this.$$set({loop:e}),L()}get show_label(){return this.$$.ctx[7]}set show_label(e){this.$$set({show_label:e}),L()}get show_download_button(){return this.$$.ctx[8]}set show_download_button(e){this.$$set({show_download_button:e}),L()}get sources(){return this.$$.ctx[9]}set sources(e){this.$$set({sources:e}),L()}get pending(){return this.$$.ctx[30]}set pending(e){this.$$set({pending:e}),L()}get streaming(){return this.$$.ctx[10]}set streaming(e){this.$$set({streaming:e}),L()}get i18n(){return this.$$.ctx[11]}set i18n(e){this.$$set({i18n:e}),L()}get waveform_settings(){return this.$$.ctx[12]}set waveform_settings(e){this.$$set({waveform_settings:e}),L()}get trim_region_settings(){return this.$$.ctx[13]}set trim_region_settings(e){this.$$set({trim_region_settings:e}),L()}get waveform_options(){return this.$$.ctx[14]}set waveform_options(e){this.$$set({waveform_options:e}),L()}get dragging(){return this.$$.ctx[0]}set dragging(e){this.$$set({dragging:e}),L()}get active_source(){return this.$$.ctx[2]}set active_source(e){this.$$set({active_source:e}),L()}get handle_reset_value(){return this.$$.ctx[15]}set handle_reset_value(e){this.$$set({handle_reset_value:e}),L()}get editable(){return this.$$.ctx[16]}set editable(e){this.$$set({editable:e}),L()}get max_file_size(){return this.$$.ctx[17]}set max_file_size(e){this.$$set({max_file_size:e}),L()}get upload(){return this.$$.ctx[18]}set upload(e){this.$$set({upload:e}),L()}get stream_handler(){return this.$$.ctx[19]}set stream_handler(e){this.$$set({stream_handler:e}),L()}get stream_every(){return this.$$.ctx[31]}set stream_every(e){this.$$set({stream_every:e}),L()}get uploading(){return this.$$.ctx[3]}set uploading(e){this.$$set({uploading:e}),L()}get modify_stream(){return this.$$.ctx[32]}get set_time_limit(){return this.$$.ctx[33]}}const to=eo,{SvelteComponent:no,add_flush_callback:Fe,assign:kn,bind:He,binding_callbacks:Ve,check_outros:io,create_component:pe,destroy_component:we,detach:Mt,empty:oo,flush:M,get_spread_object:yn,get_spread_update:Dn,group_outros:so,init:ro,insert:At,mount_component:ve,safe_not_equal:lo,space:Rn,transition_in:le,transition_out:ae}=window.__gradio__svelte__internal,{afterUpdate:ao,onMount:uo}=window.__gradio__svelte__internal;function _o(n){let e,t;return e=new on({props:{variant:n[0]===null&&n[24]==="upload"?"dashed":"solid",border_mode:n[26]?"focus":"base",padding:!1,allow_overflow:!1,elem_id:n[3],elem_classes:n[4],visible:n[5],container:n[11],scale:n[12],min_width:n[13],$$slots:{default:[mo]},$$scope:{ctx:n}}}),{c(){pe(e.$$.fragment)},m(i,o){ve(e,i,o),t=!0},p(i,o){const l={};o[0]&16777217&&(l.variant=i[0]===null&&i[24]==="upload"?"dashed":"solid"),o[0]&67108864&&(l.border_mode=i[26]?"focus":"base"),o[0]&8&&(l.elem_id=i[3]),o[0]&16&&(l.elem_classes=i[4]),o[0]&32&&(l.visible=i[5]),o[0]&2048&&(l.container=i[11]),o[0]&4096&&(l.scale=i[12]),o[0]&8192&&(l.min_width=i[13]),o[0]&268355463|o[2]&32&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){t||(le(e.$$.fragment,i),t=!0)},o(i){ae(e.$$.fragment,i),t=!1},d(i){we(e,i)}}}function co(n){let e,t;return e=new on({props:{variant:"solid",border_mode:n[26]?"focus":"base",padding:!1,allow_overflow:!1,elem_id:n[3],elem_classes:n[4],visible:n[5],container:n[11],scale:n[12],min_width:n[13],$$slots:{default:[go]},$$scope:{ctx:n}}}),{c(){pe(e.$$.fragment)},m(i,o){ve(e,i,o),t=!0},p(i,o){const l={};o[0]&67108864&&(l.border_mode=i[26]?"focus":"base"),o[0]&8&&(l.elem_id=i[3]),o[0]&16&&(l.elem_classes=i[4]),o[0]&32&&(l.visible=i[5]),o[0]&2048&&(l.container=i[11]),o[0]&4096&&(l.scale=i[12]),o[0]&8192&&(l.min_width=i[13]),o[0]&138921219|o[2]&32&&(l.$$scope={dirty:o,ctx:i}),e.$set(l)},i(i){t||(le(e.$$.fragment,i),t=!0)},o(i){ae(e.$$.fragment,i),t=!1},d(i){we(e,i)}}}function fo(n){let e,t;return e=new Wn({props:{i18n:n[22].i18n,type:"audio"}}),{c(){pe(e.$$.fragment)},m(i,o){ve(e,i,o),t=!0},p(i,o){const l={};o[0]&4194304&&(l.i18n=i[22].i18n),e.$set(l)},i(i){t||(le(e.$$.fragment,i),t=!0)},o(i){ae(e.$$.fragment,i),t=!1},d(i){we(e,i)}}}function mo(n){let e,t,i,o,l,r,u,s;const _=[{autoscroll:n[22].autoscroll},{i18n:n[22].i18n},n[1]];let a={};for(let c=0;c<_.length;c+=1)a=kn(a,_[c]);e=new nn({props:a}),e.$on("clear_status",n[44]);function f(c){n[47](c)}function h(c){n[48](c)}function p(c){n[49](c)}function S(c){n[50](c)}let E={label:n[8],show_label:n[10],show_download_button:n[15],value:n[0],root:n[9],sources:n[7],active_source:n[24],pending:n[19],streaming:n[20],loop:n[14],max_file_size:n[22].max_file_size,handle_reset_value:n[28],editable:n[17],i18n:n[22].i18n,waveform_settings:n[27],waveform_options:n[18],trim_region_settings:n[29],stream_every:n[21],upload:n[45],stream_handler:n[46],$$slots:{default:[fo]},$$scope:{ctx:n}};return n[26]!==void 0&&(E.dragging=n[26]),n[23]!==void 0&&(E.uploading=n[23]),n[25]!==void 0&&(E.modify_stream=n[25]),n[2]!==void 0&&(E.set_time_limit=n[2]),i=new to({props:E}),Ve.push(()=>He(i,"dragging",f)),Ve.push(()=>He(i,"uploading",h)),Ve.push(()=>He(i,"modify_stream",p)),Ve.push(()=>He(i,"set_time_limit",S)),i.$on("change",n[51]),i.$on("stream",n[52]),i.$on("drag",n[53]),i.$on("edit",n[54]),i.$on("play",n[55]),i.$on("pause",n[56]),i.$on("stop",n[57]),i.$on("start_recording",n[58]),i.$on("pause_recording",n[59]),i.$on("stop_recording",n[60]),i.$on("upload",n[61]),i.$on("clear",n[62]),i.$on("error",n[30]),i.$on("close_stream",n[63]),{c(){pe(e.$$.fragment),t=Rn(),pe(i.$$.fragment)},m(c,d){ve(e,c,d),At(c,t,d),ve(i,c,d),s=!0},p(c,d){const y=d[0]&4194306?Dn(_,[d[0]&4194304&&{autoscroll:c[22].autoscroll},d[0]&4194304&&{i18n:c[22].i18n},d[0]&2&&yn(c[1])]):{};e.$set(y);const w={};d[0]&256&&(w.label=c[8]),d[0]&1024&&(w.show_label=c[10]),d[0]&32768&&(w.show_download_button=c[15]),d[0]&1&&(w.value=c[0]),d[0]&512&&(w.root=c[9]),d[0]&128&&(w.sources=c[7]),d[0]&16777216&&(w.active_source=c[24]),d[0]&524288&&(w.pending=c[19]),d[0]&1048576&&(w.streaming=c[20]),d[0]&16384&&(w.loop=c[14]),d[0]&4194304&&(w.max_file_size=c[22].max_file_size),d[0]&131072&&(w.editable=c[17]),d[0]&4194304&&(w.i18n=c[22].i18n),d[0]&134217728&&(w.waveform_settings=c[27]),d[0]&262144&&(w.waveform_options=c[18]),d[0]&2097152&&(w.stream_every=c[21]),d[0]&4194304&&(w.upload=c[45]),d[0]&4194304&&(w.stream_handler=c[46]),d[0]&4194304|d[2]&32&&(w.$$scope={dirty:d,ctx:c}),!o&&d[0]&67108864&&(o=!0,w.dragging=c[26],Fe(()=>o=!1)),!l&&d[0]&8388608&&(l=!0,w.uploading=c[23],Fe(()=>l=!1)),!r&&d[0]&33554432&&(r=!0,w.modify_stream=c[25],Fe(()=>r=!1)),!u&&d[0]&4&&(u=!0,w.set_time_limit=c[2],Fe(()=>u=!1)),i.$set(w)},i(c){s||(le(e.$$.fragment,c),le(i.$$.fragment,c),s=!0)},o(c){ae(e.$$.fragment,c),ae(i.$$.fragment,c),s=!1},d(c){c&&Mt(t),we(e,c),we(i,c)}}}function go(n){let e,t,i,o;const l=[{autoscroll:n[22].autoscroll},{i18n:n[22].i18n},n[1]];let r={};for(let u=0;u<l.length;u+=1)r=kn(r,l[u]);return e=new nn({props:r}),e.$on("clear_status",n[38]),i=new Bn({props:{i18n:n[22].i18n,show_label:n[10],show_download_button:n[15],show_share_button:n[16],value:n[0],label:n[8],loop:n[14],waveform_settings:n[27],waveform_options:n[18],editable:n[17]}}),i.$on("share",n[39]),i.$on("error",n[40]),i.$on("play",n[41]),i.$on("pause",n[42]),i.$on("stop",n[43]),{c(){pe(e.$$.fragment),t=Rn(),pe(i.$$.fragment)},m(u,s){ve(e,u,s),At(u,t,s),ve(i,u,s),o=!0},p(u,s){const _=s[0]&4194306?Dn(l,[s[0]&4194304&&{autoscroll:u[22].autoscroll},s[0]&4194304&&{i18n:u[22].i18n},s[0]&2&&yn(u[1])]):{};e.$set(_);const a={};s[0]&4194304&&(a.i18n=u[22].i18n),s[0]&1024&&(a.show_label=u[10]),s[0]&32768&&(a.show_download_button=u[15]),s[0]&65536&&(a.show_share_button=u[16]),s[0]&1&&(a.value=u[0]),s[0]&256&&(a.label=u[8]),s[0]&16384&&(a.loop=u[14]),s[0]&134217728&&(a.waveform_settings=u[27]),s[0]&262144&&(a.waveform_options=u[18]),s[0]&131072&&(a.editable=u[17]),i.$set(a)},i(u){o||(le(e.$$.fragment,u),le(i.$$.fragment,u),o=!0)},o(u){ae(e.$$.fragment,u),ae(i.$$.fragment,u),o=!1},d(u){u&&Mt(t),we(e,u),we(i,u)}}}function ho(n){let e,t,i,o;const l=[co,_o],r=[];function u(s,_){return s[6]?1:0}return e=u(n),t=r[e]=l[e](n),{c(){t.c(),i=oo()},m(s,_){r[e].m(s,_),At(s,i,_),o=!0},p(s,_){let a=e;e=u(s),e===a?r[e].p(s,_):(so(),ae(r[a],1,1,()=>{r[a]=null}),io(),t=r[e],t?t.p(s,_):(t=r[e]=l[e](s),t.c()),le(t,1),t.m(i.parentNode,i))},i(s){o||(le(t),o=!0)},o(s){ae(t),o=!1},d(s){s&&Mt(i),r[e].d(s)}}}function bo(n,e,t){let{value_is_output:i=!1}=e,{elem_id:o=""}=e,{elem_classes:l=[]}=e,{visible:r=!0}=e,{interactive:u}=e,{value:s=null}=e,{sources:_}=e,{label:a}=e,{root:f}=e,{show_label:h}=e,{container:p=!0}=e,{scale:S=null}=e,{min_width:E=void 0}=e,{loading_status:c}=e,{autoplay:d=!1}=e,{loop:y=!1}=e,{show_download_button:w}=e,{show_share_button:P=!1}=e,{editable:D=!0}=e,{waveform_options:A={}}=e,{pending:W}=e,{streaming:I}=e,{stream_every:k}=e,{input_ready:z}=e,N=!1,H="closed",C;function me(g){H=g,C(g)}const V=()=>H;let{set_time_limit:R}=e,{gradio:v}=e,T=null,J,G=s;const ke=()=>{G===null||s===G||t(0,s=G)};let Y,b,F="darkorange";uo(()=>{F=getComputedStyle(document?.documentElement).getPropertyValue("--color-accent"),B(),t(27,b.waveColor=A.waveform_color||"#9ca3af",b),t(27,b.progressColor=A.waveform_progress_color||F,b),t(27,b.mediaControls=A.show_controls,b),t(27,b.sampleRate=A.sample_rate||44100,b)});const $={color:A.trim_region_color,drag:!0,resize:!0};function B(){document.documentElement.style.setProperty("--trim-region-color",$.color||F)}function X({detail:g}){const[Mn,An]=g.includes("Invalid file type")?["warning","complete"]:["error","error"];t(1,c=c||{}),t(1,c.status=An,c),t(1,c.message=g,c),v.dispatch(Mn,g)}ao(()=>{t(31,i=!1)});const $e=()=>v.dispatch("clear_status",c),xe=g=>v.dispatch("share",g.detail),et=g=>v.dispatch("error",g.detail),tt=()=>v.dispatch("play"),nt=()=>v.dispatch("pause"),it=()=>v.dispatch("stop"),ot=()=>v.dispatch("clear_status",c),st=(...g)=>v.client.upload(...g),rt=(...g)=>v.client.stream(...g);function lt(g){Y=g,t(26,Y)}function at(g){N=g,t(23,N)}function ut(g){C=g,t(25,C)}function _t(g){R=g,t(2,R)}const ct=({detail:g})=>t(0,s=g),ft=({detail:g})=>{t(0,s=g),v.dispatch("stream",s)},dt=({detail:g})=>t(26,Y=g),mt=()=>v.dispatch("edit"),gt=()=>v.dispatch("play"),ht=()=>v.dispatch("pause"),bt=()=>v.dispatch("stop"),m=()=>v.dispatch("start_recording"),q=()=>v.dispatch("pause_recording"),x=g=>v.dispatch("stop_recording"),ge=()=>v.dispatch("upload"),Sn=()=>v.dispatch("clear"),En=()=>v.dispatch("close_stream","stream");return n.$$set=g=>{"value_is_output"in g&&t(31,i=g.value_is_output),"elem_id"in g&&t(3,o=g.elem_id),"elem_classes"in g&&t(4,l=g.elem_classes),"visible"in g&&t(5,r=g.visible),"interactive"in g&&t(6,u=g.interactive),"value"in g&&t(0,s=g.value),"sources"in g&&t(7,_=g.sources),"label"in g&&t(8,a=g.label),"root"in g&&t(9,f=g.root),"show_label"in g&&t(10,h=g.show_label),"container"in g&&t(11,p=g.container),"scale"in g&&t(12,S=g.scale),"min_width"in g&&t(13,E=g.min_width),"loading_status"in g&&t(1,c=g.loading_status),"autoplay"in g&&t(33,d=g.autoplay),"loop"in g&&t(14,y=g.loop),"show_download_button"in g&&t(15,w=g.show_download_button),"show_share_button"in g&&t(16,P=g.show_share_button),"editable"in g&&t(17,D=g.editable),"waveform_options"in g&&t(18,A=g.waveform_options),"pending"in g&&t(19,W=g.pending),"streaming"in g&&t(20,I=g.streaming),"stream_every"in g&&t(21,k=g.stream_every),"input_ready"in g&&t(32,z=g.input_ready),"set_time_limit"in g&&t(2,R=g.set_time_limit),"gradio"in g&&t(22,v=g.gradio)},n.$$.update=()=>{n.$$.dirty[0]&8388608&&t(32,z=!N),n.$$.dirty[0]&1|n.$$.dirty[1]&64&&s&&G===null&&t(37,G=s),n.$$.dirty[0]&4194305|n.$$.dirty[1]&33&&JSON.stringify(s)!==JSON.stringify(T)&&(t(36,T=s),v.dispatch("change"),i||v.dispatch("input")),n.$$.dirty[0]&16777344&&!J&&_&&t(24,J=_[0]),n.$$.dirty[1]&4&&t(27,b={height:50,barWidth:2,barGap:3,cursorWidth:2,cursorColor:"#ddd5e9",autoplay:d,barRadius:10,dragToSeek:!0,normalize:!0,minPxPerSec:20})},[s,c,R,o,l,r,u,_,a,f,h,p,S,E,y,w,P,D,A,W,I,k,v,N,J,C,Y,b,ke,$,X,i,z,d,me,V,T,G,$e,xe,et,tt,nt,it,ot,st,rt,lt,at,ut,_t,ct,ft,dt,mt,gt,ht,bt,m,q,x,ge,Sn,En]}class po extends no{constructor(e){super(),ro(this,e,bo,ho,lo,{value_is_output:31,elem_id:3,elem_classes:4,visible:5,interactive:6,value:0,sources:7,label:8,root:9,show_label:10,container:11,scale:12,min_width:13,loading_status:1,autoplay:33,loop:14,show_download_button:15,show_share_button:16,editable:17,waveform_options:18,pending:19,streaming:20,stream_every:21,input_ready:32,modify_stream_state:34,get_stream_state:35,set_time_limit:2,gradio:22},null,[-1,-1,-1])}get value_is_output(){return this.$$.ctx[31]}set value_is_output(e){this.$$set({value_is_output:e}),M()}get elem_id(){return this.$$.ctx[3]}set elem_id(e){this.$$set({elem_id:e}),M()}get elem_classes(){return this.$$.ctx[4]}set elem_classes(e){this.$$set({elem_classes:e}),M()}get visible(){return this.$$.ctx[5]}set visible(e){this.$$set({visible:e}),M()}get interactive(){return this.$$.ctx[6]}set interactive(e){this.$$set({interactive:e}),M()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),M()}get sources(){return this.$$.ctx[7]}set sources(e){this.$$set({sources:e}),M()}get label(){return this.$$.ctx[8]}set label(e){this.$$set({label:e}),M()}get root(){return this.$$.ctx[9]}set root(e){this.$$set({root:e}),M()}get show_label(){return this.$$.ctx[10]}set show_label(e){this.$$set({show_label:e}),M()}get container(){return this.$$.ctx[11]}set container(e){this.$$set({container:e}),M()}get scale(){return this.$$.ctx[12]}set scale(e){this.$$set({scale:e}),M()}get min_width(){return this.$$.ctx[13]}set min_width(e){this.$$set({min_width:e}),M()}get loading_status(){return this.$$.ctx[1]}set loading_status(e){this.$$set({loading_status:e}),M()}get autoplay(){return this.$$.ctx[33]}set autoplay(e){this.$$set({autoplay:e}),M()}get loop(){return this.$$.ctx[14]}set loop(e){this.$$set({loop:e}),M()}get show_download_button(){return this.$$.ctx[15]}set show_download_button(e){this.$$set({show_download_button:e}),M()}get show_share_button(){return this.$$.ctx[16]}set show_share_button(e){this.$$set({show_share_button:e}),M()}get editable(){return this.$$.ctx[17]}set editable(e){this.$$set({editable:e}),M()}get waveform_options(){return this.$$.ctx[18]}set waveform_options(e){this.$$set({waveform_options:e}),M()}get pending(){return this.$$.ctx[19]}set pending(e){this.$$set({pending:e}),M()}get streaming(){return this.$$.ctx[20]}set streaming(e){this.$$set({streaming:e}),M()}get stream_every(){return this.$$.ctx[21]}set stream_every(e){this.$$set({stream_every:e}),M()}get input_ready(){return this.$$.ctx[32]}set input_ready(e){this.$$set({input_ready:e}),M()}get modify_stream_state(){return this.$$.ctx[34]}get get_stream_state(){return this.$$.ctx[35]}get set_time_limit(){return this.$$.ctx[2]}set set_time_limit(e){this.$$set({set_time_limit:e}),M()}get gradio(){return this.$$.ctx[22]}set gradio(e){this.$$set({gradio:e}),M()}}const $o=po;export{ts as BaseExample,to as BaseInteractiveAudio,Pn as BasePlayer,Bn as BaseStaticAudio,$o as default};
//# sourceMappingURL=index-DbMnQJJU.js.map
