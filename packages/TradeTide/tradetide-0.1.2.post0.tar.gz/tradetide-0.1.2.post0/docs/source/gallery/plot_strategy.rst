
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "gallery/plot_strategy.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_gallery_plot_strategy.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_gallery_plot_strategy.py:


Strategy
========

.. GENERATED FROM PYTHON SOURCE LINES 5-50

.. code-block:: python3


    # Import necessary modules and classes from the TradeTide package
    from TradeTide import BackTester, indicators, get_market_data, Strategy
    from TradeTide import capital_management, risk_management


    # Load historical market data for EUR/USD pair for the year 2023 and limit to 4000 data points
    market_data = get_market_data('eur', 'usd', year=2023, time_span='3day', spread=0)

    # Initialize a Moving Average Crossing indicator with specific window settings and minimum period
    indicator_0 = indicators.BB()
    indicator_1 = indicators.RMI()

    strategy = Strategy(
        indicator_0, indicator_1
    )

    # Generate trading signals based on the market data
    strategy.generate_signal(market_data)

    # Plot the indicator signals overlaid on the market data
    strategy.plot()

    # Create the BackTester instance, linking it with the market data and chosen strategy
    backtester = BackTester(market=market_data, strategy=strategy)

    # Set up loss and profit management with specified stop loss and take profit percentages
    risk = risk_management.DirectLossProfit(
        market=market_data,
        stop_loss='10pip',
        take_profit='10pip',
    )

    # Configure capital management strategy with initial capital, spread, and trading constraints
    capital_management = capital_management.LimitedCapital(
        initial_capital=100_000,
        risk_management=risk,
        max_cap_per_trade=10_000,
        limit_of_positions=1,
        micro_lot=1_000
    )

    # Execute the backtest using the configured capital management strategy
    backtester.backtest(capital_management=capital_management)




.. image-sg:: /gallery/images/sphx_glr_plot_strategy_001.png
   :alt: Trading Indicators Overview
   :srcset: /gallery/images/sphx_glr_plot_strategy_001.png
   :class: sphx-glr-single-img



.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">
    <div>
    <style scoped>
        .dataframe tbody tr th:only-of-type {
            vertical-align: middle;
        }

        .dataframe tbody tr th {
            vertical-align: top;
        }

        .dataframe thead th {
            text-align: right;
        }
    </style>
    <table border="1" class="dataframe">
      <thead>
        <tr style="text-align: right;">
          <th></th>
          <th>date</th>
          <th>units</th>
          <th>holdings</th>
          <th>short_positions</th>
          <th>long_positions</th>
          <th>cash</th>
          <th>total</th>
          <th>returns</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th>0</th>
          <td>2023-08-04 08:13:00+00:00</td>
          <td>0.0</td>
          <td>0.000</td>
          <td>0.0</td>
          <td>0.0</td>
          <td>100000.000</td>
          <td>100000.000</td>
          <td>NaN</td>
        </tr>
        <tr>
          <th>1</th>
          <td>2023-08-04 08:14:00+00:00</td>
          <td>0.0</td>
          <td>0.000</td>
          <td>0.0</td>
          <td>0.0</td>
          <td>100000.000</td>
          <td>100000.000</td>
          <td>0.000000</td>
        </tr>
        <tr>
          <th>2</th>
          <td>2023-08-04 08:15:00+00:00</td>
          <td>0.0</td>
          <td>0.000</td>
          <td>0.0</td>
          <td>0.0</td>
          <td>100000.000</td>
          <td>100000.000</td>
          <td>0.000000</td>
        </tr>
        <tr>
          <th>3</th>
          <td>2023-08-04 08:16:00+00:00</td>
          <td>0.0</td>
          <td>0.000</td>
          <td>0.0</td>
          <td>0.0</td>
          <td>100000.000</td>
          <td>100000.000</td>
          <td>0.000000</td>
        </tr>
        <tr>
          <th>4</th>
          <td>2023-08-04 08:17:00+00:00</td>
          <td>0.0</td>
          <td>0.000</td>
          <td>0.0</td>
          <td>0.0</td>
          <td>100000.000</td>
          <td>100000.000</td>
          <td>0.000000</td>
        </tr>
        <tr>
          <th>...</th>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
        </tr>
        <tr>
          <th>1430</th>
          <td>2023-08-07 08:08:00+00:00</td>
          <td>9100.0</td>
          <td>9997.442</td>
          <td>1.0</td>
          <td>0.0</td>
          <td>90009.231</td>
          <td>100006.673</td>
          <td>0.000004</td>
        </tr>
        <tr>
          <th>1431</th>
          <td>2023-08-07 08:09:00+00:00</td>
          <td>9100.0</td>
          <td>9998.625</td>
          <td>1.0</td>
          <td>0.0</td>
          <td>90009.231</td>
          <td>100007.856</td>
          <td>0.000012</td>
        </tr>
        <tr>
          <th>1432</th>
          <td>2023-08-07 08:10:00+00:00</td>
          <td>9100.0</td>
          <td>9998.625</td>
          <td>1.0</td>
          <td>0.0</td>
          <td>90009.231</td>
          <td>100007.856</td>
          <td>0.000000</td>
        </tr>
        <tr>
          <th>1433</th>
          <td>2023-08-07 08:11:00+00:00</td>
          <td>9100.0</td>
          <td>9997.715</td>
          <td>1.0</td>
          <td>0.0</td>
          <td>90009.231</td>
          <td>100006.946</td>
          <td>-0.000009</td>
        </tr>
        <tr>
          <th>1434</th>
          <td>2023-08-07 08:12:00+00:00</td>
          <td>9100.0</td>
          <td>9996.805</td>
          <td>1.0</td>
          <td>0.0</td>
          <td>90009.231</td>
          <td>100006.036</td>
          <td>-0.000009</td>
        </tr>
      </tbody>
    </table>
    <p>1435 rows Ã— 8 columns</p>
    </div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 51-52

Visualize the backtest results, showing the strategy's performance against the market price

.. GENERATED FROM PYTHON SOURCE LINES 52-64

.. code-block:: python3

    backtester.plot(show_price=True)

    # Calculate and display key performance metrics for the trading strategy
    metrics = backtester.metrics


    # Retrieve and print the final total value of the portfolio after completing the backtest
    metrics.print()



    # -



.. image-sg:: /gallery/images/sphx_glr_plot_strategy_002.png
   :alt: Trading Strategy Overview
   :srcset: /gallery/images/sphx_glr_plot_strategy_002.png
   :class: sphx-glr-single-img


.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    Property              value
    --------------------  -------------------------
    Start Date            2023-08-04 08:13:00+00:00
    Stop Date             2023-08-07 08:12:00+00:00
    Duration              2 days 23:59:00
    Reward-Risk ratio     1.0
    Returns               0.01%
    Returns [annualized]  2.23%
    Maximum drawdown      -0.06%
    Sharpe Ratio          0.05
    Sortino Ratio         99.40
    Number of Trades      18
    Win-Loss Ratio        0.38
    Equity                $100,006.04
    Volatility            0.02%





.. rst-class:: sphx-glr-timing

   **Total running time of the script:** (0 minutes 0.865 seconds)


.. _sphx_glr_download_gallery_plot_strategy.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example




    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: plot_strategy.py <plot_strategy.py>`

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: plot_strategy.ipynb <plot_strategy.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
