
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "gallery/plot_RMI.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_gallery_plot_RMI.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_gallery_plot_RMI.py:


Relative Momentum Index
=======================

.. GENERATED FROM PYTHON SOURCE LINES 5-50

.. code-block:: python3


    # Import necessary modules and classes from the TradeTide package
    from TradeTide import BackTester, indicators, get_market_data
    from TradeTide import capital_management, risk_management

    # Load historical market data for EUR/USD pair for the year 2023 and limit to 4000 data points
    market_data = get_market_data('eur', 'usd', year=2023, time_span='3day', spread=0)

    # Initialize a Moving Average Crossing indicator with specific window settings and minimum period
    indicator = indicators.RMI(
        period=30,
        momentum=5,
        overbought_threshold=70,
        oversold_threshold=30
    )

    # Generate trading signals based on the market data
    indicator.generate_signal(market_data)

    # Plot the indicator signals overlaid on the market data
    indicator.plot()

    # Create the BackTester instance, linking it with the market data and chosen strategy
    backtester = BackTester(market=market_data, strategy=indicator)

    # Set up loss and profit management with specified stop loss and take profit percentages
    risk = risk_management.DirectLossProfit(
        market=market_data,
        stop_loss='10pip',
        take_profit='10pip',
    )

    # Configure capital management strategy with initial capital, spread, and trading constraints
    capital_management = capital_management.LimitedCapital(
        initial_capital=100_000,
        risk_management=risk,
        max_cap_per_trade=10_000,
        limit_of_positions=1,
        micro_lot=1_000
    )

    # Execute the backtest using the configured capital management strategy
    backtester.backtest(capital_management=capital_management)





.. image-sg:: /gallery/images/sphx_glr_plot_RMI_001.png
   :alt: plot RMI
   :srcset: /gallery/images/sphx_glr_plot_RMI_001.png
   :class: sphx-glr-single-img



.. raw:: html

    <div class="output_subarea output_html rendered_html output_result">
    <div>
    <style scoped>
        .dataframe tbody tr th:only-of-type {
            vertical-align: middle;
        }

        .dataframe tbody tr th {
            vertical-align: top;
        }

        .dataframe thead th {
            text-align: right;
        }
    </style>
    <table border="1" class="dataframe">
      <thead>
        <tr style="text-align: right;">
          <th></th>
          <th>date</th>
          <th>units</th>
          <th>holdings</th>
          <th>short_positions</th>
          <th>long_positions</th>
          <th>cash</th>
          <th>total</th>
          <th>returns</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th>0</th>
          <td>2023-08-04 08:13:00+00:00</td>
          <td>0.0</td>
          <td>0.0</td>
          <td>0.0</td>
          <td>0.0</td>
          <td>100000.000</td>
          <td>100000.000</td>
          <td>NaN</td>
        </tr>
        <tr>
          <th>1</th>
          <td>2023-08-04 08:14:00+00:00</td>
          <td>0.0</td>
          <td>0.0</td>
          <td>0.0</td>
          <td>0.0</td>
          <td>100000.000</td>
          <td>100000.000</td>
          <td>0.0</td>
        </tr>
        <tr>
          <th>2</th>
          <td>2023-08-04 08:15:00+00:00</td>
          <td>0.0</td>
          <td>0.0</td>
          <td>0.0</td>
          <td>0.0</td>
          <td>100000.000</td>
          <td>100000.000</td>
          <td>0.0</td>
        </tr>
        <tr>
          <th>3</th>
          <td>2023-08-04 08:16:00+00:00</td>
          <td>0.0</td>
          <td>0.0</td>
          <td>0.0</td>
          <td>0.0</td>
          <td>100000.000</td>
          <td>100000.000</td>
          <td>0.0</td>
        </tr>
        <tr>
          <th>4</th>
          <td>2023-08-04 08:17:00+00:00</td>
          <td>0.0</td>
          <td>0.0</td>
          <td>0.0</td>
          <td>0.0</td>
          <td>100000.000</td>
          <td>100000.000</td>
          <td>0.0</td>
        </tr>
        <tr>
          <th>...</th>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
          <td>...</td>
        </tr>
        <tr>
          <th>1430</th>
          <td>2023-08-07 08:08:00+00:00</td>
          <td>0.0</td>
          <td>0.0</td>
          <td>0.0</td>
          <td>0.0</td>
          <td>100018.409</td>
          <td>100018.409</td>
          <td>0.0</td>
        </tr>
        <tr>
          <th>1431</th>
          <td>2023-08-07 08:09:00+00:00</td>
          <td>0.0</td>
          <td>0.0</td>
          <td>0.0</td>
          <td>0.0</td>
          <td>100018.409</td>
          <td>100018.409</td>
          <td>0.0</td>
        </tr>
        <tr>
          <th>1432</th>
          <td>2023-08-07 08:10:00+00:00</td>
          <td>0.0</td>
          <td>0.0</td>
          <td>0.0</td>
          <td>0.0</td>
          <td>100018.409</td>
          <td>100018.409</td>
          <td>0.0</td>
        </tr>
        <tr>
          <th>1433</th>
          <td>2023-08-07 08:11:00+00:00</td>
          <td>0.0</td>
          <td>0.0</td>
          <td>0.0</td>
          <td>0.0</td>
          <td>100018.409</td>
          <td>100018.409</td>
          <td>0.0</td>
        </tr>
        <tr>
          <th>1434</th>
          <td>2023-08-07 08:12:00+00:00</td>
          <td>0.0</td>
          <td>0.0</td>
          <td>0.0</td>
          <td>0.0</td>
          <td>100018.409</td>
          <td>100018.409</td>
          <td>0.0</td>
        </tr>
      </tbody>
    </table>
    <p>1435 rows Ã— 8 columns</p>
    </div>
    </div>
    <br />
    <br />

.. GENERATED FROM PYTHON SOURCE LINES 51-52

Visualize the backtest results, showing the strategy's performance against the market price

.. GENERATED FROM PYTHON SOURCE LINES 52-57

.. code-block:: python3

    backtester.plot(show_price=True)

    # Calculate and display key performance metrics for the trading strategy
    metrics = backtester.metrics




.. image-sg:: /gallery/images/sphx_glr_plot_RMI_002.png
   :alt: Trading Strategy Overview
   :srcset: /gallery/images/sphx_glr_plot_RMI_002.png
   :class: sphx-glr-single-img





.. GENERATED FROM PYTHON SOURCE LINES 58-59

Retrieve and print the final total value of the portfolio after completing the backtest

.. GENERATED FROM PYTHON SOURCE LINES 59-63

.. code-block:: python3

    metrics.print()


    # -




.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    Property              value
    --------------------  -------------------------
    Start Date            2023-08-04 08:13:00+00:00
    Stop Date             2023-08-07 08:12:00+00:00
    Duration              2 days 23:59:00
    Reward-Risk ratio     1.0
    Returns               0.02%
    Returns [annualized]  6.95%
    Maximum drawdown      -0.07%
    Sharpe Ratio          0.15
    Sortino Ratio         333.08
    Number of Trades      20
    Win-Loss Ratio        0.43
    Equity                $100,018.41
    Volatility            0.02%





.. rst-class:: sphx-glr-timing

   **Total running time of the script:** (0 minutes 0.963 seconds)


.. _sphx_glr_download_gallery_plot_RMI.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example




    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: plot_RMI.py <plot_RMI.py>`

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: plot_RMI.ipynb <plot_RMI.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
